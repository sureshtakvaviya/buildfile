(function(e){function t(t){for(var r,o,n=t[0],l=t[1],c=t[2],u=0,p=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},i={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="http://106.51.3.224:6661/aipmapveu/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0048":function(e,t,a){},"034f":function(e,t,a){"use strict";var r=a("85ec"),i=a.n(r);i.a},"0ae6":function(e,t,a){},"0b5d":function(e,t,a){"use strict";var r=a("a494"),i=a.n(r);i.a},"13bc":function(e,t,a){"use strict";var r=a("8de0"),i=a.n(r);i.a},1526:function(e,t,a){"use strict";var r=a("c6ad"),i=a.n(r);i.a},"1f58":function(e,t,a){"use strict";var r=a("913f"),i=a.n(r);i.a},"20c3":function(e,t,a){"use strict";var r=a("2541"),i=a.n(r);i.a},2248:function(e,t,a){"use strict";var r=a("0ae6"),i=a.n(r);i.a},"24de":function(e,t,a){},2541:function(e,t,a){},2580:function(e,t,a){},"260b":function(e,t,a){e.exports=a.p+"img/tapl_bird_white.2c27b7b3.png"},"28b1":function(e,t,a){"use strict";var r=a("a433"),i=a.n(r);i.a},"2b65":function(e,t,a){"use strict";var r=a("d831"),i=a.n(r);i.a},"31e6":function(e,t,a){},3394:function(e,t,a){},"3a38":function(e,t,a){},"3e05":function(e,t,a){},"3e7e":function(e,t,a){"use strict";var r=a("31e6"),i=a.n(r);i.a},"404c":function(e,t,a){"use strict";var r=a("c609"),i=a.n(r);i.a},"40c0":function(e,t,a){"use strict";var r=a("c42b"),i=a.n(r);i.a},"43b5":function(e,t,a){"use strict";var r=a("a281"),i=a.n(r);i.a},"44ae":function(e,t,a){},4564:function(e,t,a){},"4e83":function(e,t,a){"use strict";var r=a("3a38"),i=a.n(r);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("4de4"),a("fb6a"),a("b680"),a("d3b7"),a("25f0"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("loading",{attrs:{loader:"bars",active:e.isSpinnerShowing,"can-cancel":!0,"is-full-page":e.fullPage,"background-color":"#000",color:"#4527A0"},on:{"update:active":function(t){e.isSpinnerShowing=t}}}),a("router-view")],1)},s=[],o=a("9062"),n=a.n(o),l=(a("e40d"),{components:{Loading:n.a},data:function(){return{fullPage:!0}},computed:{isSpinnerShowing:function(){var e=this.$store.state.isSpinnerShowing;return!!e}},methods:{handleToast:function(e){var t=e.message,a=e.title,r=void 0===a?"Info":a,i=e.time,s=void 0===i?"3000":i,o=e.variant,n=void 0===o?"success":o;this.$bvToast.toast(t,{title:r,autoHideDelay:s,appendToast:!1,variant:n})}},mounted:function(){var e=this;this.$root.$on("showToast",(function(t){t&&e.handleToast(t)}))}}),c=l,d=(a("034f"),a("2877")),u=Object(d["a"])(c,i,s,!1,null,null,null),p=u.exports,f=(a("45fc"),a("8c4f")),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loginPage"},[a("login")],1)},h=[],v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loginContainer"},[a("b-card",{staticClass:"shadow mx-auto",staticStyle:{"min-width":"25rem"},attrs:{tag:"article"}},[a("div",{staticClass:"text-primaryBg text-center"},[a("i",{staticClass:"fa fa-user-circle fa-3x"})]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("div",{staticClass:"text-center"},[a("b",{staticClass:"text-center"},[e._v("Welcome Back!")])]),a("b-input-group",{attrs:{id:"userName-input-group"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("b-input-group-text",[a("i",{staticClass:"fa fa-envelope"})])]},proxy:!0}])},[a("b-form-input",{attrs:{id:"userName-input",type:"text",required:"",placeholder:"Username / Email"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),a("b-input-group",{attrs:{id:"password-input-group"},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("b-input-group-text",[a("i",{staticClass:"fa fa-lock"})])]},proxy:!0}])},[a("b-form-input",{attrs:{id:"password-input",type:"password",required:"",placeholder:"Enter your password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("div",{staticClass:"d-flex justify-content-between"},[a("div",[a("b-form-checkbox",{attrs:{id:"checkbox-remember",name:"checkbox-remember",value:"true","unchecked-value":"not_accepted"},model:{value:e.isRemeber,callback:function(t){e.isRemeber=t},expression:"isRemeber"}},[e._v(" Remember Me ")])],1),a("div",{staticClass:"text-center"},[a("b-link",{staticClass:"text-primaryBg",attrs:{href:"#"},on:{click:e.routeToRecovery}},[e._v("Forgot Password?")])],1)]),a("div",{staticClass:"text-center"},[a("b-button",{staticClass:"primaryBg w-75 shadow-sm mt-3",attrs:{type:"submit"}},[e._v("Login")])],1),a("hr"),a("p",{staticClass:"mt-2"},[e._v(" Don't have an account? "),a("b-link",{staticClass:"text-primaryBg",attrs:{href:"#"},on:{click:e.routeToRegister}},[e._v("Sign Up")])],1)],1)],1)],1)},g=[],b={name:"login",data:function(){return{form:{userName:"",password:""},isRemeber:!1}},methods:{onSubmit:function(){var e=this,t={};this.validateEmail(this.form.userName)?(t.email=this.form.userName,t.password=this.form.password):(t.username=this.form.userName,t.password=this.form.password),this.$store.dispatch("userStore/login",t).then((function(t){if("success"===t){var a=e.$route.query.redirect?e.$route.query.redirect:"/home";e.$router.push(a)}})).catch((function(t){console.log(t),e.$bvToast.toast("Enter valid username and password",{title:"Invalid Credentials",autoHideDelay:2e3,appendToast:!1,variant:"danger"})}))},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())},routeToRegister:function(){this.$router.push("/register")},routeToRecovery:function(){this.$router.push("/account-recovery")}}},y=b,C=(a("0b5d"),Object(d["a"])(y,v,g,!1,null,"29ca0a78",null)),w=C.exports,_={name:"loginPage",components:{login:w}},k=_,A=(a("d889"),Object(d["a"])(k,m,h,!1,null,"ba302afa",null)),D=A.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"registerPage"},[a("register")],1)},S=[],x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"registerContainer"},[a("b-card",{staticClass:"registerCard shadow mx-4 my-2"},[a("div",{staticClass:"d-flex justify-content-center"},[a("div",[a("label",{attrs:{for:"fileToUpload"}},[a("div",{staticClass:"profile-pic d-flex justify-content-center",style:e.defaultImageProp,attrs:{id:"registerProfilePicture"}},[a("span",[a("i",{staticClass:"fas fa-camera"})]),a("span",[e._v("Change Image")])])]),a("b-form-file",{attrs:{name:"fileToUpload",id:"fileToUpload",accept:".jpg,.jpeg,.png",plain:""},on:{input:e.previewProfilePic},model:{value:e.profilePicFile,callback:function(t){e.profilePicFile=t},expression:"profilePicFile"}})],1)]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("div",{staticClass:"text-center"},[a("b",{staticClass:"text-center"},[e._v("Be One of Us!")]),a("hr")]),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"username-input-group",label:"Username","label-for":"username-input"}},[a("b-form-input",{attrs:{id:"username-input",type:"text",state:e.validateState("username"),required:""},model:{value:e.$v.form.username.$model,callback:function(t){e.$set(e.$v.form.username,"$model",t)},expression:"$v.form.username.$model"}}),e.$v.form.username.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Username must be atleast 3 characters long. ")]),e.$v.form.username.alphaNum?e._e():a("b-form-invalid-feedback",[e._v(" Username must be alphanumeric without spaces or special characters ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"subscription-input-group",label:"Subscription","label-for":"subscription-input"}},[a("b-form-select",{attrs:{id:"subscription-input",options:e.options,state:e.validateState("subscription"),required:""},model:{value:e.$v.form.subscription.$model,callback:function(t){e.$set(e.$v.form.subscription,"$model",t)},expression:"$v.form.subscription.$model"}}),e.$v.form.subscription.required?e._e():a("b-form-invalid-feedback",[e._v(" Please Select a subscription type ")])],1)],1)],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"firtname-input-group",label:"First Name","label-for":"firstname-input"}},[a("b-form-input",{attrs:{id:"firstname-input",type:"text",state:e.validateState("firstname"),required:""},model:{value:e.$v.form.firstname.$model,callback:function(t){e.$set(e.$v.form.firstname,"$model",t)},expression:"$v.form.firstname.$model"}}),e.$v.form.firstname.minLength?e._e():a("b-form-invalid-feedback",[e._v(" First Name must be atleast 3 characters long. ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"last-input-group",label:"Last Name","label-for":"firstname-input"}},[a("b-form-input",{attrs:{id:"last-input",type:"text",state:e.validateState("lastname"),required:""},model:{value:e.$v.form.lastname.$model,callback:function(t){e.$set(e.$v.form.lastname,"$model",t)},expression:"$v.form.lastname.$model"}}),e.$v.form.lastname.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Last Name must be atleast 3 characters long. ")])],1)],1)],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"company-input-group",label:"Company","label-for":"company-input"}},[a("b-form-input",{attrs:{id:"company-input",type:"text",state:e.validateState("company"),required:""},model:{value:e.$v.form.company.$model,callback:function(t){e.$set(e.$v.form.company,"$model",t)},expression:"$v.form.company.$model"}}),e.$v.form.company.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Company Name must be atleast 3 characters long. ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"location-input-group",label:"Location","label-for":"location-input"}},[a("b-form-input",{attrs:{id:"location-input",state:e.validateState("location"),type:"text",required:""},model:{value:e.$v.form.location.$model,callback:function(t){e.$set(e.$v.form.location,"$model",t)},expression:"$v.form.location.$model"}}),e.$v.form.location.alphaSpaces?e._e():a("b-form-invalid-feedback",[e._v(" Location can contain only alphanumerals and '-' ")]),e.$v.form.location.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Location must be atleast 3 characters long. ")])],1)],1)],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"phone-input-group",label:"Phone Number","label-for":"phone-input"}},[a("b-form-input",{attrs:{id:"phone-input",state:e.validateState("phone"),type:"number",required:""},model:{value:e.$v.form.phone.$model,callback:function(t){e.$set(e.$v.form.phone,"$model",t)},expression:"$v.form.phone.$model"}}),e.$v.form.phone.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Must be atleast 10 numbers ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"email-input-group",label:"Email Address","label-for":"email-input"}},[a("b-form-input",{attrs:{id:"email-input",type:"email",state:e.validateState("email"),required:""},model:{value:e.$v.form.email.$model,callback:function(t){e.$set(e.$v.form.email,"$model",t)},expression:"$v.form.email.$model"}}),a("b-form-invalid-feedback",[e._v(" Enter a valid Email Id. Eg: don@example.com ")])],1)],1)],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"password-input-group",label:"Password","label-for":"password-input"}},[a("b-form-input",{attrs:{id:"password-input",state:e.validateState("password"),type:"password",required:""},model:{value:e.$v.form.password.$model,callback:function(t){e.$set(e.$v.form.password,"$model",t)},expression:"$v.form.password.$model"}}),e.$v.form.password.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Password must be atleast 6 characters long. ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"confirmPassword-input-group",label:"Confirm Password","label-for":"confirmPassword-input"}},[a("b-form-input",{attrs:{id:"confirmPassword-input",state:e.validateState("confirmPassword"),type:"password",required:""},model:{value:e.$v.form.confirmPassword.$model,callback:function(t){e.$set(e.$v.form.confirmPassword,"$model",t)},expression:"$v.form.confirmPassword.$model"}}),e.$v.form.confirmPassword.sameAsPassword?e._e():a("b-form-invalid-feedback",[e._v(" Passwords do not match ")])],1)],1)],1),a("div",{staticClass:"text-center"},[a("b-button",{staticClass:"primaryBg w-75 shadow-sm m-1",attrs:{type:"submit"}},[e._v("Submit")])],1),a("p",{staticClass:"mt-2"},[e._v(" Already have an account? "),a("b-link",{staticClass:"text-primaryBg",attrs:{href:"#"},on:{click:e.routeToLogin}},[e._v("Login")])],1)],1)],1)],1)},j=[],L=a("b5ae"),P=L["helpers"].regex("alphaSpaces",/^[\w\-\s]+$/),M={name:"register",data:function(){return{form:{username:"",subscription:null,email:"",firstname:"",lastname:"",company:"",phone:"",location:"",password:"",confirmPassword:""},options:[{value:null,text:"Please select an option"},{value:"Freemium",text:"Freemium"},{value:"Premium",text:"Premium"},{value:"Enterprise",text:"Enterprise"}],defaultImageProp:{backgroundImage:"url(".concat(a("aaf2"),")")},profilePicFile:null,profilePicBinary:""}},validations:{form:{username:{required:L["required"],minLength:Object(L["minLength"])(3),alphaNum:L["alphaNum"]},subscription:{required:L["required"]},email:{required:L["required"],email:L["email"]},firstname:{required:L["required"],minLength:Object(L["minLength"])(3)},lastname:{required:L["required"],minLength:Object(L["minLength"])(3)},company:{required:L["required"],minLength:Object(L["minLength"])(3)},phone:{required:L["required"],numeric:L["numeric"],minLength:Object(L["minLength"])(10)},location:{required:L["required"],alphaSpaces:P,minLength:Object(L["minLength"])(3)},password:{required:L["required"],minLength:Object(L["minLength"])(6)},confirmPassword:{required:L["required"],sameAsPassword:Object(L["sameAs"])("password")}}},methods:{validateState:function(e){var t=this.$v.form[e],a=t.$dirty,r=t.$error;return a?!r:null},previewProfilePic:function(e){var t=this,a=new FileReader;a.onload=function(e){var a=document.getElementById("registerProfilePicture");a.style.backgroundImage="url("+e.target.result+")",t.profilePicBinary=e.target.result,console.log(t.profilePicBinary)},a.readAsDataURL(e)},onSubmit:function(){var e=this;if(this.$v.form.$error)this.$bvToast.toast("Please fill in all fields with valid data",{title:"Validation Error!",autoHideDelay:2e3,appendToast:!1,variant:"danger"});else{var t={username:this.form.username,subscription:this.form.subscription,firstname:this.form.firstname,lastname:this.form.lastname,email:this.form.email,mobile_number:this.form.phone,company:this.form.company,location:this.form.location,password:this.form.password,password2:this.form.confirmPassword,profile_picture:this.profilePicBinary};this.$store.dispatch("userStore/register",t).then((function(t){if("success"===t){var a={email:e.form.email,password:e.form.password};e.$store.dispatch("userStore/login",a).then((function(t){"success"===t&&e.$router.push("/home")})).catch((function(t){console.log(t),e.$bvToast.toast("Error while logging in. Try again later or contact support",{title:"Error!",autoHideDelay:2e3,appendToast:!1,variant:"danger"})}))}})).catch((function(t){console.log(t),e.$bvToast.toast("Error while registering. Try again later or contact support",{title:"Error!",autoHideDelay:2e3,appendToast:!1,variant:"danger"})}))}},routeToLogin:function(){this.$router.push("/login")}}},T=M,I=(a("2b65"),Object(d["a"])(T,x,j,!1,null,"d58c92fc",null)),B=I.exports,O={name:"registerPage",components:{register:B}},U=O,N=(a("6fb0"),Object(d["a"])(U,$,S,!1,null,"b19a1e94",null)),E=N.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"accountRecoveryPage"},[a("accountRecovery")],1)},R=[],q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"accountRecoveryContainer"},[a("b-card",{staticClass:"shadow mx-auto",staticStyle:{"min-width":"25rem"},attrs:{tag:"article"}},[a("div",{staticClass:"text-center"},[a("div",{staticClass:"text-primaryBg text-center"},[a("i",{staticClass:"fa fa-unlock-alt fa-3x"})])]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("div",{staticClass:"text-center"},[a("b",{staticClass:"text-center"},[e._v("Account Recovery")])]),a("b-form-group",{attrs:{id:"email-input-group",label:"Enter your registered email","label-for":"email-input"}},[a("b-form-input",{attrs:{id:"email-input",type:"email",state:e.validateState("email"),required:""},model:{value:e.$v.form.email.$model,callback:function(t){e.$set(e.$v.form.email,"$model",t)},expression:"$v.form.email.$model"}}),a("b-form-invalid-feedback",[e._v(" Enter a valid Email Id. Eg: don@example.com ")])],1),a("div",{staticClass:"d-flex flex-column align-items-center"},[a("b-button",{staticClass:"primaryBg w-50 shadow-sm m-2",attrs:{type:"submit"}},[e._v("Submit")]),a("b-button",{staticClass:"shadow-sm",attrs:{pill:"",variant:"outline-secondary"},on:{click:e.routeToLogin}},[e._v("Back to Login Page")])],1)],1)],1)],1)},z=[],V={name:"accountRecovery",data:function(){return{form:{email:""}}},validations:{form:{email:{email:L["email"]}}},methods:{validateState:function(e){var t=this.$v.form[e],a=t.$dirty,r=t.$error;return a?!r:null},onSubmit:function(){this.$v.form.$error?this.$bvToast.toast("Please fill in with a valid email",{title:"Validation Error!",autoHideDelay:2e3,appendToast:!1,variant:"danger"}):console.log(this.email)},routeToLogin:function(){this.$router.push("/login")}}},H=V,K=(a("d57f"),Object(d["a"])(H,q,z,!1,null,"a839a738",null)),Y=K.exports,G={name:"accountRecoveryPage",components:{accountRecovery:Y}},W=G,Z=(a("a24c"),Object(d["a"])(W,F,R,!1,null,"76309744",null)),Q=Z.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("home")],1)},X=[],ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("navbar"),a("div",{staticClass:"d-flex justify-content-between m-2"},[a("div",{staticClass:"d-flex"},e._l(e.filterOptions,(function(t){return a("div",{key:t.text,staticClass:"m-2",on:{click:function(a){return e.changeFilter(t.value)}}},[a("span",{staticClass:"filterOption",class:{selectedFilter:e.filter===t.value}},[e._v(e._s(t.text)+" ")])])})),0),a("div",{staticClass:"d-flex align-items-center"},[e._m(0),a("b-form-group",{staticClass:"m-2"},[a("b-form-select",{attrs:{variant:"dark",options:e.sortOptions},model:{value:e.sort,callback:function(t){e.sort=t},expression:"sort"}})],1)],1)]),e.projectsArray.length>0?a("div",{staticClass:"w-90 d-flex flex-wrap mx-auto"},e._l(e.sortedArray,(function(t,r){return a("div",{key:r},[a("b-card",{staticClass:"mb-4 mx-3 shadow-sm",staticStyle:{"max-width":"25rem"},attrs:{tag:"article","img-src":e.imageProp(t),"img-alt":"Image","img-top":""}},["read"!==t.access?a("div",{staticClass:"projectButtonsContainer d-flex justify-content-end"},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-1 transparentBg",attrs:{pill:"",title:"Edit Project"},on:{click:function(a){return e.showEditProject(t)}}},[a("i",{staticClass:"fa fa-pencil"})]),e.$can("use","Enterprise")?a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-1 transparentBg",attrs:{pill:"",title:"Share Project"},on:{click:function(a){return e.showShareModal(t)}}},[a("i",{staticClass:"fa fa-share-alt"})]):e._e(),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-1 transparentBg",attrs:{pill:"",title:"Delete Project"},on:{click:function(a){return e.showDeleteModal(t)}}},[a("i",{staticClass:"fa fa-trash-o"})])],1):e._e(),a("div",{staticClass:"d-flex justify-content-between"},[a("h5",{staticClass:"card-title"},[e._v(e._s(t.title))]),a("div",[a("span",[a("i",{staticClass:"mr-1 fas fa-map-marker-alt"})]),a("span",[e._v(e._s(e._f("capitalize")(t.city)))])])]),a("b-card-text",{staticClass:"text-capitalize"},[e._v(" "+e._s(t.description)+" ")]),a("b-link",{staticClass:"text-primaryBg",attrs:{href:"#"},on:{click:function(a){return e.routeToMap(t)}}},[a("b",[e._v("View")])]),a("b-link",{staticClass:"text-primaryBg ml-4",attrs:{href:"#"},on:{click:function(a){return e.showStatusModal(t)}}},[a("b",[e._v("Status")])]),a("b-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-primaryBg float-right",attrs:{href:"#",title:"Upload Project Files"},on:{click:function(a){return e.routeToFileUpload(t)}}},[a("b",[a("i",{staticClass:"fas fa-upload"})])])],1)],1)})),0):a("div",[e.hasProjectFetched?a("div",{staticClass:"text-center display-4"},[e._v(" You have no projects ")]):e._e()]),a("b-modal",{attrs:{size:"lg",id:"editProjectModal",title:"Edit Project","hide-footer":!0,centered:""}},[a("editProject",{attrs:{projectData:e.projectToBeEdited}})],1),a("b-modal",{attrs:{id:"shareModal",title:"Share your project","hide-footer":!0,centered:""}},[a("shareModal",{attrs:{projectId:e.projectToBeShared_Id}})],1),a("b-modal",{attrs:{id:"statusModal",title:e.statusModalTitle,size:"lg","hide-footer":!0,centered:""}},[a("statusModal",{attrs:{statusArray:e.projectStatus}})],1),a("b-modal",{attrs:{id:"deleteConfirmModal",title:"Deletion Confirmation","hide-footer":!0,centered:""}},[a("deleteConfirmModal",{attrs:{toBeDeleted:e.toBeDeleted,id:e.toBeDeletedId,deleteAPI:e.deleteAOIApi}})],1)],1)},te=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("i",{staticClass:"fa fa-sort-amount-down"})])}],ae=a("5530"),re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-navbar",{staticClass:"py-1",attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[a("b-navbar-brand",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.routeToHome(t)}}},[a("b",{staticClass:"text-light"},[e._v("ASSET")])]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",{staticClass:"ml-auto"},[e.isHomePage?a("b-button",{staticClass:"primaryBg border-0 mx-3 my-1",attrs:{pill:""},on:{click:e.showCreateModal}},[e._v("+ Create Project")]):e._e(),a("b-nav-item",{staticClass:"mx-2",attrs:{href:"#"}},[e._v("About")]),a("b-nav-item",{staticClass:"mx-2",attrs:{href:"#"}},[e._v("Contact Us")]),a("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("i",{staticClass:"fa fa-user-circle text-light"}),a("span",{staticClass:"text-light text-capitalize"},[e._v(" "+e._s(e.username)+" ")])]},proxy:!0}])},[a("b-dropdown-item",{on:{click:e.routeToUserProfile}},[e._v("Profile")]),e.$can("manage","subusers")?a("b-dropdown-item",{on:{click:e.routeToManageUsers}},[e._v("Manage Users")]):e._e(),a("b-dropdown-divider"),a("b-dropdown-item",{on:{click:e.logout}},[e._v("Sign Out")])],1)],1)],1)],1),a("b-modal",{attrs:{size:"lg",id:"createProjectModal",title:"Create New Project","hide-footer":!0,centered:""}},[a("createProject")],1)],1)},ie=[],se=(a("caad"),a("2532"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-card",{staticClass:"shadow",attrs:{tag:"article"}},[a("div",{staticClass:"d-flex justify-content-center"},[a("div",{staticClass:"w-100 d-flex justify-content-center"},[a("label",{attrs:{for:"projectProfilePicFile"}},[a("div",{staticClass:"profile-pic d-flex justify-content-center",style:e.imageProp,attrs:{id:"projectProfilePicture"}},[a("span",[a("i",{staticClass:"fas fa-camera"})]),a("span",[e._v("Change Image")])])]),a("b-form-file",{attrs:{name:"projectProfilePicFile",id:"projectProfilePicFile",accept:".jpg,.jpeg,.png",plain:""},on:{input:e.previewProfilePic},model:{value:e.projectProfilePicFile,callback:function(t){e.projectProfilePicFile=t},expression:"projectProfilePicFile"}})],1)]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"title-input-group",label:"Title","label-for":"title-input"}},[a("b-form-input",{attrs:{id:"title-input",type:"text",state:e.validateState("title"),required:""},model:{value:e.$v.form.title.$model,callback:function(t){e.$set(e.$v.form.title,"$model",t)},expression:"$v.form.title.$model"}}),e.$v.form.title.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Title must be atleast 3 characters long. ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"sector-input-group",label:"Sector","label-for":"sector-input"}},[a("b-form-select",{attrs:{id:"sector-input",options:e.options,state:e.validateState("sector"),required:""},model:{value:e.$v.form.sector.$model,callback:function(t){e.$set(e.$v.form.sector,"$model",t)},expression:"$v.form.sector.$model"}}),e.$v.form.sector.required?e._e():a("b-form-invalid-feedback",[e._v(" Please Select a sector type ")])],1)],1)],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"country-input-group",label:"Country","label-for":"country-input"}},[a("b-form-select",{attrs:{id:"country-input",options:e.countriesList,state:e.validateState("country"),required:""},on:{change:e.getStatesList},model:{value:e.$v.form.country.$model,callback:function(t){e.$set(e.$v.form.country,"$model",t)},expression:"$v.form.country.$model"}}),e.$v.form.country.required?e._e():a("b-form-invalid-feedback",[e._v(" Please Select a country ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"state-input-group",label:"State","label-for":"state-input"}},[a("b-form-select",{attrs:{id:"state-input",options:e.statesList,state:e.validateState("state"),required:""},on:{change:e.getCitiesList},model:{value:e.$v.form.state.$model,callback:function(t){e.$set(e.$v.form.state,"$model",t)},expression:"$v.form.state.$model"}}),e.$v.form.state.required?e._e():a("b-form-invalid-feedback",[e._v(" Please Select a state ")])],1)],1)],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"city-input-group",label:"City","label-for":"city-input"}},[a("b-form-select",{attrs:{id:"city-input",options:e.citiesList,state:e.validateState("city"),required:""},model:{value:e.$v.form.city.$model,callback:function(t){e.$set(e.$v.form.city,"$model",t)},expression:"$v.form.city.$model"}}),e.$v.form.city.required?e._e():a("b-form-invalid-feedback",[e._v(" Please Select a city ")])],1)],1),a("b-col")],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"description-input-group",label:"Description","label-for":"description-input"}},[a("b-form-textarea",{attrs:{id:"description-input",type:"text",state:e.validateState("description"),required:""},model:{value:e.$v.form.description.$model,callback:function(t){e.$set(e.$v.form.description,"$model",t)},expression:"$v.form.description.$model"}}),e.$v.form.description.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Description must be atleast 3 characters long. ")])],1)],1)],1),a("b-button",{staticClass:"primaryBg shadow-sm m-1",attrs:{type:"submit"}},[e._v("Submit")])],1)],1)],1)}),oe=[],ne=(a("a4d3"),a("e01a"),a("b0c0"),a("2f62")),le={name:"createProject",data:function(){return{form:{title:"",sector:"Construction_Site",description:"",lastname:"",country:null,state:null,city:null},options:[{value:"Solar_Site",text:"Solar"},{value:"Construction_Site",text:"Construction"}],projectProfilePicFile:null,profilePicBinary:""}},validations:{form:{title:{required:L["required"],minLength:Object(L["minLength"])(3)},sector:{required:L["required"]},description:{required:L["required"],minLength:Object(L["minLength"])(3)},country:{required:L["required"]},state:{required:L["required"]},city:{required:L["required"]}}},computed:Object(ae["a"])(Object(ae["a"])({},Object(ne["b"])({countriesList:"homeStore/getCountriesList",statesList:"homeStore/getStatesList",citiesList:"homeStore/getCitiesList"})),{},{rows:function(){return this.datesArray.length?this.datesArray.length:0},imageProp:function(){var e=this.form.sector,t={backgroundImage:""};return e&&(t="Construction_Site"===e?{backgroundImage:"url(".concat(a("e071"),")")}:{backgroundImage:"url(".concat(a("ceff"),")")}),t}}),methods:{validateState:function(e){var t=this.$v.form[e],a=t.$dirty,r=t.$error;return a?!r:null},getStatesList:function(e){this.$store.dispatch("homeStore/getStatesListApi",e.id)},getCitiesList:function(e){var t={countryId:this.form.country.id,stateId:e.id};this.$store.dispatch("homeStore/getCitiesListApi",t)},previewProfilePic:function(e){var t=this,a=new FileReader;a.onload=function(e){var a=document.getElementById("projectProfilePicture");a.style.backgroundImage="url("+e.target.result+")",t.profilePicBinary=e.target.result},a.readAsDataURL(e)},onSubmit:function(){var e=this;if(this.$v.form.$error)this.handleToast({title:"Validation Error",message:"Please Fill in all fields with valid Data",variant:"danger"});else{var t={title:this.form.title,sector:this.form.sector,description:this.form.description,country:this.form.country.name,state:this.form.state.name,city:this.form.city.name,projectprofileimage:this.profilePicBinary};this.$store.dispatch("homeStore/createProjectApi",t).then((function(a){"success"===a&&(e.handleToast({title:"Project Created",message:'Your project "'.concat(t.title," is created successfully"),variant:"success"}),e.$bvModal.hide("createProjectModal"))})).catch((function(t){console.log(t),e.handleToast({title:"Project Not Created",message:"There has been an error in creating your project. Try again or contact support",variant:"danger"})}))}},handleToast:function(e){this.$root.$emit("showToast",e)}},mounted:function(){this.$store.dispatch("homeStore/getCountriesListApi")}},ce=le,de=(a("28b1"),Object(d["a"])(ce,se,oe,!1,null,"95119a58",null)),ue=de.exports,pe={name:"navbar",components:{createProject:ue},computed:{username:function(){var e=this.$store.state.userStore.loggedInUser.username;return e||"user"},isHomePage:function(){var e=window.location.pathname;return!!e.includes("home")}},methods:{showCreateModal:function(){this.$bvModal.show("createProjectModal")},logout:function(){this.$store.dispatch("userStore/logout"),this.$router.push("/login")},routeToHome:function(){this.$router.push("/home")},routeToUserProfile:function(){this.$router.push("/user-profile")},routeToManageUsers:function(){this.$router.push("/manage-users")}}},fe=pe,me=(a("7b25"),Object(d["a"])(fe,re,ie,!1,null,"d5e6b05e",null)),he=me.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-card",{staticClass:"shadow",attrs:{tag:"article"}},[a("div",{staticClass:"d-flex justify-content-center"},[a("div",{staticClass:"w-100 d-flex justify-content-center"},[a("label",{attrs:{for:"projectProfilePicFile"}},[a("div",{staticClass:"profile-pic d-flex justify-content-center",style:e.imageProp,attrs:{id:"projectProfilePicture"}},[a("span",[a("i",{staticClass:"fas fa-camera"})]),a("span",[e._v("Change Image")])])]),a("b-form-file",{attrs:{name:"projectProfilePicFile",id:"projectProfilePicFile",accept:".jpg,.jpeg,.png",plain:""},on:{input:e.previewProfilePic},model:{value:e.projectProfilePicFile,callback:function(t){e.projectProfilePicFile=t},expression:"projectProfilePicFile"}})],1)]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"title-input-group",label:"Title","label-for":"title-input"}},[a("b-form-input",{attrs:{id:"title-input",type:"text",state:e.validateState("title"),required:""},model:{value:e.$v.form.title.$model,callback:function(t){e.$set(e.$v.form.title,"$model",t)},expression:"$v.form.title.$model"}}),e.$v.form.title.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Title must be atleast 3 characters long. ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"sector-input-group",label:"Sector","label-for":"sector-input"}},[a("b-form-select",{attrs:{id:"sector-input",options:e.options,disabled:"",required:""},model:{value:e.form.sector,callback:function(t){e.$set(e.form,"sector",t)},expression:"form.sector"}})],1)],1)],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"country-input-group",label:"Country","label-for":"country-input"}},[a("b-form-input",{attrs:{id:"country-input",disabled:""},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country",t)},expression:"form.country"}})],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"state-input-group",label:"State","label-for":"state-input"}},[a("b-form-input",{attrs:{id:"state-input",disabled:""},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}})],1)],1)],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"city-input-group",label:"City","label-for":"city-input"}},[a("b-form-input",{attrs:{id:"city-input",disabled:""},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})],1)],1),a("b-col")],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"description-input-group",label:"Description","label-for":"description-input"}},[a("b-form-textarea",{attrs:{id:"description-input",type:"text",state:e.validateState("description"),required:""},model:{value:e.$v.form.description.$model,callback:function(t){e.$set(e.$v.form.description,"$model",t)},expression:"$v.form.description.$model"}}),e.$v.form.description.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Description must be atleast 3 characters long. ")])],1)],1)],1),a("b-form-row",[a("b-col",{attrs:{cols:"6"}},[a("b-form-group",{attrs:{id:"date-input-group",label:"Date","label-for":"date-input"}},[a("b-form-datepicker",{attrs:{id:"date-input",type:"date",disabled:""},model:{value:e.form.created_date,callback:function(t){e.$set(e.form,"created_date",t)},expression:"form.created_date"}})],1)],1)],1),a("b-button",{staticClass:"primaryBg shadow-sm m-1",attrs:{type:"submit"}},[e._v("Submit")])],1)],1)],1)},ge=[],be={name:"editProject",props:["projectData"],data:function(){return{form:this.projectData,options:[{value:null,text:"Please select an option"},{value:"Solar_Site",text:"Solar"},{value:"Construction_Site",text:"Construction"}],projectProfilePicFile:null,profilePicBinary:""}},computed:{imageProp:function(){var e={backgroundImage:""};if(this.form.projectprofileimage)return e.backgroundImage="url("+this.form.projectprofileimage+")",e;var t=this.form.sector;return t&&(e="Construction_Site"===t?{backgroundImage:"url(".concat(a("e071"),")")}:{backgroundImage:"url(".concat(a("ceff"),")")}),e}},validations:{form:{title:{required:L["required"],minLength:Object(L["minLength"])(3)},description:{required:L["required"],minLength:Object(L["minLength"])(3)}}},methods:{validateState:function(e){var t=this.$v.form[e],a=t.$dirty,r=t.$error;return a?!r:null},previewProfilePic:function(e){var t=this,a=new FileReader;a.onload=function(e){var a=document.getElementById("projectProfilePicture");a.style.backgroundImage="url("+e.target.result+")",t.profilePicBinary=e.target.result},a.readAsDataURL(e)},onSubmit:function(){var e=this;if(this.$v.form.$error)this.handleToast("Validation Error","Please Fill in all fields with valid Data","danger");else{var t={id:this.form.id,title:this.form.title,description:this.form.description,projectprofileimage:this.profilePicBinary};this.$store.dispatch("homeStore/editProjectApi",t).then((function(t){"success"===t&&(e.handleToast("Success","Your changes are saved successfully","success"),e.$bvModal.hide("editProjectModal"))})).catch((function(t){console.log(t),e.handleToast("Project Not Edited","There has been an error in editing your project. Try again or contact support","danger")}))}},handleToast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Error!",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Communication Error",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"danger";this.$bvToast.toast(t,{title:e,autoHideDelay:2e3,appendToast:!1,variant:a})}}},ye=be,Ce=(a("43b5"),Object(d["a"])(ye,ve,ge,!1,null,"00b80700",null)),we=Ce.exports,_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("b-table",{ref:"selectableTable",attrs:{"caption-top":!0,items:e.subUsers,fields:e.fields,"select-mode":e.selectMode,responsive:"sm",selectable:""},on:{"row-selected":e.onRowSelected},scopedSlots:e._u([{key:"table-caption",fn:function(){return[e._v("Select the users by clicking on the corresponding row")]},proxy:!0},{key:"cell(selected)",fn:function(t){var r=t.rowSelected;return[r?[a("div",{staticClass:"text-center"},[a("i",{staticClass:"far fa-check-square"})]),a("span",{staticClass:"sr-only"},[e._v("Selected")])]:[a("div",{staticClass:"text-center"},[a("i",{staticClass:"far fa-square"})]),a("span",{staticClass:"sr-only"},[e._v("Not selected")])]]}}])}),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-form-group",{attrs:{id:"input-group-accesstype",label:"Access Type:","label-for":"input-accesstype"}},[a("b-form-select",{attrs:{id:"input-accesstype",options:e.accessOptions,required:""},model:{value:e.form.accesstype,callback:function(t){e.$set(e.form,"accesstype",t)},expression:"form.accesstype"}})],1),a("div",{staticClass:"text-right"},[a("b-button",{staticClass:"primaryBg flex-right",attrs:{type:"submit"}},[e._v("Submit")])],1)],1)],1),a("div",{staticClass:"my-3"},[a("b-card",[a("b-card-title",[a("div",{staticClass:"d-flex align-items-center"},[a("h4",[e._v(" Access List "),a("span",{staticStyle:{"font-size":"16px"}},[a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top.html",value:e.infoText,expression:"infoText",modifiers:{hover:!0,top:!0,html:!0}}],staticClass:"fas fa-info-circle",attrs:{"aria-hidden":"true"}})])])])]),a("div",{staticClass:"d-flex flex-column"},e._l(e.accessList,(function(t,r){return a("div",{key:t.user.id,staticClass:"accessListItem d-flex justify-content-around"},[a("span",[e._v(e._s(r+1)+" . ")]),a("span",{staticClass:"text-capitalize"},[e._v(e._s(t.user.username)+" ")]),a("VueToggles",{attrs:{value:t.is_write,height:"25",width:"80",checkedText:"Write",uncheckedText:"Read",checkedBg:"#28a745",uncheckedBg:"#007bff",fontSize:"20px",fontWeight:"500"},on:{click:function(a){return e.switchChanged({userId:t.user.id,is_write:t.is_write})}}})],1)})),0)],1)],1)])},ke=[],Ae=(a("4160"),a("d81d"),a("a9e3"),a("159b"),a("2909")),De={name:"shareModal",props:{projectId:{type:Number}},data:function(){return{form:{accesstype:null},accessOptions:[{value:null,text:"Please select an option"},{value:"write_only",text:"Write"},{value:"read_only",text:"Read"},{value:"remove",text:"Remove"}],fields:["selected","username","email"],selectMode:"multi",selected:[],selectTrue:!0,infoText:'Users with <strong>"Write"</strong> access can <strong>create, edit and delete</strong> content while those with <strong>"Read"</strong> can <strong>only view</strong> data.'}},computed:{project:function(){var e=this.$store.getters["homeStore/getProjectById"](this.projectId);return e||{}},subUsers:function(){var e=this.$store.getters["userStore/getAllSubUsers"];return e||{}},accessList:function(){var e=[],t=this.project.write_access.map((function(e){return{user:e,is_write:!0}})),a=this.project.read_access.map((function(e){return{user:e,is_write:!1}}));return e.push.apply(e,Object(Ae["a"])(t)),e.push.apply(e,Object(Ae["a"])(a)),e||[]}},methods:{onRowSelected:function(e){this.selected=e},onSubmit:function(){var e=this,t=this.selected.map((function(e){return e.id})),a=[];t.forEach((function(t){a.push({userId:t,accessType:e.form.accesstype})})),this.changeAccess(a)},switchChanged:function(e){var t=[{userId:e.userId,accessType:e.is_write?"read_only":"write_only"}];this.changeAccess(t)},changeAccess:function(e){var t=this,a={accessData:e},r={shareData:a,projectId:this.project.id};this.$store.dispatch("homeStore/provideAccessApi",r).then((function(e){"success"===e?t.$root.$emit("showToast",{message:"Project Shared Successfully",title:"Success",variant:"success"}):t.$root.$emit("showToast",{message:"Error in Sharing your project",title:"Error",variant:"danger"})}))}}},$e=De,Se=(a("944d"),Object(d["a"])($e,_e,ke,!1,null,"195a6341",null)),xe=Se.exports,je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"statusTableContainer"}},[a("b-table",{attrs:{"caption-top":!0,items:e.projectStatus,fields:e.fields,"per-page":e.perPage,"current-page":e.currentPage,responsive:"sm"},scopedSlots:e._u([{key:"head(status)",fn:function(t){return[a("div",{staticClass:"text-center"},[e._v(e._s(t.label))])]}},{key:"cell(date)",fn:function(t){return[a("div",{staticClass:"h-100 d-flex align-items-center"},[e._v(" "+e._s(t.value)+" ")])]}},{key:"cell(status)",fn:function(t){return[a("div",[a("section",{staticClass:"step-indicator d-flex align-items-center mb-3"},[a("div",{staticClass:"step step1",class:{active:t.item.statusNumber>=1}},[a("div",{staticClass:"step-icon"},[a("i",{staticClass:"fas fa-cloud-upload-alt"})]),a("p",[e._v("Uploaded")])]),a("div",{staticClass:"indicator-line",class:{active:t.item.statusNumber>=1}}),a("div",{staticClass:"step step2",class:{active:t.item.statusNumber>=2}},[a("div",{staticClass:"step-icon"},[a("i",{staticClass:"fas fa-drafting-compass"})]),a("p",[e._v("Orthomosaic")])]),a("div",{staticClass:"indicator-line",class:{active:t.item.statusNumber>=2}}),a("div",{staticClass:"step step3",class:{active:t.item.statusNumber>=3}},[a("div",{staticClass:"step-icon"},[a("i",{staticClass:"fas fa-check-circle"})]),a("p",[e._v("Completed")])])])])]}}])}),a("b-pagination",{attrs:{pills:"","total-rows":e.projectStatus.length,"per-page":e.perPage,align:"center"},on:{change:e.paginate},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)])},Le=[],Pe=(a("4ec9"),a("3ca3"),a("ddb0"),{name:"statusModal",props:{statusArray:{type:Array}},data:function(){return{fields:["date","status"],perPage:5,currentPage:1,infoText:'Users with <strong>"Write"</strong> access can <strong>create, edit and delete</strong> content while those with <strong>"Read"</strong> can <strong>only view</strong> data.',dummyStatus:[{date:"21-02-2020",status:"FTP"},{date:"22-02-2020",status:"Orthomosaic"},{date:"21-02-2020",status:"Complete"}],statusMap:new Map([["Incomplete",0],["FTP",1],["Orthomosaic",2],["Complete",3]])}},computed:{projectStatus:function(){var e=this,t=this.dummyStatus.map((function(t){return Object(ae["a"])(Object(ae["a"])({},t),{},{statusNumber:e.statusMap.get(t.status)})}));return t||[]}},methods:{paginate:function(e){this.currentPage=e}}}),Me=Pe,Te=(a("404c"),Object(d["a"])(Me,je,Le,!1,null,"303f19f2",null)),Ie=Te.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v(" Are you sure you want to delete "),a("b",[e._v(e._s(e.toBeDeleted))]),e._v("?")]),a("b-button",{staticClass:"primaryBg float-right m-2",on:{click:e.onCancel}},[e._v("No")]),a("b-button",{staticClass:"primaryBg float-right m-2",on:{click:e.onConfirm}},[e._v("Yes")])],1)},Oe=[],Ue={name:"deleteConfirmModal",props:{toBeDeleted:String,id:Number,deleteAPI:String},data:function(){return{}},methods:{onConfirm:function(){var e=this;this.$store.dispatch(this.deleteAPI,this.id).then((function(t){"error"!==t&&e.$root.$emit(t,e.toBeDeleted)})),this.$bvModal.hide("deleteConfirmModal")},onCancel:function(){this.$bvModal.hide("deleteConfirmModal")}}},Ne=Ue,Ee=Object(d["a"])(Ne,Be,Oe,!1,null,"050caa00",null),Fe=Ee.exports,Re={name:"home",components:{navbar:he,editProject:we,shareModal:xe,statusModal:Ie,deleteConfirmModal:Fe},data:function(){return{filterOptions:[{text:"All Projects",value:"all"},{text:"Solar",value:"solar"},{text:"Construction",value:"construction"}],sortOptions:[{text:"Date - New to Old",value:"created_date_desc"},{text:"Date - Old to New",value:"created_date_asc"}],filter:"all",sort:"created_date_desc",projectToBeEdited:{},projectToBeShared_Id:{},projectStatus:[],statusModalTitle:"",toBeDeleted:"",toBeDeletedId:"",deleteAOIApi:"homeStore/deleteProjectApi"}},computed:{hasProjectFetched:function(){var e=this.$store.state.homeStore.projectDataFetched;return e},projectsArray:function(){return this.$store.state.homeStore.projectsArray},solarArray:function(){var e=this.projectsArray.filter((function(e){return"Solar_Site"===e.sector}));return e||[]},constructionArray:function(){var e=this.projectsArray.filter((function(e){return"Construction_Site"===e.sector}));return e||[]},filteredArray:function(){switch(this.filter){case"solar":return this.solarArray;case"construction":return this.constructionArray;default:return this.projectsArray}},sortedArray:function(){var e=[],t=this.filteredArray;switch(this.sort){case"created_date_asc":e=t.sort((function(e,t){return new Date(e.created_date)-new Date(t.created_date)}));break;case"created_date_desc":e=t.sort((function(e,t){return new Date(t.created_date)-new Date(e.created_date)}));break}return e}},methods:{changeFilter:function(e){this.filter=e||"all"},routeToMap:function(e){e&&this.$router.push("/projects/map/".concat(e.id))},routeToFileUpload:function(e){e&&this.$router.push("/file-upload/".concat(e.id))},imageProp:function(e){var t;if(e.projectprofileimage)return t=e.projectprofileimage,t;var r=e.sector;return r&&(t="".concat(a("Construction_Site"===r?"e071":"ceff"))),t},showEditProject:function(e){var t=Object(ae["a"])({},e);this.projectToBeEdited=t,this.$bvModal.show("editProjectModal")},showShareModal:function(e){this.projectToBeShared_Id=e.id,this.$bvModal.show("shareModal")},showStatusModal:function(e){this.projectStatus=e.status,this.statusModalTitle="Current Status of ".concat(e.title),this.$bvModal.show("statusModal")},showDeleteModal:function(e){this.toBeDeleted=e.title,this.toBeDeletedId=e.id,this.$bvModal.show("deleteConfirmModal")},deleteProject:function(e){var t=this;this.$store.dispatch("homeStore/deleteProjectApi",e.id).then((function(e){"success"===e?t.handleToast({message:"Project Deleted Successfully",variant:"success",title:"Deletion Successful"}):t.handleToast({message:"There has been some error in deleting your project. Try again later or contact support",variant:"danger",title:"Error"})})).catch((function(e){console.log(e),t.handleToast({message:"There has been some error in deleting your project. Try again later or contact support",variant:"danger",title:"Error"})}))},handleToast:function(e){this.$root.$emit("showToast",e)}},mounted:function(){var e=this;this.$root.$on("projectDeleted",(function(t){e.$root.$emit("showToast",{message:"".concat(t," deleted successfully"),title:"Deleted",variant:"success"})}))}},qe=Re,ze=(a("aa36"),Object(d["a"])(qe,ee,te,!1,null,"73816eeb",null)),Ve=ze.exports,He={name:"homePage",components:{home:Ve},computed:{isUserDetailsAvailable:function(){var e=this.$store.state.userStore.loggedInUser.userprofile;return!!e}},mounted:function(){var e=this;this.isUserDetailsAvailable||this.$store.dispatch("userStore/fetchUserDetailsApi"),this.$store.dispatch("homeStore/fetProjectsArrayApi").catch((function(t){console.log(t),e.$root.$emit("showToast",{title:"Retrival Error",message:"There has been a problem in fetching your project Data. Please try again or contact support",variant:"danger"})}))}},Ke=He,Ye=Object(d["a"])(Ke,J,X,!1,null,null,null),Ge=Ye.exports,We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userProfilePage"},[a("navbar"),a("userProfile",{attrs:{userDetails:e.userDetails}})],1)},Ze=[],Qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userProfileContainer"},[a("b-container",[a("b-row",[a("b-col",{staticClass:"mx-auto my-3",attrs:{cols:"lg-6 md-6 sm-8"}},[a("b-card",{staticClass:"userProfileCard shadow mx-4 my-2"},[a("div",{staticClass:"d-flex justify-content-center"},[a("div",[a("label",{attrs:{for:"userProfilePicFile"}},[a("div",{staticClass:"profile-pic d-flex justify-content-center",style:e.imageProp,attrs:{id:"userProfilePicture"}},[a("span",[a("i",{staticClass:"fas fa-camera"})]),a("span",[e._v("Change Image")])])]),a("b-form-file",{attrs:{name:"userProfilePicFile",id:"userProfilePicFile",accept:".jpg,.jpeg,.png",plain:""},on:{input:e.previewProfilePic},model:{value:e.profilePicFile,callback:function(t){e.profilePicFile=t},expression:"profilePicFile"}})],1)]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.updateProfile(t)}}},[a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"username-input-group",label:"Username","label-for":"username-input"}},[a("b-form-input",{attrs:{id:"username-input",type:"text",state:e.validateState("username"),required:""},model:{value:e.$v.form.username.$model,callback:function(t){e.$set(e.$v.form.username,"$model",t)},expression:"$v.form.username.$model"}}),e.$v.form.username.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Username must be atleast 3 characters long. ")]),e.$v.form.username.alphaNum?e._e():a("b-form-invalid-feedback",[e._v(" Username must be alphanumeric without spaces or special characters ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"subscription-input-group",label:"Subscription","label-for":"subscription-input"}},[a("b-form-select",{attrs:{id:"subscription-input",options:e.options,state:e.validateState("subscription"),required:""},model:{value:e.$v.form.subscription.$model,callback:function(t){e.$set(e.$v.form.subscription,"$model",t)},expression:"$v.form.subscription.$model"}}),e.$v.form.subscription.required?e._e():a("b-form-invalid-feedback",[e._v(" Please Select a subscription type ")])],1)],1)],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"firtname-input-group",label:"First Name","label-for":"firstname-input"}},[a("b-form-input",{attrs:{id:"firstname-input",type:"text",state:e.validateState("firstname"),required:""},model:{value:e.$v.form.firstname.$model,callback:function(t){e.$set(e.$v.form.firstname,"$model",t)},expression:"$v.form.firstname.$model"}}),e.$v.form.firstname.minLength?e._e():a("b-form-invalid-feedback",[e._v(" First Name must be atleast 3 characters long. ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"last-input-group",label:"Last Name","label-for":"firstname-input"}},[a("b-form-input",{attrs:{id:"last-input",type:"text",state:e.validateState("lastname"),required:""},model:{value:e.$v.form.lastname.$model,callback:function(t){e.$set(e.$v.form.lastname,"$model",t)},expression:"$v.form.lastname.$model"}}),e.$v.form.lastname.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Last Name must be atleast 3 characters long. ")])],1)],1)],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"company-input-group",label:"Company","label-for":"company-input"}},[a("b-form-input",{attrs:{id:"company-input",type:"text",state:e.validateState("company"),required:""},model:{value:e.$v.form.company.$model,callback:function(t){e.$set(e.$v.form.company,"$model",t)},expression:"$v.form.company.$model"}}),e.$v.form.company.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Company Name must be atleast 3 characters long. ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"location-input-group",label:"Location","label-for":"location-input"}},[a("b-form-input",{attrs:{id:"location-input",state:e.validateState("location"),type:"text",required:""},model:{value:e.$v.form.location.$model,callback:function(t){e.$set(e.$v.form.location,"$model",t)},expression:"$v.form.location.$model"}}),e.$v.form.location.alphaSpaces?e._e():a("b-form-invalid-feedback",[e._v(" Location can contain only alphanumerals and '-' ")]),e.$v.form.location.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Location must be atleast 3 characters long. ")])],1)],1)],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"phone-input-group",label:"Phone Number","label-for":"phone-input"}},[a("b-form-input",{attrs:{id:"phone-input",state:e.validateState("phone"),type:"number",required:""},model:{value:e.$v.form.phone.$model,callback:function(t){e.$set(e.$v.form.phone,"$model",t)},expression:"$v.form.phone.$model"}}),e.$v.form.phone.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Must be atleast 10 numbers ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"email-input-group",label:"Email Address","label-for":"email-input"}},[a("b-form-input",{attrs:{id:"email-input",type:"email",state:e.validateState("email"),required:""},model:{value:e.$v.form.email.$model,callback:function(t){e.$set(e.$v.form.email,"$model",t)},expression:"$v.form.email.$model"}}),a("b-form-invalid-feedback",[e._v(" Enter a valid Email Id. Eg: don@example.com ")])],1)],1)],1),a("div",{staticClass:"text-center"},[a("b-button",{staticClass:"primaryBg border-0 m-1",attrs:{type:"submit"}},[e._v("Submit")])],1)],1),a("div",{staticClass:"text-center"},[a("h1",{staticClass:"text-center"},[e._v("Change Password")])]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.changePassword(t)}}},[a("b-form-row",[a("b-col",{attrs:{cols:"6"}},[a("b-form-group",{attrs:{id:"oldPassword-input-group",label:"Current Password","label-for":"oldPassword-input"}},[a("b-form-input",{attrs:{id:"oldPassword-input",type:"password",required:""},model:{value:e.passwordForm.oldPassword,callback:function(t){e.$set(e.passwordForm,"oldPassword",t)},expression:"passwordForm.oldPassword"}})],1)],1)],1),a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{id:"newPassword-input-group",label:"New Password","label-for":"newPassword-input"}},[a("b-form-input",{attrs:{id:"newPassword-input",state:e.validatePasswordForm("newPassword"),type:"password",required:""},model:{value:e.$v.passwordForm.newPassword.$model,callback:function(t){e.$set(e.$v.passwordForm.newPassword,"$model",t)},expression:"$v.passwordForm.newPassword.$model"}}),e.$v.passwordForm.newPassword.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Password must be atleast 6 characters long. ")])],1)],1),a("b-col",[a("b-form-group",{attrs:{id:"confirmPassword-input-group",label:"Confirm Password","label-for":"confirmPassword-input"}},[a("b-form-input",{attrs:{id:"confirmPassword-input",state:e.validatePasswordForm("confirmPassword"),type:"password",required:""},model:{value:e.$v.passwordForm.confirmPassword.$model,callback:function(t){e.$set(e.$v.passwordForm.confirmPassword,"$model",t)},expression:"$v.passwordForm.confirmPassword.$model"}}),e.$v.passwordForm.confirmPassword.sameAsPassword?e._e():a("b-form-invalid-feedback",[e._v(" Passwords do not match ")])],1)],1)],1),a("b-button",{staticClass:"primaryBg shadow-sm m-1",attrs:{type:"submit"}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)},Je=[],Xe=L["helpers"].regex("alphaSpaces",/^[\w\-\s]+$/),et={name:"userProfile",props:{userDetails:{type:Object,default:function(){return{username:"",subscription:null,email:"",firstname:"",lastname:"",company:"",phone:"",location:""}}}},data:function(){return{form:this.userDetails,passwordForm:{oldPassword:"",newPassword:"",confirmPassword:""},options:[{value:null,text:"Please select an option"},{value:"Freemium",text:"Freemium"},{value:"Premium",text:"Premium"},{value:"Enterprise",text:"Enterprise"}],profilePicFile:null,profilePicBinary:""}},computed:{imageProp:function(){var e={backgroundImage:"url(".concat(a("aaf2"),")")};return this.form.profile_picture&&(e.backgroundImage="url("+this.form.profile_picture+")"),e}},validations:{form:{username:{required:L["required"],minLength:Object(L["minLength"])(3),alphaNum:L["alphaNum"]},subscription:{required:L["required"]},email:{required:L["required"],email:L["email"]},firstname:{required:L["required"],minLength:Object(L["minLength"])(3)},lastname:{required:L["required"],minLength:Object(L["minLength"])(3)},company:{required:L["required"],minLength:Object(L["minLength"])(3)},phone:{required:L["required"],numeric:L["numeric"],minLength:Object(L["minLength"])(10)},location:{required:L["required"],alphaSpaces:Xe,minLength:Object(L["minLength"])(3)}},passwordForm:{newPassword:{required:L["required"],minLength:Object(L["minLength"])(6)},confirmPassword:{required:L["required"],sameAsPassword:Object(L["sameAs"])("newPassword")}}},methods:{validateState:function(e){var t=this.$v.form[e],a=t.$dirty,r=t.$error;return a?!r:null},validatePasswordForm:function(e){var t=this.$v.passwordForm[e],a=t.$dirty,r=t.$error;return a?!r:null},previewProfilePic:function(e){var t=this,a=new FileReader;a.onload=function(e){var a=document.getElementById("userProfilePicture");a.style.backgroundImage="url("+e.target.result+")",t.profilePicBinary=e.target.result},a.readAsDataURL(e)},updateProfile:function(){var e=this;if(this.$v.form.$invalid)this.$root.$emit("showToast",{message:"Please fill in all fields with valid data",title:"Validation Error!",variant:"danger"});else{var t={username:this.form.username,subscription:this.form.subscription,first_name:this.form.firstname,last_name:this.form.lastname,email:this.form.email,mobile_number:this.form.phone,company:this.form.company,profile_picture:this.profilePicBinary};this.$store.dispatch("userStore/editUserProfileApi",t).then((function(t){"success"===t&&e.$root.$emit("showToast",{message:"User Profile Updated Successfully",title:"Profile Updated!",variant:"success"})})).catch((function(t){console.log(t),e.$root.$emit("showToast",{message:"Error while updating profile. Try again later or contact support",title:"Error!",variant:"danger"})}))}},changePassword:function(){var e=this;if(this.$v.passwordForm.$invalid)this.$root.$emit("showToast",{message:"Please fill in all fields with valid data",title:"Validation Error!",variant:"danger"});else{var t={oldpassword:this.passwordForm.oldPassword,password:this.passwordForm.newPassword,password2:this.passwordForm.confirmPassword};this.$store.dispatch("userStore/changePasswordApi",t).then((function(t){"success"===t&&e.$root.$emit("showToast",{message:"Password Changed Successfully",title:"Success!",variant:"success"})})).catch((function(t){console.log(t),e.$root.$emit("showToast",{message:"Error while updating password. Make sure to enter your current password correctly",title:"Error!",variant:"danger"})}))}}}},tt=et,at=(a("2248"),Object(d["a"])(tt,Qe,Je,!1,null,"156c3202",null)),rt=at.exports,it=a("4b58"),st=function(e){var t=e.getters.ability;t.update(e.state.rules);var a=new Map;return e.subscribe((function(e){var r=[];switch(e.type){case"projectStore/setAccessType":var i,s=e.payload;if("admin"===s||"write"===s?r=[{action:"create",subject:"aoi"},{action:"delete",subject:"aoi"},{action:"create",subject:"measure"},{action:"delete",subject:"measure"},{action:"create",subject:"cad"},{action:"delete",subject:"cad"}]:"read"===s&&(r=[{action:"read",subject:"aoi"},{action:"read",subject:"measure"},{action:"read",subject:"cad"}]),a.set("projectAuth",r),a.has("userAuth"))(i=r).push.apply(i,Object(Ae["a"])(a.get("userAuth")));t.update(r);break;case"userStore/setLoggedInUser":var o=e.payload.userprofile;if(o.subscription){switch(o.subscription){case"Enterprise":r.push({action:"use",subject:"Enterprise"}),"Admin"===o.user_type&&(r.push({action:"manage",subject:"subusers"}),r.push({action:"upload",subject:"files"}),r.push({action:"create",subject:"activity"}),r.push({action:"delete",subject:"activity"}));break;case"Premium":r.push({action:"use",subject:"Premium"});break;default:r.push({action:"use",subject:"Freemium"});break}a.set("userAuth",r),t.update(r)}break;case"resetRoot":a.clear(),t.update([])}}))},ot=(a("99af"),a("7db0"),a("bc3a")),nt=a.n(ot),lt="TOKEN",ct="",dt={getToken:function(){return localStorage.getItem(lt)},saveToken:function(e){localStorage.setItem(lt,e)},removeToken:function(){localStorage.removeItem(lt)},getRefreshToken:function(){return localStorage.getItem(ct)},saveRefreshToken:function(e){localStorage.setItem(ct,e)},removeRefreshToken:function(){localStorage.removeItem(ct)}},ut={baseURL:"http://takvaviya.in:8001/Asset/"},pt=nt.a.create(ut),ft=function(e){return e.headers["Authorization"]="Token ".concat(dt.getToken()),e},mt=function(e){return e};pt.interceptors.request.use(ft),pt.interceptors.request.use(mt),pt.interceptors.response.use((function(e){return e}),(function(e){var t=new r["default"];return console.log(e.message),t.$bvToast.toast("".concat(e.message),{title:"Communication Error",autoHideDelay:2e3,appendToast:!1,variant:"danger"}),Promise.reject(e)}));var ht=function(){return{projectsArray:[],projectDataFetched:!1,countriesList:{},hasCountriesFetched:!1,statesList:{},hasStatesFetched:!1,citiesList:{},hasCitiesFetched:!1}},vt=ht(),gt={getProjectById:function(e){return function(t){var a=e.projectsArray.find((function(e){return e.id===t}));return a||{}}},getCountriesList:function(e){if(e.countriesList){var t=e.countriesList,a=Ct(t);return a.unshift({value:null,text:"Please select an option"}),a}},getStatesList:function(e){if(e.statesList){var t=e.statesList,a=Ct(t);return a.unshift({value:null,text:"Please select an option"}),a}},getCitiesList:function(e){if(e.citiesList){var t=e.citiesList,a=Ct(t);return a.unshift({value:null,text:"Please select an option"}),a}}},bt={fetProjectsArrayApi:function(e){var t=e.commit,a=e.dispatch;return a("toggleSpinner",null,{root:!0}),new Promise((function(e,r){pt.get("project/home/").then((function(r){var i=[];i=r.data.project,i&&(t("setProjectsArray",i),a("toggleSpinner",null,{root:!0}),e("success"))})).catch((function(e){a("toggleSpinner",null,{root:!0}),console.log(e),r(e)}))}))},getCountriesListApi:function(e){var t=e.commit;fetch("http://geodata.solutions/api/api.php?type=getCountries&addClasses=%2Ccountries%2Corder-alpha").then((function(e){return e.json()})).then((function(e){if("success"===e.status){var a=e.result;a&&t("setCountriesList",a)}}))},getStatesListApi:function(e,t){var a=e.commit;fetch("http://geodata.solutions/api/api.php?type=getStates&countryId=".concat(t,"&addClasses=states%2Corder-alpha")).then((function(e){return e.json()})).then((function(e){if("success"===e.status){var t=e.result;t&&a("setstatesList",t)}}))},getCitiesListApi:function(e,t){var a=e.commit;fetch("http://geodata.solutions/api/api.php?type=getCities&countryId=".concat(t.countryId,"&stateId=%22").concat(t.stateId,"%22&addClasses=cities%2Corder-alpha")).then((function(e){return e.json()})).then((function(e){if("success"===e.status){var t=e.result;t&&a("setCitiesList",t)}}))},createProjectApi:function(e,t){var a=e.dispatch;return new Promise((function(e,r){t&&pt.post("project/new/",t).then((function(t){"success"===t.data.response&&(a("fetProjectsArrayApi"),e("success"))})).catch((function(e){r(e)}))}))},editProjectApi:function(e,t){var a=e.dispatch;return new Promise((function(e,r){t&&pt.put("project/update/".concat(t.id,"/"),t).then((function(t){"success"===t.data.response&&(a("fetProjectsArrayApi"),e("success"))})).catch((function(e){r(e)}))}))},deleteProjectApi:function(e,t){var a=e.dispatch;return new Promise((function(e,r){t&&pt.delete("project/delete/".concat(t,"/")).then((function(t){"success"===t.data.response&&(a("fetProjectsArrayApi"),e("projectDeleted"))})).catch((function(e){r(e)}))}))},provideAccessApi:function(e,t){var a=e.dispatch;return new Promise((function(e,r){t&&pt.post("project/access/".concat(t.projectId,"/"),t.shareData).then((function(t){var i=t.data,s=i.filter((function(e){return"success"===e.response}));s.length===i.length?(a("fetProjectsArrayApi"),e("success")):r("error")})).catch((function(e){r(e)}))}))},resetModule:function(e){var t=e.commit;t("resetModule")}},yt={setProjectsArray:function(e,t){e.projectsArray=t,e.projectDataFetched=!0},setCountriesList:function(e,t){e.countriesList=t,e.hasCountriesFetched=!0},setstatesList:function(e,t){e.statesList=t,e.hasStatesFetched=!0},setCitiesList:function(e,t){e.citiesList=t,e.hasCitiesFetched=!0},resetModule:function(e){Object.assign(e,ht())}};function Ct(e){var t=[];for(var a in e)t.push({value:{id:a,name:e[a]},text:e[a]});return t}var wt={namespaced:!0,state:vt,getters:gt,actions:bt,mutations:yt},_t=function(){return{loggedInUser:{},currentUserName:"User",isEnterpriseAdmin:!1,subscription:"",subUsers:[]}},kt=_t(),At={getAllSubUsers:function(e){if(e.subUsers.length>0){var t=e.subUsers,a=t.map((function(e){return{username:e.username,email:e.email,id:e.id,date_created:e.date_joined,name:{first_name:e.first_name,last_name:e.last_name},phone:e.userprofile.mobile_number,profile_picture:e.userprofile.profile_picture}}));return a}return[]},getLoggedInUserDetails:function(e){if(e.loggedInUser.userprofile){var t=e.loggedInUser,a={email:t.email,firstname:t.first_name,lastname:t.last_name,username:t.username,company:t.userprofile.company,phone:t.userprofile.mobile_number,subscription:t.userprofile.subscription,location:t.userprofile.location,profile_picture:t.userprofile.profile_picture};return a||{}}},getLoggedInUserType:function(e){var t="subuser";return e.loggedInUser&&(t=e.loggedInUser.userprofile.user_type),t}},Dt={login:function(e,t){var a=e.dispatch;return new Promise((function(e,r){fetch("http://takvaviya.in:8001/Asset/account/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){t.token?(dt.saveToken(t.token),a("fetchUserDetailsApi").then((function(t){"success"===t&&e("success")})).catch((function(e){console.log(e),r("error")}))):r("error")})).catch((function(e){console.log(e),r(e)}))}))},register:function(e,t){var a=e.state;return console.log(a),new Promise((function(e,a){fetch("http://takvaviya.in:8001/Asset/account/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){"Successfully registered a new User"===t.response?e("success"):a("error")})).catch((function(e){console.log(e),a(e)}))}))},logout:function(e){var t=e.commit,a=e.dispatch;a("projectStore/resetModule",null,{root:!0}),a("homeStore/resetModule",null,{root:!0}),a("resetRoot",null,{root:!0}),t("resetModule"),dt.removeToken()},resetPassword:function(e,t){var a=e.state;console.log(a,t)},fetchUserDetailsApi:function(e){var t=e.commit,a=e.dispatch;return new Promise((function(e,r){pt.get("user/getuser/").then((function(r){var i=r.data;i&&("Enterprise"===i.userprofile.subscription&&"Admin"===i.userprofile.user_type&&(a("getAllSubUsersApi"),t("setEnterpriseAdmin",!0)),t("setLoggedInUser",i),e("success"))})).catch((function(e){console.log(e),r(e)}))}))},editUserProfileApi:function(e,t){var a=e.dispatch;return new Promise((function(e,r){t&&pt.put("user/profileupdate/",t).then((function(t){"success"===t.data.response&&(a("fetchUserDetailsApi"),e("success"))})).catch((function(e){r(e)}))}))},changePasswordApi:function(e,t){var a=e.dispatch;return new Promise((function(e,r){t&&pt.post("account/password_change/",t).then((function(t){"success"===t.data.response&&(a("fetchUserDetailsApi"),e("success"))})).catch((function(e){r(e)}))}))},searchUserApi:function(e,t){var a=e.commit;return new Promise((function(e,r){pt.get("user/".concat(t,"/")).then((function(t){var r=t.data;r&&(a("setUserSearchList",r),e("success"))})).catch((function(e){console.log(e),r(e)}))}))},getAllSubUsersApi:function(e){var t=e.commit,a=e.dispatch;return a("toggleSpinner",null,{root:!0}),new Promise((function(e,r){pt.get("user/getsubuser/").then((function(r){var i=[];i=r.data,i&&(a("toggleSpinner",null,{root:!0}),t("setSubUsers",i),e("success"))})).catch((function(e){a("toggleSpinner",null,{root:!0}),console.log(e),r(e)}))}))},createSubUserApi:function(e){var t=e.dispatch;return new Promise((function(e,a){pt.post("project/createprofile/").then((function(a){"success"===a.data.response&&(t("getAllSubUsersApi"),e(a))})).catch((function(e){a(e)}))}))},editSubUserApi:function(e,t){var a=e.dispatch;return new Promise((function(e,r){t&&pt.put("project/update/".concat(t.id,"/"),t).then((function(t){"success"===t.data.response&&(a("getAllSubUsersApi"),e("success"))})).catch((function(e){r(e)}))}))},deleteSubUserApi:function(e,t){var a=e.dispatch;return new Promise((function(e,r){t&&pt.delete("user/deletesubuser/".concat(t,"/")).then((function(t){"success"===t.data.response&&(a("getAllSubUsersApi"),e("subUserDeleted"))})).catch((function(e){r(e)}))}))},resetModule:function(e){var t=e.commit;t("resetModule")}},$t={setSubUsers:function(e,t){e.subUsers=t},setLoggedInUser:function(e,t){e.loggedInUser=t},setEnterpriseAdmin:function(e,t){e.isEnterpriseAdmin=t},resetModule:function(e){Object.assign(e,_t())}},St={namespaced:!0,state:kt,getters:At,actions:Dt,mutations:$t},xt=(a("ac1f"),a("5319"),a("1276"),function(){return{mapOptions:{center:[],zoom:18},currentDate:"",currentKML:null,allCadArray:[],allAOIs:[],allMeasures:[]}}),jt={getCenter:function(){return xt.center},getAllAOIs:function(e){return e.allAOIs.length>0?e.allAOIs:[]},getAllMeasures:function(e){return e.allMeasures.length>0?e.allMeasures:[]},getCurrentCad:function(e){return e.currentCad.length>0?e.currentCad:[]},getAllCadAlign:function(e){return e.allCadArray.length>0?e.allCadArray:[]}},Lt={initMap:function(e,t){var a=e.commit;t&&a("setMapProps",t)},switchDate:function(e,t){var a=e.commit,r=e.dispatch;t&&(a("setCurrentDate",t),r("getAllAOIApi",t),r("getAllMeasureApi",t),r("getAllCadApi"))},getAllAOIApi:function(e,t){var a=e.commit,r=e.rootState;t&&pt.get("aoi/getallAOI/".concat(r.projectStore.projectId,"/").concat(t,"/")).then((function(e){e.data&&a("setAllAOI",e.data)})).catch((function(e){console.log(e)}))},saveAoiApi:function(e,t){var a=e.state,r=e.dispatch,i=e.rootState;return new Promise((function(e,s){t&&pt.post("aoi/save_aoi/".concat(i.projectStore.projectId,"/").concat(a.currentDate,"/"),t).then((function(t){"success"===t.data.response&&(r("getAllAOIApi",a.currentDate),e("success"))})).catch((function(e){console.log(e),s("error")}))}))},downloadAoiApi:function(e,t){var a=e.dispatch;return new Promise((function(e,r){pt.post("aoi/downloadaoi/".concat(t,"/")).then((function(t){if("success"===t.data.response){var r=t.data.Downloadlocation,i=r.split("/").slice(-1)[0];i=i.replace(/\s/g,""),a("projectStore/downloadFile",{url:r,filename:i},{root:!0}),e("success")}})).catch((function(e){console.log(e),r("error")}))}))},deleteAOIApi:function(e,t){var a=e.state,r=e.dispatch;return new Promise((function(e,i){t&&pt.delete("aoi/delete_aoi/".concat(t,"/")).then((function(t){"success"===t.data.response&&(r("getAllAOIApi",a.currentDate),e("aoiDeleted"))})).catch((function(e){console.log(e),i("error")}))}))},getAllMeasureApi:function(e,t){var a=e.commit,r=e.rootState;t&&pt.get("aoi/getallMeasure/".concat(r.projectStore.projectId,"/").concat(t,"/")).then((function(e){e.data&&a("setAllMeasure",e.data)})).catch((function(e){console.log(e)}))},saveMeasureApi:function(e,t){var a=e.state,r=e.dispatch,i=e.rootState;return new Promise((function(e,s){t&&pt.post("aoi/save_measure/".concat(i.projectStore.projectId,"/").concat(a.currentDate,"/"),t).then((function(t){"success"===t.data.response&&(r("getAllMeasureApi",a.currentDate),e("success"))})).catch((function(e){console.log(e),s("error")}))}))},downloadMeasureApi:function(e,t){var a=e.dispatch;return new Promise((function(e,r){pt.post("aoi/downloadmeasure/".concat(t,"/")).then((function(t){if("success"===t.data.response){var r=t.data.Location,i=r.split("/").slice(-1)[0];i=i.replace(/\s/g,""),a("projectStore/downloadFile",{url:r,filename:i},{root:!0}),e("success")}})).catch((function(e){console.log(e),r("error")}))}))},deleteMeasureApi:function(e,t){var a=e.state,r=e.dispatch;return new Promise((function(e,i){t&&pt.delete("aoi/delete_measure/".concat(t,"/")).then((function(t){"success"===t.data.response&&(r("getAllMeasureApi",a.currentDate),e("measureDeleted"))})).catch((function(e){console.log(e),i("error")}))}))},getAllCadApi:function(e){var t=e.state,a=e.commit,r=e.rootState;pt.get("designcheck/getallCAD/".concat(r.projectStore.projectId,"/").concat(t.currentDate,"/")).then((function(e){e.data&&a("setAllCadAlign",e.data)})).catch((function(e){console.log(e)}))},cadAlignUploadApi:function(e,t){var a=e.state,r=e.dispatch,i=e.rootState;return new Promise((function(e,s){t?(r("toggleSpinner",null,{root:!0}),pt.post("http://takvaviya.in:8001/Asset/designcheck/upload/".concat(i.projectStore.projectId,"/").concat(a.currentDate,"/").concat(t.label,"/"),t.cadFile,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){if(r("toggleSpinner",null,{root:!0}),"success"===t.data.status){var a=t.data.props;a&&(r("getAllCadApi"),e(a))}})).catch((function(e){r("toggleSpinner",null,{root:!0}),s(e),console.log(e)}))):s("error")}))},cadAlignAdjustApi:function(e,t){var a=e.state,r=e.dispatch,i=e.rootState;return new Promise((function(e,s){t?(r("toggleSpinner",null,{root:!0}),pt.post("designcheck/adjust/".concat(i.projectStore.projectId,"/").concat(a.currentDate,"/"),t).then((function(t){if("success"===t.data.status){r("toggleSpinner",null,{root:!0});var a=t.data.props;e(a),r("getAllCadApi")}})).catch((function(e){r("toggleSpinner",null,{root:!0}),s(e),console.log(e)}))):s("error")}))},revertRealignApi:function(e,t){var a=e.state,r=e.dispatch;return new Promise((function(e,i){t&&(r("toggleSpinner",null,{root:!0}),pt.post("designcheck/revert/".concat(t,"/")).then((function(t){r("toggleSpinner",null,{root:!0}),"success"===t.data.status&&(r("getAllCadApi",a.currentDate),e("success"))})).catch((function(e){r("toggleSpinner",null,{root:!0}),console.log(e),i("error")})))}))},deleteCadAlignApi:function(e,t){var a=e.state,r=e.dispatch;return new Promise((function(e,i){t&&pt.delete("designcheck/delete_cad/".concat(t,"/")).then((function(t){"success"===t.data.status&&(r("getAllCadApi",a.currentDate),e("cadDeleted"))})).catch((function(e){console.log(e),i("error")}))}))},downloadCompileApi:function(e,t){var a=e.state,r=e.dispatch,i=e.rootState;return new Promise((function(e,s){pt.post("projectdata/".concat(t,"/").concat(i.projectStore.projectId,"/").concat(a.currentDate,"/")).then((function(t){if("success"===t.data.response){var a=t.data.Downloadlocation,i=a.split("/").slice(-1)[0];i=i.replace(/\s/g,""),r("projectStore/downloadFile",{url:a,filename:i},{root:!0}),e("success")}})).catch((function(e){console.log(e),s("error")}))}))}},Pt={setMapProps:function(e,t){e.mapOptions.center=[t.lat,t.lng]},setCurrentDate:function(e,t){e.currentDate=t},changeOptions:function(e,t){e.mapOptions.center=t.center,e.mapOptions.zoom=t.zoom},setCurrentKml:function(e,t){e.currentKML=t},setAllCadAlign:function(e,t){e.allCadArray=t},setAllAOI:function(e,t){e.allAOIs=t},setAllMeasure:function(e,t){e.allMeasures=t}},Mt={namespaced:!0,state:xt,getters:jt,actions:Lt,mutations:Pt},Tt=(a("b64b"),a("07ac"),a("2b3d"),function(){return{projectData:{},currentDateProject:{},projectProperties:{ortho:{}},datesArray:[],projectName:"",projectId:null,projectType:"",projectDataFetched:!1,accessType:null,activityData:[],compareDataLeft:{Project_properties:{ortho:{}},Date:""},compareDataRight:{Project_properties:{ortho:{}},Date:""}}}),It=Tt(),Bt={getSummaryData:function(e){if(e.projectDataFetched){var t=e.currentDateProject.summary;return t||{}}},getInverterData:function(e){if(e.projectDataFetched){var t=e.currentDateProject.inverter;return t?{inverters:Object.keys(t),invertersData:Object.values(t)}:{inverters:[],invertersData:[]}}},getCompareData:function(e){return function(t){if(t){var a=e.projectData.get(t),r=a.Project_properties;return r||{}}}},getCompareDataMap:function(e){return function(t){if("left"===t){var a=e.compareDataLeft.Project_properties.ortho;if(a)return a}else{if("right"!==t)return{RBG:"",DSM:""};var r=e.compareDataRight.Project_properties.ortho;if(r)return r}}},getCompareDataTable:function(e){var t=e.compareDataLeft.summary,a=e.compareDataRight.summary,r=[44,55,57,56,61,49,89,23,15,65,57,65,36,95,12,67,34,78],i=[76,85,101,98,87,43,24,67,26,47,24,98,23,56,26,84,36,68],s=Object.keys(a);if(a=i,t=r,t&&a){for(var o=[],n=0;n<s.length;n++)o.push({Asset:s[n],"Left Data":t[n],"Right Data":a[n]});return o}return[]},getActivityData:function(e){return e.activityData.length>0?e.activityData:[]},getProjectInfo:function(e){if(e.projectDataFetched){var t={projectName:e.projectName,projectType:e.projectType};return t}}},Ot={fetchProjectByIdApi:function(e,t){var a=e.state,r=e.commit,i=e.dispatch,s=e.rootState;return new Promise((function(e,o){pt.get("project/".concat(t.projectId,"/")).then((function(o){if(o.data.project){var n=o.data.project,l=o.data.access;n&&(r("setProjectData",n),r("setAccessType",l),i("airmapStore/initMap",n.projectdata[0].project_properties.center,{root:!0}),"map"===t.page?i("switchProjectbyDate",a.datesArray[0]):"compare"===t.page&&(i("setCompareData",{date:a.datesArray[0],side:"left"}),i("setCompareData",{date:a.datesArray[0],side:"right"})),s.userStore.isEnterpriseAdmin&&i("getAllActivityApi"),e("success"))}})).catch((function(e){o(e)}))}))},switchProjectbyDate:function(e,t){var a=e.commit,r=e.state,i=e.dispatch;r.projectData&&r.projectData.has(t)&&(a("setCurrentDateProject",r.projectData.get(t)),i("airmapStore/switchDate",t,{root:!0}))},setCompareData:function(e,t){var a=e.state,r=e.commit;if(t.date){var i=a.projectData.get(t.date);i&&("left"===t.side?r("setCompareLeftData",i):r("setCompareRightData",i))}},downloadFile:function(e,t){e.context;var a=t.url,r=t.filename;a&&fetch(a).then((function(e){return e.blob()})).then((function(e){var t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=r,document.body.appendChild(a),a.click(),a.remove()})).catch((function(e){return console.log(e)}))},getAllActivityApi:function(e){var t=e.commit,a=e.rootState;pt.get("activity/get/".concat(a.projectStore.projectId,"/")).then((function(e){e.data&&t("setAllActivity",e.data)})).catch((function(e){console.log(e)}))},createNewActivity:function(e,t){e.state;var a=e.dispatch,r=e.rootState;return new Promise((function(e,i){t&&pt.post("activity/add/".concat(r.projectStore.projectId,"/"),t).then((function(t){"success"===t.data.response&&(a("getAllActivityApi"),e("success"))})).catch((function(e){console.log(e),i("error")}))}))},deleteActivity:function(e,t){e.state;var a=e.dispatch;return new Promise((function(e,r){t&&pt.delete("activity/delete/".concat(t,"/")).then((function(t){"success"===t.data.response&&(a("getAllActivityApi"),e("activityDeleted"))})).catch((function(e){console.log(e),r("error")}))}))},resetModule:function(e){var t=e.commit;t("resetModule")}},Ut={setProjectData:function(e,t){var a=new Map;t.projectdata.forEach((function(e){a.set(e.date,e)})),e.projectData=a,e.datesArray=t.date.sort(),e.projectName=t.title,e.projectId=t.id,e.projectType=t.sector,e.projectDataFetched=!0},setAccessType:function(e,t){e.accessType=t},setCurrentDateProject:function(e,t){e.currentDateProject=t,e.projectProperties=t.project_properties},setCompareLeftData:function(e,t){e.compareDataLeft=t},setCompareRightData:function(e,t){e.compareDataRight=t},setAllActivity:function(e,t){e.activityData=t},resetModule:function(e){Object.assign(e,Tt())}},Nt={namespaced:!0,state:It,getters:Bt,actions:Ot,mutations:Ut},Et=function(){return{chatSocket:null,chatMessages:[]}},Ft={getAllMessages:function(e){return e.chatMessages.length>0?e.chatMessages:[]}},Rt={initChat:function(e,t){var a=e.commit,r=e.state,i=e.dispatch,s=new WebSocket("".concat(t.wsRoot,"/chat/").concat(t.roomName));s&&(a("setChatSocket",s),r.chatSocket.onmessage=function(e){var t=JSON.parse(e.data);t&&i("addNewMessage",t)})},getOldMessagesApi:function(e,t){var a=e.commit;t&&fetch("https://morning-coast-23117.herokuapp.com/api/message/?limit=50&label=".concat(t)).then((function(e){return e.json()})).then((function(e){e&&a("setOldMessages",e)})).catch((function(e){console.log(e)}))},sendNewMessage:function(e,t){var a=e.state;t&&a.chatSocket.send(JSON.stringify(t))},addNewMessage:function(e,t){var a=e.commit;t&&a("setNewMessage",t)},disconnectSocket:function(e){var t=e.state,a=e.commit;t.chatSocket&&(t.chatSocket.close(),a("setSocketNull"),a("setMessagesEmpty"))}},qt={setChatSocket:function(e,t){e.chatSocket=t},setOldMessages:function(e,t){e.chatMessages=t},setNewMessage:function(e,t){e.chatMessages.push(t)},setSocketNull:function(e){e.chatSocket=null},setMessagesEmpty:function(e){e.chatMessages=[]}},zt={namespaced:!0,state:Et,getters:Ft,actions:Rt,mutations:qt};r["default"].use(ne["a"]);var Vt=function(){return{isSpinnerShowing:!1,rules:[]}},Ht=new ne["a"].Store({plugins:[st],state:Vt(),getters:{ability:function(){return new it["a"]}},actions:{toggleSpinner:function(e){var t=e.commit;t("setIsSpinnerShowing")},resetRoot:function(e){var t=e.commit;t("resetRoot")}},mutations:{setIsSpinnerShowing:function(e){e.isSpinnerShowing=!e.isSpinnerShowing},resetRoot:function(e){Object.assign(e,Vt())}},modules:{homeStore:wt,userStore:St,airmapStore:Mt,projectStore:Nt,chatStore:zt}}),Kt={name:"userProfilePage",components:{navbar:he,userProfile:rt},computed:{userDetails:function(){var e=this.$store.getters["userStore/getLoggedInUserDetails"];return e||{}}},beforeRouteEnter:function(e,t,a){var r=this;Ht.dispatch("userStore/fetchUserDetailsApi").then((function(e){"success"===e?a():r.$router.push("/home")})).catch((function(e){console.log(e),r.$router.push("/home")}))},beforeRouteUpdate:function(e,t,a){var r=this;Ht.dispatch("userStore/fetchUserDetailsApi").then((function(e){"success"===e?a():r.$router.push("/home")})).catch((function(e){console.log(e),r.$router.push("/home")}))}},Yt=Kt,Gt=(a("8562"),Object(d["a"])(Yt,We,Ze,!1,null,"72ed70eb",null)),Wt=Gt.exports,Zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manageUsersPage"},[a("navbar"),a("manageUsers",{attrs:{subUsers:e.subUsers}})],1)},Qt=[],Jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"my-2 mx-auto w-75 d-flex flex-column justify-content-center"},[a("div",{staticClass:"m-1 d-flex justify-content-center align-items-center"},[a("div",{staticClass:"w-50"},[a("div",{staticClass:"w-50"},[a("b-form-group",[a("b-input-group",{attrs:{size:"sm"}},[a("b-form-input",{attrs:{id:"filter-subusers",type:"search",placeholder:"Search Sub-user"},model:{value:e.filterSubUser,callback:function(t){e.filterSubUser=t},expression:"filterSubUser"}}),a("b-input-group-append",[a("b-button",{attrs:{disabled:!e.filterSubUser},on:{click:function(t){e.filterSubUser=""}}},[e._v("Clear")])],1)],1)],1)],1)]),a("div",[a("i",{staticClass:"fa fa-users fa-2x"}),a("b-badge",{attrs:{id:"activeCount",pill:"",variant:"success"}},[e._v(e._s(e.subUsers.length))])],1),a("b-button",{attrs:{pill:"",variant:"secondary",disabled:!e.canCreateUser},on:{click:e.addSubUser}},[e._v(" + Add User ")])],1),a("div",{staticClass:"d-flex justify-content-center"},[a("b-table",{attrs:{borderless:"",hover:"","head-variant":"light",fields:e.fields,items:e.subUsers,responsive:"sm",filter:e.filterSubUser,"filter-included-fields":e.filterOn},scopedSlots:e._u([{key:"cell(username)",fn:function(t){return[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("div",{staticClass:"profile_picture mr-2"},[a("img",{attrs:{src:t.item.profile_picture}})]),e._v(" "+e._s(t.value)+" ")])]}},{key:"cell(name)",fn:function(t){return[a("b",[e._v(e._s(e._f("capitalize")(t.value.first_name))+e._s(" "))]),a("b",[e._v(e._s(e._f("capitalize")(t.value.last_name)))])]}},{key:"cell(date_created)",fn:function(t){return[e._v(" "+e._s(e._f("dateFormat")(t.value,"DD/MM/YYYY"))+" ")]}},{key:"cell(actions)",fn:function(t){return[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"mx-1",on:{click:function(a){return e.editSubUser(t.item)}}},[a("i",{staticClass:"fas fa-edit"})]),a("div",{staticClass:"mx-1",on:{click:function(a){return e.deleteSubUser(t.item)}}},[a("i",{staticClass:"fas fa-trash"})])])]}}])})],1)]),a("div",{staticClass:"w-75 mx-auto"},[a("b-alert",{attrs:{variant:"success",dismissible:""},model:{value:e.isShareAlertShown,callback:function(t){e.isShareAlertShown=t},expression:"isShareAlertShown"}},[a("h4",{staticClass:"alert-heading"},[e._v("Subuser Created!")]),a("p",[e._v(" A new subuser has been created. You can choose to download the login credentials or share them via email. ")]),a("hr"),a("div",{staticClass:"text-right"},[a("b-link",{staticClass:"text-primaryBg mr-2",attrs:{href:"#"},on:{click:function(t){return e.downloadCSV()}}},[a("b",[a("i",{staticClass:"fas fa-download"}),e._v(" Download CSV")])]),e._v(" | "),a("b-link",{staticClass:"text-primaryBg ml-2",attrs:{href:e.mailToLink},on:{click:function(e){this.newUserShared=!0}}},[a("b",[a("i",{staticClass:"fas fa-share"}),e._v(" Share Via Email")])])],1)])],1),a("b-modal",{attrs:{id:"deleteConfirmModal",centered:"",title:"Deletion Confirmation","hide-footer":!0}},[a("deleteConfirmModal",{attrs:{toBeDeleted:e.toBeDeleted,id:e.toBeDeletedId,deleteAPI:e.deleteAOIApi}})],1)],1)},Xt=[],ea={name:"manageUsers",components:{deleteConfirmModal:Fe},props:{subUsers:Array},data:function(){return{fields:["username",{key:"name",label:"Full Name"},"email","date_created","phone","actions"],filterSubUser:"",filterOn:["username","name","phone"],toBeDeleted:"",toBeDeletedId:"",deleteAOIApi:"userStore/deleteSubUserApi",isShareAlertShown:!1,newUserShared:!0,downloadUrl:"",mailToLink:""}},computed:{canCreateUser:function(){return this.subUsers.length<5&&this.newUserShared}},methods:{addSubUser:function(){var e=this;this.$store.dispatch("userStore/createSubUserApi").then((function(t){"success"===t.data.response&&(e.downloadUrl=t.data.downloadlink,e.newUserShared=!1,e.isShareAlertShown=!0,e.constructMailLink(),e.$root.$emit("showToast",{message:"New Sub User Created Successfully",title:"User Created!",variant:"success"}))})).catch((function(t){console.log(t),e.$root.$emit("showToast",{message:"Error in user creation. Try again later or contact support",title:"User Not Created!",variant:"danger"})}))},editSubUser:function(e){console.log(e)},deleteSubUser:function(e){this.toBeDeleted=e.username,this.toBeDeletedId=e.id,this.$bvModal.show("deleteConfirmModal")},downloadCSV:function(){if(this.downloadUrl){var e=this.downloadUrl,t="Airmap_Credentials.csv";this.$store.dispatch("projectStore/downloadFile",{url:e,filename:t})}this.newUserShared=!0},constructMailLink:function(){this.mailToLink="mailto:?subject=Airmap%20Login%20Credentials&body=Hi%2C%0AYou%20have%20been%20added%20as%20an%20user%20to%20the%20project%20______.%20Please%20use%20the%20login%20credentials%20found%20below.%20Kindly%20change%20the%20default%20password%20and%20other%20profile%20settings%20as%20per%20your%20needs.%0AUsername%3A%22%22%2C%0APassword%3A%22%22%2C%0A%0ACheers%20from%20Airmap%20Team."}},mounted:function(){var e=this;this.$root.$on("subUserDeleted",(function(t){e.$root.$emit("showToast",{message:"".concat(t," Deleted Successfully"),title:"User Deleted!",variant:"success"})})),5===this.subUsers.length&&(this.canCreateUser=!1)}},ta=ea,aa=(a("d951"),Object(d["a"])(ta,Jt,Xt,!1,null,"c93b015a",null)),ra=aa.exports,ia={name:"manageUsersPage",components:{navbar:he,manageUsers:ra},computed:{subUsers:function(){var e=this.$store.getters["userStore/getAllSubUsers"];return e||{}}},beforeRouteEnter:function(e,t,a){var r=Ht.state.userStore.loggedInUser.userprofile;r||Ht.dispatch("userStore/fetchUserDetailsApi"),Ht.dispatch("userStore/getAllSubUsersApi").then((function(e){"success"===e?a():rs.push("/home")})).catch((function(e){console.log(e),rs.push("/home")}))}},sa=ia,oa=(a("40c0"),Object(d["a"])(sa,Zt,Qt,!1,null,"4644ded2",null)),na=oa.exports,la=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fileUploadPage"},[a("navbar"),a("fileUpload")],1)},ca=[],da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-4 w-100 h-100 d-flex flex-column align-items-center"},[a("div",{staticClass:"w-75 my-2 p-3 shadow"},[a("b-tabs",{attrs:{pills:"","content-class":"mt-3"}},[a("b-tab",{attrs:{title:"Folder Upload",active:""}},[a("div",{staticClass:"d-flex text-center"},[a("div",{staticClass:"w-50 p-3 m-3 shadow"},[a("b-form-group",{attrs:{id:"multiFiles-input-group",label:"Upload Images","label-for":"multiFiles-input","label-class":"text-center font-weight-bold",description:"Accepted formats: .jpeg,.png"}},[a("b-form-file",{staticClass:"dz-hidden-input",attrs:{id:"multiFiles-input",directory:"",multiple:"",accept:".jpeg, .png,",plain:""},on:{input:e.filesSelected},model:{value:e.form.multiFiles,callback:function(t){e.$set(e.form,"multiFiles",t)},expression:"form.multiFiles"}})],1)],1),a("div",{staticClass:"w-50 p-3 m-3 shadow"},[a("b-form-group",{attrs:{id:"orthomosaic-input-group",label:"Upload Orthomosaic","label-for":"orthomosaic-input","label-class":"text-center font-weight-bold",description:"Accepted format: .tif"}},[a("b-form-file",{attrs:{id:"orthomosaic-input",state:Boolean(e.form.orthomosaic),accept:".tif",plain:"",required:"",disabled:e.isFlowUploading},on:{input:e.orthoSelected},model:{value:e.form.orthomosaic,callback:function(t){e.$set(e.form,"orthomosaic",t)},expression:"form.orthomosaic"}})],1)],1)]),a("b-table",{attrs:{borderless:"",hover:"","head-variant":"light",fields:e.fields,items:e.filesArray,"empty-text":"Select a file or folder",responsive:"sm","show-empty":""},scopedSlots:e._u([{key:"cell(index)",fn:function(t){return[e._v(" "+e._s(t.index+1)+" ")]}},{key:"cell(size)",fn:function(t){return[e._v(" "+e._s(e._f("fileSizer")(t.value))+" ")]}},{key:"cell(progress)",fn:function(e){return[a("div",{attrs:{id:e.item.uniqueIdentifier}})]}},{key:"cell(completed)",fn:function(e){return[a("div",{staticClass:"text-center",attrs:{id:e.item.uniqueIdentifier+"isComplete"}},[a("b-spinner",{attrs:{variant:"primary",label:"Uploading"}})],1)]}}])})],1),a("b-tab",{attrs:{title:"Additional File Upload",disabled:e.isFlowUploading}},[a("div",{staticClass:"d-flex justify-content-center"},[a("div",{staticClass:"p-3 mx-3 shadow"},[a("b-form-group",{attrs:{id:"addCad-input-group",label:"Upload CAD","label-for":"addCad-input","label-class":"text-center font-weight-bold",description:"Accepted formats: .dwg,.dxl"}},[a("b-form-file",{attrs:{id:"addCad-input",accept:".dwg,.dxl"},on:{input:e.AdditionalFileSelected},model:{value:e.additional.cad,callback:function(t){e.$set(e.additional,"cad",t)},expression:"additional.cad"}})],1),a("div",{staticClass:"text-center"},[a("b-button",{staticClass:"primaryBg"},[e._v("Submit")])],1)],1),a("div",{staticClass:"p-3 mx-3 shadow"},[a("b-form-group",{attrs:{id:"addPc-input-group",label:"Upload Point Cloud","label-for":"addPc-input",description:"Accepted formats: .las,.xyz","label-class":"text-center font-weight-bold"}},[a("b-form-file",{attrs:{id:"addPc-input",accept:".las,.xyz"},on:{input:e.AdditionalFileSelected},model:{value:e.additional.pc,callback:function(t){e.$set(e.additional,"pc",t)},expression:"additional.pc"}})],1),a("div",{staticClass:"text-center"},[a("b-button",{staticClass:"primaryBg"},[e._v("Submit")])],1)],1),a("div",{staticClass:"p-3 mx-3 shadow"},[a("b-form-group",{attrs:{id:"addGpc-input-group",label:"Upload GPC","label-for":"addGpc-input","label-class":"text-center font-weight-bold",description:"Accepted formats: .xls,.csv"}},[a("b-form-file",{attrs:{id:"addGpc-input",accept:".xls,.csv"},on:{input:e.AdditionalFileSelected},model:{value:e.additional.gpc,callback:function(t){e.$set(e.additional,"gpc",t)},expression:"additional.gpc"}})],1),a("div",{staticClass:"text-center"},[a("b-button",{staticClass:"primaryBg"},[e._v("Submit")])],1)],1)])])],1),this.isFlowUploading?a("div",{staticClass:"text-center"},[this.isPaused?a("div",[a("b-button",{staticClass:"primaryBg",on:{click:function(t){return e.resumeUpload()}}},[e._v("Resume")])],1):a("div",[a("b-button",{staticClass:"primaryBg",on:{click:function(t){return e.pauseUpload()}}},[e._v("Pause")])],1)]):e._e()],1)])},ua=[],pa=a("ebc7"),fa=a.n(pa),ma=a("5a0c"),ha=a.n(ma),va={name:"fileUpload",data:function(){return{flow:null,isFlowUploading:!1,isPaused:!1,form:{multiFiles:[],orthomosaic:null},additional:{cad:null,pc:null,gpc:null},fields:["index","name",{key:"name",label:"File Name"},"size","relativePath","progress","completed"],date:ha()(new Date).format("YYYY-MM-DD")}},computed:{filesArray:function(){var e=this.flow?this.flow.files:[];return e},projectId:function(){var e=this.$route.params.projectId;return e}},methods:{initiateFlow:function(){var e=this;this.flow.upload(),window.addEventListener("offline",(function(t){e.$root.$emit("showToast",{title:"Upload paused!",message:"You lost connection. Upload will resume when network connection is established",variant:"danger"}),console.log(t,"You lost connection."),e.flow.pause()})),window.addEventListener("online",(function(t){console.log(t,"You are now back online."),e.$root.$emit("showToast",{title:"Upload resumed!",message:"File uploading has been resumed",variant:"success"}),e.flow.resume()}))},filesSelected:function(){var e=this.form.multiFiles,t=[];e.forEach((function(e){t.push({path:e.webkitRelativePath,file:e.name,size:e.size})})),this.checkAlreadyUploaded(t)},checkAlreadyUploaded:function(e){var t=this;pt.post("upload/check/".concat(this.projectId,"/").concat(this.date,"/"),e).then((function(e){if(e.data){var a=e.data,r=a.filter((function(e){return!1===e.status})).map((function(e){return e.file})),i=t.form.multiFiles,s={};if(r.length>0)if(r.length===i.length)t.$root.$emit("showToast",{title:"Files already uploaded!",message:"All the selected files are already uploaded to the server",variant:"info"});else{var o=0;i.forEach((function(e){r.includes(e.webkitRelativePath)||(t.flow.addFile(e),s[e.webkitRelativePath]=e.name,o++)})),t.callStoreApi(s,o),t.flow.upload()}else 0===r.length&&(i.forEach((function(e){t.flow.addFile(e),s[e.webkitRelativePath]=e.name})),t.callStoreApi(s,i.length),t.flow.upload())}}))},callStoreApi:function(e,t){var a={proj:"".concat(this.projectId),total:t,allfiles:e};pt.post("upload/store/".concat(this.projectId,"/").concat(this.date,"/"),a),this.isFlowUploading=!0,this.$root.$emit("showToast",{title:"Upload Initiated!",message:"All the selected files are being uploaded to the server",variant:"success"})},orthoSelected:function(e){this.flow.addFile(e),console.log(e)},AdditionalFileSelected:function(e){var t=new FormData;t.append("File",e),pt.post("http://takvaviya.in:8001/Asset/upload/singlefileupload/".concat(this.projectId,"/").concat(this.date,"/"),t).then((function(e){console.log(e)}))},resumeUpload:function(){this.flow.resume(),this.isPaused=!1,this.$root.$emit("showToast",{title:"Upload Resumed!",message:"File uploading has resumed",variant:"success"})},pauseUpload:function(){this.flow.pause(),this.isPaused=!0,this.$root.$emit("showToast",{title:"Upload Paused!",message:"Click resume to resume file upload",variant:"info"})},sendEmail:function(e){pt.post("http://takvaviya.in:8001/Asset/upload/email/".concat(this.projectId,"/"),e)}},mounted:function(){var e=this;this.flow=new fa.a({target:"http://takvaviya.in:8001/Asset/upload/flow/".concat(this.projectId,"/").concat(this.date,"/"),testChunks:!1,permanentErrors:[404,500,501],maxChunkRetries:3,chunkRetryInterval:5e3,simultaneousUploads:1,chunkSize:2e7,headers:{Authorization:"Token ".concat(dt.getToken())}}),this.flow.on("uploadStart",(function(){e.sendEmail({status:"Initiated"})})),this.flow.on("fileProgress",(function(e){var t=document.getElementById(e.uniqueIdentifier);t.innerHTML="".concat(100*e.progress()," %")})),this.flow.on("fileSuccess",(function(e,t){var a=document.getElementById("".concat(e.uniqueIdentifier,"isComplete"));a.innerHTML=' <i class="fa fa-check text-success" aria-hidden="true"></i>'})),this.flow.on("complete",(function(){e.isFlowUploading=!1,e.sendEmail({status:"Success"}),e.$root.$emit("showToast",{title:"Files uploaded!",message:"All the selected files are uploaded successfully to the server",variant:"success"})}))}},ga=va,ba=(a("c0b1"),Object(d["a"])(ga,da,ua,!1,null,"c87b2eb8",null)),ya=ba.exports,Ca={name:"fileUploadPage",components:{navbar:he,fileUpload:ya},beforeRouteEnter:function(e,t,a){Ht.dispatch("userStore/fetchUserDetailsApi").then((function(e){if("success"===e){var t=Ht.getters["userStore/getLoggedInUserType"];"Admin"===t?a():rs.push("/home")}else rs.push("/home")})).catch((function(e){console.log(e),rs.push("/home")}))},beforeRouteUpdate:function(e,t,a){Ht.dispatch("userStore/fetchUserDetailsApi").then((function(e){if("success"===e){var t=Ht.getters["userStore/getLoggedInUserType"];"Admin"===t?a():rs.push("/home")}else rs.push("/home")})).catch((function(e){console.log(e),rs.push("/home")}))}},wa=Ca,_a=(a("3e7e"),Object(d["a"])(wa,la,ca,!1,null,"75a41f54",null)),ka=_a.exports,Aa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._e(),a("div",[a("timeline"),a("sidenav"),a("airmap"),e.$can("use","Enterprise")?a("chatRoom"):e._e()],1)])},Da=[],$a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"topNavContainer"},[r("div",{staticClass:"topNav"},[r("div",{staticClass:"logoAndTitle"},[r("div",{staticClass:"logo ml-1"},[r("div",{attrs:{role:"button"},on:{click:e.routeToHome}},[r("img",{staticClass:"bg-dark rounded",staticStyle:{width:"85px","margin-top":"-3%","margin-left":"1.5%",height:"60px"},attrs:{src:a("260b")}})]),e._m(0)]),r("div",{staticClass:"projectDetailsContainer bg-dark text-light rounded ml-3"},[r("b",[e._v(e._s(e.title))]),"Construction_Site"===e.type?r("div",{staticClass:"ml-2"},[r("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],staticClass:"fas fa-city",attrs:{title:e.type}})]):r("div",{staticClass:"ml-2"},[r("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],staticClass:"fas fa-solar-panel",attrs:{title:e.type}})])])]),r("div",{staticClass:"userSection mr-1 shadow"},[r("b-dropdown",{staticClass:"mx-2",attrs:{dropright:"",variant:"dark"},scopedSlots:e._u([{key:"button-content",fn:function(){return[r("i",{staticClass:"fa fa-user-circle text-light"}),r("span",{staticClass:"text-light text-capitalize"},[e._v(" "+e._s(e.username)+" ")])]},proxy:!0}])},[r("b-dropdown-item",{on:{click:e.routeToUserProfile}},[e._v("Profile")]),e.$can("manage","subusers")?r("b-dropdown-item",{on:{click:e.routeToManageUsers}},[e._v("Manage Users")]):e._e(),r("b-dropdown-divider"),r("b-dropdown-item",{on:{click:e.logout}},[e._v("Sign Out")])],1)],1)])])},Sa=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"projectDetailsToggler ml-1"},[a("i",{staticClass:"fa fa-caret-right text-dark "})])}],xa={name:"mapHeader",computed:{title:function(){return this.$store.state.projectStore.projectName},type:function(){return this.$store.state.projectStore.projectType},username:function(){var e=localStorage.getItem("username");return e||"user"}},data:function(){return{}},methods:{routeToHome:function(){this.$router.push("/home")},routeToUserProfile:function(){this.$router.push("/user-profile")},routeToManageUsers:function(){this.$router.push("/manage-users")},logout:function(){this.$store.dispatch("userStore/logout"),this.$router.push("/login")}}},ja=xa,La=(a("f832"),Object(d["a"])(ja,$a,Sa,!1,null,"01eb65fa",null)),Pa=La.exports,Ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"centerContainer"},[a("div",{staticClass:"timelineContainer"},[a("div",{staticClass:"timeLineToggler"},[e.isPaginatorShowing?a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],staticClass:"shadow",attrs:{id:"timeLineCloser",pill:"",variant:"outline-danger",title:"Hide timeline"},on:{click:e.toggleTimeline}},[a("i",{staticClass:"icon fa fa-times",attrs:{"aria-hidden":"true"}})]):a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],staticClass:"shadow primaryBg border-0",attrs:{pill:"",variant:"secondary",title:"Show timeline"},on:{click:e.toggleTimeline}},[a("i",{staticClass:"icon fa fa-calendar-alt",attrs:{"aria-hidden":"true"}})])],1),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPaginatorShowing,expression:"isPaginatorShowing"}],staticClass:"timelinePaginator"},[a("b-pagination",{staticClass:"mt-4",attrs:{"total-rows":e.rows,"per-page":e.perPage,"page-class":"date-link","first-number":"","last-number":"",align:"fill"},on:{change:e.switchDate},scopedSlots:e._u([{key:"prev-text",fn:function(){return[a("span",[a("i",{staticClass:"fas fa-angle-left"})])]},proxy:!0},{key:"next-text",fn:function(){return[a("span",[a("i",{staticClass:"fas fa-angle-right"})])]},proxy:!0},{key:"page",fn:function(t){var r=t.page,i=t.active;return[a("div",{staticClass:"h-100 d-flex flex-column justify-content-around"},[a("div",{staticClass:"d-flex align-items-center justify-content-center"},[a("div",{staticClass:"w-100 diamondContainer"},[a("i",{staticClass:"diamond fas fa-square",class:{active:!0===i}})])]),a(i?"b":"i",[e._v(e._s(e.datesArray[r-1]))])])]}}]),model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)]),a("div",{staticClass:"timelineDropdown"},[a("b-dropdown",{attrs:{text:"Dates",dropleft:"",variant:"dark"}},e._l(e.datesArray,(function(t,r){return a("b-dropdown-item",{key:r,class:{selectedDate:t===e.currentDate},attrs:{href:"#"},on:{click:function(a){return e.switchDateFromDropDown(t)}}},[a("span",{class:{selectedDate:t===e.currentDate}},[e._v(e._s(t))])])})),1)],1)],1)])},Ta=[],Ia=(a("c975"),{name:"timeline",data:function(){return{perPage:1,currentPage:1,isPaginatorShowing:!0}},computed:{datesArray:function(){return this.$store.state.projectStore.datesArray},rows:function(){return this.datesArray.length?this.datesArray.length:0},currentDate:function(){var e=this.$store.state.airmapStore.currentDate;return e||""}},methods:{switchDate:function(e){var t=this.datesArray[e-1];this.$store.dispatch("projectStore/switchProjectbyDate",t)},switchDateFromDropDown:function(e){if(e){this.$store.dispatch("projectStore/switchProjectbyDate",e);var t=this.datesArray.indexOf(e);this.currentPage=t+1}},toggleTimeline:function(){this.isPaginatorShowing=!this.isPaginatorShowing}},mounted:function(){var e=this;setTimeout((function(){e.isPaginatorShowing=!1}),5e3)}}),Ba=Ia,Oa=(a("dd95"),Object(d["a"])(Ba,Ma,Ta,!1,null,"7590138b",null)),Ua=Oa.exports,Na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100vh",width:"100%"}},[a("l-map",{ref:"map",staticStyle:{height:"100%",width:"100%"},attrs:{zoom:e.zoom,center:e.center,options:{maxZoom:23,zoomControl:!1}},on:{"draw:created":e.aoiCreated,measurefinish:e.measureCreated,ready:e.mapLayersInit}},[a("l-tile-layer",{ref:"baselayer",attrs:{options:{maxZoom:23},url:e.url}}),a("l-tile-layer",{ref:"baselayer",attrs:{options:{maxZoom:23},url:e.rgbUrl}}),e.isDsm?a("l-tile-layer",{ref:"baselayer",attrs:{options:{maxZoom:23},url:e.dsmUrl}}):e._e(),e.dsmUrl?a("l-control",{attrs:{position:"bottomright"}},[a("div",{staticClass:"transparentBg d-flex justify-content-center align-items-center rounded",attrs:{id:"dsmSwitch"}},[a("b-form-checkbox",{attrs:{role:"button",name:"check-button",switch:""},model:{value:e.isDsm,callback:function(t){e.isDsm=t},expression:"isDsm"}}),a("b",[e._v("DSM")])],1)]):e._e(),e._e(),e.isDraw?a("l-draw-toolbar",{attrs:{position:"topright"}}):e._e()],1),a("b-modal",{attrs:{id:"polygon-modal",title:"Range Definition","hide-footer":!0}},[a("drawModal",{attrs:{polyDimensionProp:e.drawnPolygonDimension}})],1),a("b-modal",{attrs:{id:"measureModal",title:"Measurement Details","hide-footer":!0}},[a("measureModal",{attrs:{measureDetails:e.measureDetails}})],1),a("b-modal",{attrs:{id:"cadUploadModal",title:"Upload CAD File","hide-footer":!0}},[a("cadUploadModal")],1),a("b-modal",{attrs:{id:"cadAlignModal",title:"CAD Alignment","hide-footer":!0},on:{hidden:e.closeCadDetails}},[a("cadAlignModal",{attrs:{cadAlignProp:e.cadAlignData}})],1)],1)},Ea=[],Fa=a("e11e"),Ra=a.n(Fa),qa=(a("84ae"),a("6a4b"),a("2699")),za=a("a40a"),Va=a("c8b6"),Ha=a("2253"),Ka=a("0924"),Ya=a.n(Ka),Ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[a("b-form-group",{attrs:{id:"input-group-label",label:"Label:","label-for":"input-label"}},[a("b-form-input",{attrs:{id:"input-label",type:"text",required:""},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1),a("b-form-group",{attrs:{id:"input-group-desc",label:"Description:","label-for":"input-desc"}},[a("b-form-input",{attrs:{id:"input-description",required:""},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("b-button",{staticClass:"float-right border-0 m-2",attrs:{type:"reset",variant:"danger"}},[e._v("Reset")]),a("b-button",{staticClass:"float-right primaryBg border-0 m-2",attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1)},Wa=[],Za={name:"drawModal",data:function(){return{form:{label:"",description:"",polygon:JSON.stringify(this.polyDimensionProp)}}},props:{polyDimensionProp:Array},methods:{onSubmit:function(e){var t=this;e.preventDefault(),this.$store.dispatch("airmapStore/saveAoiApi",this.form).then((function(e){"success"===e&&t.$root.$emit("aoiCreated",t.form.label)})),this.$bvModal.hide("polygon-modal")},onReset:function(e){e.preventDefault(),this.form.label="",this.form.description=""}}},Qa=Za,Ja=Object(d["a"])(Qa,Ga,Wa,!1,null,null,null),Xa=Ja.exports,er=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[a("b-form-group",{attrs:{id:"input-group-label",label:"Label:","label-for":"input-label"}},[a("b-form-input",{attrs:{id:"input-label",type:"text",required:""},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1),a("b-form-group",{attrs:{id:"input-group-desc",label:"Description:","label-for":"input-desc"}},[a("b-form-input",{attrs:{id:"input-description",required:""},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),a("b-card",{staticClass:"mt-3",attrs:{header:"Area"}},[a("pre",{staticClass:"m-0"},[e._v(e._s(e.measureDetails.areaDisplay))])]),a("b-card",{staticClass:"mt-3",attrs:{header:"Length"}},[a("pre",{staticClass:"m-0"},[e._v(e._s(e.measureDetails.lengthDisplay))])]),a("b-button",{staticClass:"float-right border-0 mt-2 mx-2",attrs:{type:"reset",variant:"danger"}},[e._v("Reset")]),a("b-button",{staticClass:"float-right primaryBg border-0 mt-2",attrs:{type:"submit"}},[e._v("Submit")])],1)],1)},tr=[],ar={name:"measureModal",data:function(){return{form:{label:"",description:""},show:!0}},props:{measureDetails:Object},methods:{onSubmit:function(e){var t=this;e.preventDefault();var a="point";this.measureDetails.points.length>1&&(a=2===this.measureDetails.points.length?"line":"poly");var r={label:this.form.label,description:this.form.description,type:a,area:this.measureDetails.area,length:this.measureDetails.length,polygon:JSON.stringify(this.measureDetails.points)};this.$store.dispatch("airmapStore/saveMeasureApi",r).then((function(e){"success"===e&&t.$root.$emit("measureCreated",t.form.label)})),this.$bvModal.hide("measureModal")},onReset:function(e){e.preventDefault(),this.form.label="",this.form.description=""}}},rr=ar,ir=Object(d["a"])(rr,er,tr,!1,null,null,null),sr=ir.exports,or=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.cadUploaded(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},[a("b-form-group",{attrs:{id:"input-group-label",label:"Label","label-for":"input-label"}},[a("b-form-input",{attrs:{id:"input-label",type:"text",required:""},model:{value:e.form.label,callback:function(t){e.$set(e.form,"label",t)},expression:"form.label"}})],1),a("b-form-group",{attrs:{id:"input-group-cadfile",label:"CAD File","label-for":"input-cadfile"}},[a("b-form-file",{attrs:{id:"input-cadfile",state:Boolean(e.form.cadFile),accept:".kml",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here...",required:""},model:{value:e.form.cadFile,callback:function(t){e.$set(e.form,"cadFile",t)},expression:"form.cadFile"}})],1),a("b-button",{staticClass:"float-right mt-3",attrs:{type:"submit",variant:"success"}},[e._v("Upload")])],1)],1)},nr=[],lr={name:"cadUploadModal",data:function(){return{form:{label:"",cadFile:null}}},methods:{cadUploaded:function(){var e=this,t=new FormData;t.append("FILES",this.form.cadFile);var a={label:this.form.label,cadFile:t};this.$store.dispatch("airmapStore/cadAlignUploadApi",a).then((function(t){if(t.cad){var a={uploaded_cad_kml:t.cad,label:e.form.label,realign_cad_kml:[],id:t.id,uploaded_by:t.uploaded_by,creation_date:e.$options.filters.dateFormat(new Date,"YYYY-MM-DD")};e.$root.$emit("cadUploaded",a)}})),this.$bvModal.hide("cadUploadModal")},onReset:function(){this.form.label=""}}},cr=lr,dr=Object(d["a"])(cr,or,nr,!1,null,null,null),ur=dr.exports,pr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-card",{staticClass:"mt-3",attrs:{header:"The Selected Points are"}},[a("b-table-simple",{attrs:{fixed:""}},[a("colgroup",[a("col",{staticStyle:{width:"100px"}})]),a("b-thead",{attrs:{"head-variant":"dark"}},[a("b-th",[e._v("Pair")]),a("b-th",[e._v("Latitude")]),a("b-th",[e._v("Longitude")])],1),a("b-tbody",e._l(e.cadAlign.alignPoints,(function(t,r){return a("b-tr",{key:r},[r%2===0?a("b-td",{attrs:{rowspan:"2"}},[e._v("Pair "+e._s(r/2+1))]):e._e(),a("b-td",[e._v(e._s(t.lat.toFixed(4)))]),a("b-td",[e._v(e._s(t.lng.toFixed(4)))])],1)})),1)],1),a("b-button",{staticClass:"primaryBg border-0 float-right",attrs:{type:"submit"}},[e._v("Submit")])],1)],1)],1)},fr=[],mr={name:"cadAlignModal",data:function(){return{cadAlign:this.cadAlignProp}},props:{cadAlignProp:Object},methods:{onSubmit:function(){for(var e=this,t=[],a=[],r=this.cadAlign.alignPoints,i=0;i<r.length;i++){var s=[r[i].lng,r[i].lat];i%2==0?t.push(s):a.push(s)}var o={id:this.cadAlign.id,pointA:t,pointB:a};this.$store.dispatch("airmapStore/cadAlignAdjustApi",o).then((function(t){if(t.cad.length>0){var a={id:t.id,realign_cad_kml:t.cad,uploaded_by:t.uploaded_by,creation_date:t.uploaded_date,realigned_by:t.realigned_by,realign_date:t.realign_date};e.$root.$emit("cadAligned",a)}})),this.$bvModal.hide("cadAlignModal")}}},hr=mr,vr=Object(d["a"])(hr,pr,fr,!1,null,null,null),gr=vr.exports,br={name:"airmap",components:{LMap:qa["a"],LTileLayer:za["a"],LControlZoom:Va["a"],LControl:Ha["a"],LDrawToolbar:Ya.a,drawModal:Xa,measureModal:sr,cadUploadModal:ur,cadAlignModal:gr},data:function(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",bounds:null,map:null,isDraw:!1,isDsm:!1,aoiLayer:null,aoiLayerLabelMap:new Map,createdAoi:null,drawnPolygonDimension:[],drawControl:null,polygonEnabler:null,kmlLayer:null,measureDetails:null,measureControl:null,createdMeasure:null,measureLayer:null,measureLayerLabelMap:new Map,isRealigned:!1,cadLayer:null,cadLayerLabelMap:new Map,cadFileLastModified:"",cadAlignData:{id:"",label:"",alignPoints:[]}}},computed:Object(ae["a"])(Object(ae["a"])({},Object(ne["c"])({center:function(e){return e.airmapStore.mapOptions.center},zoom:function(e){return e.airmapStore.mapOptions.zoom},currentKML:function(e){return e.airmapStore.currentKML},currentCad:function(e){return e.airmapStore.currentCad},dsm:function(e){return e.projectStore.projectProperties.ortho.DSM},rgb:function(e){return e.projectStore.projectProperties.ortho.RGB}})),{},{dsmUrl:function(){return this.dsm?"".concat(this.dsm,"{z}/{x}/{y}.png"):""},rgbUrl:function(){return this.rgb?"".concat(this.rgb,"{z}/{x}/{y}.png"):""}}),watch:{},methods:{mapLayersInit:function(){this.map=this.$refs.map.mapObject,this.kmlLayer=(new Ra.a.featureGroup).addTo(this.map),this.aoiLayer=(new Ra.a.FeatureGroup).addTo(this.map),this.drawControl=new Ra.a.Control.Draw({position:"topright",draw:{polyline:!1,polygon:!0,circle:!0,marker:!1,circlemarker:!1},edit:{featureGroup:this.aoiLayer,remove:!0}}),this.measureLayer=(new Ra.a.FeatureGroup).addTo(this.map),this.measureControl=new Ra.a.Control.Measure({position:"topright",activeColor:"#f14141",completedColor:"#ff7800",primaryLengthUnit:"feet",primaryAreaUnit:"acres",secondaryLengthUnit:void 0,secondaryAreaUnit:void 0,units:{feet:{factor:3.28084,display:"feets",decimals:2},acres:{factor:247105e-9,display:"acres",decimals:2}}}),this.cadLayer=(new Ra.a.featureGroup).addTo(this.map)},renderGeoData:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e){var i=e.split(".").slice(-1)[0],s=null,o=null;switch(r&&(o=Ra.a.geoJson(null,{style:function(e){return{fill:1,fillColor:"rgb(".concat(r,")"),fillOpacity:.2}}})),i){case"kml":s=omnivore.kml(e,null,o);break;default:break}return s.on("ready",(function(){t.addLayer(s);var e=s.getBounds();a.map.fitBounds(e)})),s}},createNewAOI:function(){this.map.addControl(this.drawControl),this.polygonEnabler=new Ra.a.Draw.Polygon(this.map,this.drawControl.options.polygon),this.polygonEnabler.enable()},aoiCreated:function(e){this.createdAoi=e.layer,this.drawnPolygonDimension=e.layer._latlngs[0],this.$bvModal.show("polygon-modal"),this.map.removeControl(this.drawControl)},renderNewAoi:function(e){this.aoiLayerLabelMap.set(e,this.createdAoi);var t=Ra.a.popup().setContent(e);this.createdAoi.bindPopup(t).openPopup(),this.aoiLayer.addLayer(this.createdAoi),this.$bvToast.toast("".concat(e," created successfully"),{title:"AOI Created",autoHideDelay:4e3,appendToast:!1,variant:"success"})},renderAOIItem:function(e){if(this.aoiLayerLabelMap.has(e.label)){var t=this.aoiLayerLabelMap.get(e.label),a=t.getBounds();this.map.fitBounds(a),t.openPopup()}else{var r=Ra.a.polygon(e.polygon,{color:"#ff7800",weight:1});this.aoiLayerLabelMap.set(e.label,r);var i=Ra.a.popup().setContent(e.label);r.bindPopup(i).openPopup(),this.aoiLayer.addLayer(r);var s=this.aoiLayer.getBounds();this.map.fitBounds(s)}},removeAoi:function(e){if(this.aoiLayerLabelMap.has(e)){var t=this.aoiLayerLabelMap.get(e);this.aoiLayer.removeLayer(t),this.aoiLayerLabelMap.delete(e)}this.$bvToast.toast("".concat(e," aoi deleted successfully"),{title:"Deleted!",autoHideDelay:4e3,appendToast:!1,variant:"success"})},closeAOI:function(){this.aoiLayer&&this.aoiLayer.clearLayers(),this.map.removeControl(this.drawControl),this.polygonEnabler&&this.polygonEnabler.disable(),this.aoiLayerLabelMap.clear()},createNewMeasure:function(){this.map.addControl(this.measureControl);var e=document.getElementsByClassName("start")[0];e.click()},renderNewMeaure:function(e){this.measureLayerLabelMap.set(e,this.createdMeasure);var t=Ra.a.popup().setContent(e);this.createdMeasure.bindPopup(t).openPopup(),this.measureLayer.addLayer(this.createdMeasure),this.$bvToast.toast("".concat(e," created successfully"),{title:"AOI Created",autoHideDelay:4e3,appendToast:!1,variant:"success"})},measureCreated:function(e){e.data.points.length>0&&(this.measureDetails=e.data,this.createdMeasure=e.layer.getLayers()[0],this.$bvModal.show("measureModal"),this.map.removeControl(this.measureControl))},renderMeasureItem:function(e){if(this.measureLayerLabelMap.has(e.label)){var t=this.measureLayerLabelMap.get(e.label),a=t.getBounds();this.map.fitBounds(a),t.openPopup()}else{var r=Ra.a.polygon(e.polygon,{color:"#ff7800",weight:1});this.measureLayerLabelMap.set(e.label,r);var i=Ra.a.popup().setContent(e.label);r.bindPopup(i).openPopup(),this.measureLayer.addLayer(r);var s=this.measureLayer.getBounds();this.map.fitBounds(s)}},removeMeaure:function(e){if(this.measureLayerLabelMap.has(e)){var t=this.measureLayerLabelMap.get(e);this.measureLayer.removeLayer(t),this.measureLayerLabelMap.delete(e)}this.$bvToast.toast("".concat(e," deleted successfully"),{title:"Deleted!",autoHideDelay:4e3,appendToast:!1,variant:"success"})},closeMeasure:function(){this.map.removeControl(this.measureControl),this.measureLayer&&this.measureLayer.clearLayers(),this.measureLayerLabelMap.clear()},renderCad:function(e){var t=this;if(this.cadLayerLabelMap.has(e.label)){var a=this.cadLayerLabelMap.get(e.label),r=a[0].getBounds();this.map.fitBounds(r)}else{var i,s=[],o=[];e.realign_cad_kml.length>0?(o=e.realign_cad_kml,this.isRealigned=!0):(o=e.uploaded_cad_kml,this.isRealigned=!1),o.forEach((function(a){i=t.renderGeoData(a,t.cadLayer,e.color),s.push(i)})),this.cadId=e.id,this.cadLayerLabelMap.set(e.label,s)}this.cadAlignData.label=e.label,this.cadAlignData.id=e.id},reAlignCad:function(e){var t=this;this.cadAlignData.label=e.label,this.cadAlignData.id=e.id,Ra.a.DomUtil.addClass(this.map._container,"crosshair-cursor-enabled"),this.map.on("click",(function(e){t.addCadAlignPoints(e.latlng)}))},revertRealign:function(e){var t=this;this.$store.dispatch("airmapStore/revertRealignApi",e.id).then((function(a){if("success"===a){var r={creation_date:e.creation_date,date:e.date,id:e.id,label:e.label,location_id:e.location_id,project:e.project,uploaded_cad_kml:e.uploaded_cad_kml,realign_cad_kml:[],realigned_by:null,realign_date:null};t.cadLayer.clearLayers(),t.cadLayerLabelMap.clear(),t.renderCad(r),t.$root.$emit("cadAlignReverted",r)}}))},addCadAlignPoints:function(e){var t=new Ra.a.marker(e);this.cadLayer.addLayer(t),this.cadAlignData.alignPoints.push(e),this.cadAlignData.alignPoints.length>=8&&this.$bvModal.show("cadAlignModal")},removeCad:function(e){this.cadLayerLabelMap.has(e)&&(this.cadLayer.clearLayers(),this.measureLayerLabelMap.delete(e),this.$bvToast.toast("".concat(e," deleted successfully"),{title:"Deleted!",autoHideDelay:4e3,appendToast:!1,variant:"success"}))},closeCadDetails:function(){Ra.a.DomUtil.removeClass(this.map._container,"crosshair-cursor-enabled"),this.cadLayer&&this.cadLayer.clearLayers(),this.cadAlignData.alignPoints=[],this.cadAlignData.label="",this.cadFileLastModified="",this.map.off("click")}},mounted:function(){var e=this;this.$root.$on("kmlClicked",(function(t){e.kmlLayer.clearLayers(),e.renderGeoData(t.url,e.kmlLayer,t.color)})),this.$root.$on("removeKml",(function(){e.kmlLayer.clearLayers()})),this.$root.$on("createNewAoi",(function(){e.createNewAOI()})),this.$root.$on("aoiCreated",(function(t){e.renderNewAoi(t)})),this.$root.$on("aoiItemClicked",(function(t){e.renderAOIItem(t)})),this.$root.$on("aoiClosed",(function(){e.closeAOI()})),this.$root.$on("aoiDeleted",(function(t){e.removeAoi(t)})),this.$root.$on("createNewMeasure",(function(){e.createNewMeasure()})),this.$root.$on("measureCreated",(function(t){e.renderNewMeaure(t)})),this.$root.$on("measureItemClicked",(function(t){e.renderMeasureItem(t)})),this.$root.$on("measureDeleted",(function(t){e.removeMeaure(t)})),this.$root.$on("measureClosed",(function(){e.closeMeasure()})),this.$root.$on("cadClicked",(function(t){e.cadLayer.clearLayers(),e.cadLayerLabelMap.clear(),e.renderCad(t)})),this.$root.$on("cadSideNavClosed",(function(){e.closeCadDetails()})),this.$root.$on("cadDeleted",(function(t){e.removeCad(t)})),this.$root.$on("reAlignClicked",(function(t){e.reAlignCad(t)})),this.$root.$on("revertReAlignClicked",(function(t){e.revertRealign(t)}))}},yr=br,Cr=(a("1f58"),Object(d["a"])(yr,Na,Ea,!1,null,"0e2553b9",null)),wr=Cr.exports,_r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidenav d-flex flex-column align-items-center"},[a("div",{attrs:{id:"sidenavLogo my-2",role:"button"},on:{click:e.routeToHome}},[a("h1",{staticClass:"text-light"},[e._v("A")])]),a("div",{staticClass:"h-75",attrs:{id:"dynamicLinks"}},[e._l(e.freemiumLinks,(function(t){return a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],key:t.header,staticClass:"sidenavLinks d-flex justify-content-center align-items-center my-3 py-3",class:{clickedSideNav:e.sideBarHeader===t.header},attrs:{href:"#",title:t.header,disabled:t.isDisabled},on:{click:function(a){return a.preventDefault(),e.switchSideNav(t.header)}}},[a("i",{class:t.icon,attrs:{"aria-hidden":"true"}})])})),e.$can("use","Enterprise")||e.$can("use","Premium")?a("div",e._l(e.premiumLinks,(function(t){return a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],key:t.header,staticClass:"sidenavLinks d-flex justify-content-center align-items-center my-3 py-3",class:{clickedSideNav:e.sideBarHeader===t.header},attrs:{href:"#",title:t.header,disabled:t.isDisabled},on:{click:function(a){return a.preventDefault(),e.switchSideNav(t.header)}}},[a("i",{class:t.icon,attrs:{"aria-hidden":"true"}})])})),0):e._e()],2),a("div",{staticClass:"h-25 mb-5",attrs:{id:"staticLinks"}},[a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],staticClass:"sidenavLinks d-flex justify-content-center align-items-center my-3 py-3",attrs:{title:"Project Info"},on:{click:function(t){e.isProjectInfoShown=!e.isProjectInfoShown}}},[a("i",{staticClass:"fas fa-info-circle",attrs:{"aria-hidden":"true"}})]),a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],staticClass:"sidenavLinks d-flex justify-content-center align-items-center my-3 py-3",attrs:{title:"Project Info"}},[a("i",{staticClass:"fas fa-cog"})]),a("div",{staticClass:"sidenavLinks d-flex justify-content-center align-items-center my-3 ml-1 py-3"},[a("b-dropdown",{staticClass:"mx-2",attrs:{dropright:"",variant:"dark"},scopedSlots:e._u([{key:"button-content",fn:function(){return[a("i",{staticClass:"fa fa-user-circle"})]},proxy:!0}])},[a("b-dropdown-item",{on:{click:e.routeToUserProfile}},[e._v("Profile")]),e.$can("manage","subusers")?a("b-dropdown-item",{on:{click:e.routeToManageUsers}},[e._v("Manage Users")]):e._e(),a("b-dropdown-divider"),a("b-dropdown-item",{on:{click:e.logout}},[e._v("Sign Out")])],1)],1)]),a("b-sidebar",{attrs:{id:"sidebar","no-header":!0,visible:e.sideBarVisible,shadow:""}},[a("div",{staticClass:"sideBarContainer"},[a("div",{staticClass:"sideBarMenuContainer"},[a("div",{staticClass:"headingContainer"},[a("b",{staticClass:"title"},[e._v(e._s(e.sideBarHeader))]),a("span",{staticClass:"icon-container"},[a("i",{staticClass:"icon fa fa-times",attrs:{"aria-hidden":"true","aria-controls":"sidebar"},on:{click:function(t){return e.closeSideBar("assetMenu")}}})])]),a("div",["Summary"===e.sideBarHeader?a("summarySideNav",{attrs:{summaryData:e.summaryApiData}}):e._e(),"Assets"===e.sideBarHeader?a("assetsSideNav",{attrs:{assetData:e.summaryApiData}}):e._e(),"Inverter"===e.sideBarHeader?a("inverterSideNav",{attrs:{inverterApiData:e.inverterApiData}}):e._e(),"AOI"===e.sideBarHeader?a("aoiSideNav",{attrs:{aoiArray:e.AOIData}}):e._e(),"Measure"===e.sideBarHeader?a("measureSideNav",{attrs:{measuresArray:e.measureData}}):e._e(),"CAD"===e.sideBarHeader?a("cadAlignSideNav",{attrs:{cadArray:e.cadAlignData}}):e._e(),"Activities"===e.sideBarHeader?a("activitySideNav",{attrs:{activityArray:e.activityData}}):e._e()],1)])])]),a("div",{staticClass:"projectInfoContainer"},[a("b-alert",{attrs:{variant:"dark",dismissible:"",fade:""},model:{value:e.isProjectInfoShown,callback:function(t){e.isProjectInfoShown=t},expression:"isProjectInfoShown"}},[a("h4",{staticClass:"alert-heading"},[e._v(e._s(e.projectInfo.projectName))]),a("p",[e._v(" "+e._s(e.projectInfo.projectType)+" ")]),a("hr")])],1)],1)},kr=[],Ar=(a("498a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"summaryListContainer customScroll"},[a("b-list-group",e._l(e.summaryData,(function(t,r,i){return a("b-list-group-item",{key:i},[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("div",{key:e.currentDate,staticClass:"sideBarList"},[a("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"summary"+i+"L1",expression:"`summary${indexL1}L1`"}]},[a("span",[e._v(e._s(r))]),a("span",[a("i",{class:"fas fa-caret-down",attrs:{"aria-hidden":"true"}})])]),Object.keys(t).length>1?a("b-collapse",{staticClass:"mt-2",attrs:{id:"summary"+i+"L1"}},e._l(t,(function(t,r,s){return a("div",{key:r+"-"+s,staticClass:"subItem1",staticStyle:{cursor:"pointer"}},[a("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:""+i+s+"L2",expression:"`${indexL1}${indexL2}L2`"}]},[a("span",[e._v(" "+e._s(r)+" ")]),a("span",[a("i",{class:"fas fa-caret-down",attrs:{"aria-hidden":"true"}})])]),Object.keys(t).length>1?a("b-collapse",{staticClass:"mt-2",attrs:{id:""+i+s+"L2"}},e._l(t,(function(t,i,s){return a("div",{key:i+"-"+s,staticClass:"subItem2",class:{clickedHighlighter:e.clickedSummary===e.currentDate+r+i},on:{click:function(a){return e.renderDetails(r,i,t)}}},[a("span",[e._v(" "+e._s(i)+" ")])])})),0):e._e()],1)})),0):e._e()],1)])],1)})),1),a("transition",{attrs:{name:"fade"}},[e.clickedDetailsVisible?a("div",{staticClass:"sideBarDetailsContainer"},[a("div",{staticClass:"clickedHeader"},[a("span",{staticClass:"clickedTitle"},[e._v("Details")]),a("span",{staticClass:"closeIcon"},[a("i",{staticClass:"icon fa fa-times",attrs:{"aria-hidden":"true","aria-controls":"sidebar"},on:{click:function(t){return e.closeDetails()}}})])]),a("div",{staticClass:"clickedDetails"},[a("div",{staticClass:"clickedItemHeader"},[e._v(e._s(e.clickedDetails.sub_class))]),a("b-list-group-item",[e._v(" Actual : "+e._s(e.clickedDetails.actual_value)+" ")]),a("b-list-group-item",[e._v(" Current : "+e._s(e.clickedDetails.current_value)+" ")])],1)]):e._e()])],1),a("div",{staticClass:"text-center"},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"primaryBg mt-2 border-0",attrs:{pill:"",title:"Download CSV"},on:{click:function(t){return e.downloadSummary()}}},[a("i",{staticClass:"fa fa-download"})])],1)])}),Dr=[],$r={name:"summarySideNav",props:["summaryData"],data:function(){return{clickedDetailsVisible:!1,clickedDetails:{},clickedSummary:null}},computed:{currentDate:function(){var e=this.$store.state.airmapStore.currentDate;return e||""},kmlBaseUrl:function(){var e=this.$store.state.projectStore.projectProperties.kml;return e||""}},methods:{renderDetails:function(e,t,a){this.clickedSummary=this.currentDate+e+t,this.clickedDetails=a,this.clickedDetailsVisible=!0,a.KML&&this.$root.$emit("kmlClicked",{url:"".concat(this.kmlBaseUrl,"/").concat(a.KML),color:String(a.color)})},closeDetails:function(){this.clickedDetails={},this.clickedDetailsVisible=!1},downloadSummary:function(){this.$store.dispatch("airmapStore/downloadCompileApi","downloadsummary")}}},Sr=$r,xr=(a("13bc"),Object(d["a"])(Sr,Ar,Dr,!1,null,"3499dc76",null)),jr=xr.exports,Lr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sidenavListContainer customScroll"},[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("div",{key:e.currentDate},e._l(e.assetData,(function(t,r,i){return a("div",{key:i,staticClass:"d-flex justify-content-between sidenavListItem",class:{clickedHighlighter:e.clickedAsset===e.currentDate+r+i},on:{click:function(a){return e.renderDetails(r,i,t)}}},[a("div",[e._v(" "+e._s(e._f("capitalize")(r.toLowerCase()))+" ")]),a("div",[a("i",{staticClass:"fas fa-square float-right",style:{color:"rgb("+String(t.color)+")"},attrs:{"aria-hidden":"true"}})])])})),0)]),a("transition",{attrs:{name:"fade"}},[e.clickedDetailsVisible?a("div",{staticClass:"d-flex flex-column sideBarDetailsContainer"},[a("div",{staticClass:"d-flex justify-content-between align-items-center bg-dark rounded-top"},[a("b",{staticClass:"ml-2 text-light"},[e._v(e._s(e._f("capitalize")(e.clickedDetails.title)))]),a("div",{staticClass:"mr-2 text-light closeIcon",attrs:{role:"button"}},[a("i",{staticClass:"icon fa fa-times",attrs:{"aria-hidden":"true","aria-controls":"sidebar"},on:{click:function(t){return e.closeDetails()}}})])]),a("div",{staticClass:"sideBarDetails d-flex align-items-center rounded-bottom py-2"},[a("div",{staticClass:"w-75 "},[a("div",{staticClass:"d-flex justify-content-around"},[a("span",[a("b",[e._v("Area")])]),a("span",[e._v(e._s(e.clickedDetails.Area_m2)+" m"),a("sup",[e._v("2")])])]),a("div",{staticClass:"d-flex justify-content-around"},[a("span",[a("b",[e._v("Length")])]),a("span",[e._v(e._s(e.clickedDetails.Length_m)+" m")])])]),a("div",{staticClass:"w-25 d-flex justify-content-center"},[a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-light p-2",attrs:{role:"button",title:"Download Kml"},on:{click:function(t){return e.downloadAsset(e.clickedDetails)}}},[a("i",{staticClass:"fa fa-download"})])])])]):e._e()])],1),a("div",{staticClass:"text-center"},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"primaryBg mt-2 border-0",attrs:{pill:"",title:"Download CSV"},on:{click:function(t){return e.downloadSummary()}}},[a("i",{staticClass:"fa fa-download"})])],1)])},Pr=[],Mr={name:"summarySideNav",props:["assetData"],data:function(){return{clickedDetailsVisible:!1,clickedDetails:{},clickedAsset:null}},computed:{currentDate:function(){var e=this.$store.state.airmapStore.currentDate;return e||""},kmlBaseUrl:function(){var e=this.$store.state.projectStore.projectProperties.kml;return e||""}},methods:{renderDetails:function(e,t,a){this.clickedAsset=this.currentDate+e+t,this.clickedDetails=a;var r=a.KML.split(".")[0].toLowerCase();this.clickedDetails.title=r||"Details",this.clickedDetailsVisible=!0,a.KML&&this.$root.$emit("kmlClicked",{url:"https://www.takvaviya.in/files/Airmap_kmls/Airmap%20Site1/02-06-2020/kml/".concat(a.KML),color:String(a.color)})},closeDetails:function(){this.clickedDetails={},this.clickedDetailsVisible=!1,this.$root.$emit("removeKml")},downloadAsset:function(e){var t="https://www.takvaviya.in/files/Airmap_kmls/Airmap%20Site1/02-06-2020/kml/".concat(e.KML),a=e.KML.replace(/\s/g,"");this.$store.dispatch("projectStore/downloadFile",{url:t,filename:a})},downloadSummary:function(){this.$store.dispatch("airmapStore/downloadCompileApi","downloadsummary")}},destroyed:function(){this.$root.$emit("removeKml")}},Tr=Mr,Ir=Object(d["a"])(Tr,Lr,Pr,!1,null,"deca0498",null),Br=Ir.exports,Or=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("div",{key:e.currentDate},[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("h4",{key:e.currentInverter,staticClass:"text-center"},[e._v(" "+e._s(e.currentInverter)+" ")])]),a("div",{staticClass:"inverterListContainer customScroll"},[a("b-list-group",e._l(e.inverterApiData.invertersData[e.inverterCurrentPage],(function(t,r,i){return a("b-list-group-item",{key:i},[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("div",{key:e.currentInverter,staticClass:"sideBarList"},[a("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:""+e.currentInverter+i+"L1",expression:"`${currentInverter}${indexL1}L1`"}]},[a("span",[e._v(e._s(r))]),a("span",[a("i",{class:"fas fa-caret-down",attrs:{"aria-hidden":"true"}})])]),Object.keys(t).length>1?a("b-collapse",{staticClass:"mt-2",attrs:{id:""+e.currentInverter+i+"L1"}},e._l(t,(function(t,r,s){return a("div",{key:r+"-"+s,staticClass:"subItem1",staticStyle:{cursor:"pointer"}},[a("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:""+e.currentInverter+i+s+"L2",expression:"`${currentInverter}${indexL1}${indexL2}L2`"}]},[a("span",[e._v(" "+e._s(r)+" ")]),a("span",[a("i",{class:"fas fa-caret-down",attrs:{"aria-hidden":"true"}})])]),Object.keys(t).length>1?a("b-collapse",{staticClass:"mt-2",attrs:{id:""+e.currentInverter+i+s+"L2"}},e._l(t,(function(t,i,s){return a("div",{key:i+"-"+s,staticClass:"subItem2",class:{clickedHighlighter:e.clickedInverter===r+i},on:{click:function(a){return e.renderDetails(r,i,t)}}},[a("span",[e._v(" "+e._s(i)+" ")])])})),0):e._e()],1)})),0):e._e()],1)])],1)})),1)],1),a("div",{staticClass:"inverterPaginator"},[a("b-pagination",{attrs:{"total-rows":e.inverterTotalPages,"per-page":1,align:"center",size:"sm"},on:{change:e.inverterPageChange},model:{value:e.inverterCurrentPage,callback:function(t){e.inverterCurrentPage=t},expression:"inverterCurrentPage"}})],1),a("transition",{attrs:{name:"fade"}},[e.clickedDetailsVisible?a("div",{staticClass:"sideBarDetailsContainer"},[a("div",{staticClass:"clickedHeader"},[a("span",{staticClass:"clickedTitle"},[e._v("Details")]),a("span",{staticClass:"closeIcon"},[a("i",{staticClass:"icon fa fa-times",attrs:{"aria-hidden":"true","aria-controls":"sidebar"},on:{click:function(t){return e.closeDetails()}}})])]),a("div",{staticClass:"clickedDetails"},[a("div",{staticClass:"clickedItemHeader"},[e._v(" "+e._s(e.clickedDetails.sub_class)+" ")]),a("b-list-group-item",[e._v(" Current : "+e._s(e.clickedDetails.current_value)+" ")]),a("b-list-group-item",[e._v(" Actual : "+e._s(e.clickedDetails.actual_value)+" ")])],1)]):e._e()])],1)]),a("div",{staticClass:"text-center"},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"primaryBg mt-2 border-0",attrs:{pill:"",title:"Download CSV"},on:{click:function(t){return e.downloadInverter()}}},[a("i",{staticClass:"fa fa-download"})])],1)],1)},Ur=[],Nr={name:"inverterSideNav",props:["inverterApiData"],data:function(){return{clickedDetailsVisible:!1,clickedDetails:{},clickedInverter:null,inverterCurrentPage:1}},computed:{currentDate:function(){var e=this.$store.state.airmapStore.currentDate;return e},inverterTotalPages:function(){var e=this.inverterApiData.inverters.length-1;return e||0},currentInverter:function(){var e=this.inverterApiData.inverters[this.inverterCurrentPage];return e||{}}},methods:{renderDetails:function(e,t,a){this.clickedInverter=e+t,this.clickedDetails=a,this.clickedDetailsVisible=!0},closeDetails:function(){this.clickedDetails={},this.clickedDetailsVisible=!1},inverterPageChange:function(e){this.clickedInverter="",this.inverterCurrentPage=e},downloadInverter:function(){this.$store.dispatch("airmapStore/downloadCompileApi","downloadinverter")}}},Er=Nr,Fr=(a("6c1e"),Object(d["a"])(Er,Or,Ur,!1,null,"ea623900",null)),Rr=Fr.exports,qr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sidenavListContainer"},[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("div",{key:e.currentDate},e._l(e.activityArray,(function(t,r,i){return a("div",{key:i,staticClass:"d-flex justify-content-between sidenavListItem",class:{clickedHighlighter:e.clickedItemKey===e.currentDate+t.label},on:{click:function(a){return e.activityItemClicked(t)}}},[a("div",[a("span",{staticClass:"ml-2"},[e._v(e._s(t.label))])])])})),0)]),e.$can("create","activity")?a("div",{staticClass:"text-center"},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"primaryBg mt-2 border-0",attrs:{pill:"",title:"Create New Activity"},on:{click:function(t){return e.createNewActivity()}}},[a("i",{staticClass:"fa fa-plus"})])],1):e._e()],1),a("transition",{attrs:{name:"fade"}},[e.clickedDetailsVisible?a("div",{staticClass:"d-flex flex-column sideBarDetailsContainer"},[a("div",{staticClass:"d-flex justify-content-between align-items-center bg-dark rounded-top"},[a("b",{staticClass:"ml-2 text-light"},[e._v(e._s(e._f("capitalize")(e.clickedDetails.label)))]),a("div",{staticClass:"mr-2 text-light closeIcon",attrs:{role:"button"}},[a("i",{staticClass:"icon fa fa-times",attrs:{"aria-hidden":"true","aria-controls":"sidebar"},on:{click:function(t){return e.closeDetails()}}})])]),a("div",{staticClass:"sideBarDetails d-flex align-items-center rounded-bottom"},[a("div",{staticClass:"w-75  px-3 py-2"},[a("div",{staticClass:"d-flex justify-content-between"},[a("span",{staticClass:"w-50"},[a("b",[e._v("Description")])]),a("span",{staticClass:"w-50 text-right"},[e._v(e._s(e._f("capitalize")(e.clickedDetails.description)))])]),a("div",{staticClass:"d-flex justify-content-between"},[a("span",[a("b",[e._v("Start Date")])]),a("span",[e._v(e._s(e.clickedDetails.startdate))])]),a("div",{staticClass:"d-flex justify-content-between"},[a("span",[a("b",[e._v("End Date")])]),a("span",[e._v(e._s(e.clickedDetails.enddate))])])]),a("div",{staticClass:"w-25 d-flex justify-content-center"},[e.$can("delete","activity")?a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-light p-2",attrs:{role:"button",title:"Delete Activity"},on:{click:function(t){return e.showDeleteModal(e.clickedDetails)}}},[a("i",{staticClass:"fa fa-trash-o"})]):e._e()])])]):e._e()]),a("b-modal",{attrs:{id:"createActivityModal",centered:"",title:"Create New Activity","hide-footer":!0}},[a("createActivityModal")],1),a("b-modal",{attrs:{id:"deleteConfirmModal",centered:"",title:"Deletion Confirmation","hide-footer":!0}},[a("deleteConfirmModal",{attrs:{toBeDeleted:e.toBeDeleted,id:e.toBeDeletedId,deleteAPI:e.deleteActivityApi}})],1)],1)},zr=[],Vr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-form-group",{attrs:{id:"input-group-label",label:"Name:","label-for":"input-label"}},[a("b-form-input",{attrs:{id:"input-label",state:e.validateState("label"),type:"text",required:""},model:{value:e.$v.form.label.$model,callback:function(t){e.$set(e.$v.form.label,"$model",t)},expression:"$v.form.label.$model"}}),e.$v.form.label.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Name must be atleast 3 characters long. ")])],1),a("b-form-group",{attrs:{id:"input-group-description",label:"Description:","label-for":"input-description"}},[a("b-form-input",{attrs:{id:"input-description",state:e.validateState("description"),required:""},model:{value:e.$v.form.description.$model,callback:function(t){e.$set(e.$v.form.description,"$model",t)},expression:"$v.form.description.$model"}}),e.$v.form.description.minLength?e._e():a("b-form-invalid-feedback",[e._v(" Description must be atleast 3 characters long. ")])],1),a("b-form-group",{attrs:{id:"input-group-startdate",label:"Start Date:","label-for":"input-startdate"}},[a("b-form-datepicker",{attrs:{id:"input-startdate",state:e.validateState("startdate"),type:"date",required:"",min:e.today},model:{value:e.$v.form.startdate.$model,callback:function(t){e.$set(e.$v.form.startdate,"$model",t)},expression:"$v.form.startdate.$model"}}),e.$v.form.startdate.required?e._e():a("b-form-invalid-feedback",[e._v(" Start Date is required ")])],1),a("b-form-group",{attrs:{id:"input-group-enddate",label:"End Date:","label-for":"input-enddate"}},[a("b-form-datepicker",{attrs:{id:"input-enddate",state:e.validateState("enddate"),type:"date",min:e.form.startdate,required:""},model:{value:e.$v.form.enddate.$model,callback:function(t){e.$set(e.$v.form.enddate,"$model",t)},expression:"$v.form.enddate.$model"}}),e.$v.form.enddate.required?e._e():a("b-form-invalid-feedback",[e._v(" End Date is required ")])],1),a("b-button",{staticClass:"primaryBg float-right m-2",attrs:{type:"submit"}},[e._v("Submit")])],1)],1)},Hr=[],Kr={name:"createActivityModal",data:function(){return{form:{label:"",description:"",startdate:"",enddate:""},today:new Date,priorityOptions:[{value:"High",text:"High"},{value:"Medium",text:"Medium"},{value:"Low",text:"Low"}]}},validations:{form:{label:{required:L["required"],minLength:Object(L["minLength"])(3)},description:{required:L["required"],minLength:Object(L["minLength"])(3)},startdate:{required:L["required"]},enddate:{required:L["required"]}}},methods:{validateState:function(e){var t=this.$v.form[e],a=t.$dirty,r=t.$error;return a?!r:null},onSubmit:function(){var e=this;this.$v.form.$invalid?this.handleToast({title:"Validation Error",message:"Please Fill in all fields with valid data",variant:"danger"}):(this.$store.dispatch("projectStore/createNewActivity",this.form).then((function(t){"success"===t&&e.$root.$emit("showToast",{message:"".concat(e.form.label," created successfully"),title:"Activity Created",variant:"success"})})).catch((function(t){console.log(t),e.handleToast({title:"Activity Not Created",message:"There has been an error in creating your activity. Try again or contact support",variant:"danger"})})),this.$bvModal.hide("createActivityModal"))},handleToast:function(e){this.$root.$emit("showToast",e)}}},Yr=Kr,Gr=Object(d["a"])(Yr,Vr,Hr,!1,null,null,null),Wr=Gr.exports,Zr={name:"activitySideNav",components:{createActivityModal:Wr,deleteConfirmModal:Fe},props:{activityArray:Array},data:function(){return{clickedDetailsVisible:!1,clickedDetails:{},clickedItemKey:"",toBeDeleted:"",toBeDeletedId:"",deleteActivityApi:"projectStore/deleteActivity"}},computed:{currentDate:function(){var e=this.$store.state.airmapStore.currentDate;return e||""},accessType:function(){var e=this.$store.state.projectStore.accessType;return e||"read"}},methods:{activityItemClicked:function(e){this.clickedItemKey=this.currentDate+e.label,this.clickedDetails=e,this.clickedDetailsVisible=!0,this.$root.$emit("activityItemClicked",e)},closeDetails:function(){this.clickedDetails={},this.clickedDetailsVisible=!1},showDeleteModal:function(e){this.toBeDeleted=e.label,this.toBeDeletedId=e.id,this.$bvModal.show("deleteConfirmModal")},downloadActivity:function(e){this.$store.dispatch("airmapStore/downloadActivityApi",e.id)},createNewActivity:function(){this.$bvModal.show("createActivityModal")},removeActivity:function(e){this.clickedDetails.label===e&&(this.clickedDetails={},this.clickedDetailsVisible=!1,this.clickedItemKey="")}},mounted:function(){var e=this;this.$root.$on("activityDeleted",(function(t){e.removeActivity(t)}))}},Qr=Zr,Jr=Object(d["a"])(Qr,qr,zr,!1,null,"5dfe1f81",null),Xr=Jr.exports,ei=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sidenavListContainer"},[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("div",{key:e.currentDate},e._l(e.aoiArray,(function(t,r,i){return a("div",{key:i,staticClass:"d-flex justify-content-between sidenavListItem",class:{clickedHighlighter:e.clickedItemKey===e.currentDate+t.label},on:{click:function(a){return e.aoiItemClicked(t)}}},[a("div",[a("span",{staticClass:"ml-2"},[e._v(e._s(t.label))])])])})),0)]),e.$can("create","aoi")?a("div",{staticClass:"text-center"},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"primaryBg mt-2 border-0",attrs:{pill:"",title:"Create New AOI"},on:{click:function(t){return e.createNewAoi()}}},[a("i",{staticClass:"fa fa-plus"})])],1):e._e()],1),a("transition",{attrs:{name:"fade"}},[e.clickedDetailsVisible?a("div",{staticClass:"d-flex flex-column sideBarDetailsContainer"},[a("div",{staticClass:"d-flex justify-content-between align-items-center bg-dark rounded-top"},[a("b",{staticClass:"ml-2 text-light"},[e._v(e._s(e._f("capitalize")(e.clickedDetails.label)))]),a("div",{staticClass:"mr-2 text-light closeIcon",attrs:{role:"button"}},[a("i",{staticClass:"icon fa fa-times",attrs:{"aria-hidden":"true","aria-controls":"sidebar"},on:{click:function(t){return e.closeDetails()}}})])]),a("div",{staticClass:"sideBarDetails d-flex align-items-center rounded-bottom"},[a("div",{staticClass:"w-75  px-3 py-2"},[a("div",{staticClass:"d-flex justify-content-between"},[a("span",{staticClass:"w-50"},[a("b",[e._v("Description")])]),a("span",{staticClass:"w-50 text-right"},[e._v(e._s(e._f("capitalize")(e.clickedDetails.description)))])]),a("div",{staticClass:"d-flex justify-content-between"},[a("span",[a("b",[e._v("Created By")])]),a("span",[e._v(e._s(e._f("capitalize")(e.clickedDetails.created_by)))])]),a("div",{staticClass:"d-flex justify-content-between"},[a("span",[a("b",[e._v("Created On")])]),a("span",[e._v(e._s(e._f("dateFormat")(e.clickedDetails.creation_date,"MMM D, YYYY h:mm A")))])])]),a("div",{staticClass:"w-25 d-flex justify-content-center"},[a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-light p-2",attrs:{role:"button",title:"Download AOI"},on:{click:function(t){return e.downloadAoi(e.clickedDetails)}}},[a("i",{staticClass:"fa fa-download"})]),e.$can("delete","aoi")?a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-light p-2",attrs:{role:"button",title:"Delete AOI"},on:{click:function(t){return e.showDeleteModal(e.clickedDetails)}}},[a("i",{staticClass:"fa fa-trash-o"})]):e._e()])])]):e._e()]),a("b-modal",{attrs:{id:"deleteConfirmModal",centered:"",title:"Deletion Confirmation","hide-footer":!0}},[a("deleteConfirmModal",{attrs:{toBeDeleted:e.toBeDeleted,id:e.toBeDeletedId,deleteAPI:e.deleteAOIApi}})],1)],1)},ti=[],ai={name:"aoiSideNav",components:{deleteConfirmModal:Fe},props:{aoiArray:Array},data:function(){return{clickedDetailsVisible:!1,clickedDetails:{},clickedItemKey:"",toBeDeleted:"",toBeDeletedId:"",deleteAOIApi:"airmapStore/deleteAOIApi",callOnce:1}},computed:{currentDate:function(){var e=this.$store.state.airmapStore.currentDate;return e||""},accessType:function(){var e=this.$store.state.projectStore.accessType;return e||"read"}},methods:{aoiItemClicked:function(e){this.clickedItemKey=this.currentDate+e.label,this.clickedDetails=e,this.clickedDetailsVisible=!0,this.$root.$emit("aoiItemClicked",e)},closeDetails:function(){this.clickedDetails={},this.clickedDetailsVisible=!1},showDeleteModal:function(e){this.toBeDeleted=e.label,this.toBeDeletedId=e.id,this.$bvModal.show("deleteConfirmModal")},downloadAoi:function(e){this.$store.dispatch("airmapStore/downloadAoiApi",e.id)},createNewAoi:function(){this.$root.$emit("createNewAoi")},removeAoi:function(e){this.clickedDetails.label===e&&(this.clickedDetails={},this.clickedDetailsVisible=!1)}},mounted:function(){var e=this;this.$root.$on("aoiDeleted",(function(t){e.removeAoi(t)}))},destroyed:function(){this.callOnce&&(this.callOnce=null,this.$root.$emit("aoiClosed"))}},ri=ai,ii=Object(d["a"])(ri,ei,ti,!1,null,"201d5b2e",null),si=ii.exports,oi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sidenavListContainer"},[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("div",{key:e.currentDate},e._l(e.measuresArray,(function(t,r,i){return a("div",{key:i,staticClass:"d-flex justify-content-between sidenavListItem",class:{clickedHighlighter:e.clickedItemKey===e.currentDate+t.label},on:{click:function(a){return e.measureItemClicked(t)}}},[a("div",[a("span",{staticClass:"ml-2"},[e._v(e._s(t.label))])]),a("div",[a("span",{staticClass:"measureTypeIcon text-primaryBg mr-2"},[a("i",{class:e.measureIconClasses[t.type]})])])])})),0)]),e.$can("create","measure")?a("div",{staticClass:"text-center"},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"primaryBg mt-2 border-0",attrs:{pill:"",title:"Create New Measurement"},on:{click:function(t){return e.createNewMeasure()}}},[a("i",{staticClass:"fa fa-plus"})])],1):e._e()],1),a("transition",{attrs:{name:"fade"}},[e.clickedDetailsVisible?a("div",{staticClass:"d-flex flex-column sideBarDetailsContainer"},[a("div",{staticClass:"d-flex justify-content-between align-items-center bg-dark rounded-top"},[a("b",{staticClass:"ml-2 text-light"},[e._v(e._s(e._f("capitalize")(e.clickedDetails.label)))]),a("div",{staticClass:"mr-2 text-light closeIcon",attrs:{role:"button"}},[a("i",{staticClass:"icon fa fa-times",attrs:{"aria-hidden":"true","aria-controls":"sidebar"},on:{click:function(t){return e.closeDetails()}}})])]),a("div",{staticClass:"sideBarDetails d-flex align-items-center rounded-bottom"},[a("div",{staticClass:"w-75  px-3 py-2"},[a("div",{staticClass:"d-flex justify-content-between"},[a("span",[a("b",[e._v("Type")])]),a("span",[e._v(e._s(e.clickedDetails.type))])]),a("div",{staticClass:"d-flex justify-content-between"},[a("span",[a("b",[e._v("Area")])]),a("span",[e._v(e._s((247105e-9*e.clickedDetails.area).toFixed(2))+" m"),a("sup",[e._v("2")])])]),a("div",{staticClass:"d-flex justify-content-between"},[a("span",[a("b",[e._v("Perimeter")])]),a("span",[e._v(e._s((3.28084*e.clickedDetails.length).toFixed(2))+" fts")])]),a("div",{staticClass:"d-flex justify-content-between"},[a("span",[a("b",[e._v("Created On")])]),a("span",[e._v(e._s(e.clickedDetails.creation_date))])])]),a("div",{staticClass:"w-25 d-flex justify-content-center"},[a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-light p-2",attrs:{role:"button",title:"Download Measure"},on:{click:function(t){return e.downloadMeasure(e.clickedDetails)}}},[a("i",{staticClass:"fa fa-download"})]),e.$can("delete","measure")?a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-light p-2",attrs:{role:"button",title:"Delete Measurement"},on:{click:function(t){return e.showDeleteModal(e.clickedDetails)}}},[a("i",{staticClass:"fa fa-trash-o"})]):e._e()])])]):e._e()]),a("b-modal",{attrs:{id:"deleteConfirmModal",centered:"",title:"Deletion Confirmation","hide-footer":!0}},[a("deleteConfirmModal",{attrs:{toBeDeleted:e.toBeDeleted,id:e.toBeDeletedId,deleteAPI:e.deleteAOIApi}})],1)],1)},ni=[],li={name:"measureSideNav",components:{deleteConfirmModal:Fe},props:{measuresArray:Array},data:function(){return{clickedDetailsVisible:!1,clickedDetails:{},clickedItemKey:"",measureIconClasses:{poly:"fa fa-draw-polygon",line:"fa fa-slash",point:"far fa-dot-circle"},toBeDeleted:"",toBeDeletedId:"",deleteAOIApi:"airmapStore/deleteMeasureApi",callOnce:1}},computed:{currentDate:function(){var e=this.$store.state.airmapStore.currentDate;return e||""},accessType:function(){var e=this.$store.state.projectStore.accessType;return e||"read"}},methods:{measureItemClicked:function(e){this.clickedItemKey=this.currentDate+e.label,this.clickedDetails=e,this.clickedDetailsVisible=!0,this.$root.$emit("measureItemClicked",e)},closeDetails:function(){this.clickedDetails={},this.clickedDetailsVisible=!1},downloadMeasure:function(e){this.$store.dispatch("airmapStore/downloadMeasureApi",e.id)},showDeleteModal:function(e){this.toBeDeleted=e.label,this.toBeDeletedId=e.id,this.$bvModal.show("deleteConfirmModal")},createNewMeasure:function(){this.$root.$emit("createNewMeasure")},removeMeaure:function(e){this.clickedDetails.label===e&&(this.clickedDetails={},this.clickedDetailsVisible=!1)}},mounted:function(){var e=this;this.$root.$on("measureDeleted",(function(t){e.removeMeaure(t)}))},destroyed:function(){this.callOnce&&(this.callOnce=null,this.$root.$emit("measureClosed"))}},ci=li,di=(a("ec11c"),Object(d["a"])(ci,oi,ni,!1,null,"025b6ad6",null)),ui=di.exports,pi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sidenavListContainer"},[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[a("div",{key:e.currentDate},e._l(e.cadArray,(function(t,r,i){return a("div",{key:i,staticClass:"d-flex justify-content-between sidenavListItem",class:{clickedHighlighter:e.clickedItemKey===e.currentDate+t.id},on:{click:function(a){return e.cadItemClicked(t)}}},[a("div",[a("span",{staticClass:"ml-2"},[e._v(e._s(t.label))])])])})),0)]),e.$can("create","cad")?a("div",{staticClass:"text-center"},[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"primaryBg mt-2 border-0",attrs:{pill:"",title:"Upload New CAD"},on:{click:function(t){return e.uploadNewCad()}}},[a("i",{staticClass:"fa fa-upload"})])],1):e._e()],1),a("transition",{attrs:{name:"fade"}},[e.clickedDetailsVisible?a("div",{staticClass:"d-flex flex-column sideBarDetailsContainer"},[a("div",{staticClass:"d-flex justify-content-between align-items-center bg-dark rounded-top"},[a("b",{staticClass:"ml-2 text-light"},[e._v(e._s(e._f("capitalize")(e.clickedDetails.label)))]),a("div",{staticClass:"mr-2 text-light closeIcon",attrs:{role:"button"}},[a("i",{staticClass:"icon fa fa-times",attrs:{"aria-hidden":"true","aria-controls":"sidebar"},on:{click:function(t){return e.closeDetails()}}})])]),a("div",{staticClass:"sideBarDetails d-flex align-items-center rounded-bottom py-2"},[a("div",{staticClass:"w-75 px-3 py-2"},[a("div",{staticClass:"d-flex justify-content-between"},[a("span",[a("b",[e._v("Uploaded On")])]),a("span",[e._v(e._s(e._f("dateFormat")(e.clickedDetails.creation_date,"YYYY-DD-MM")))])]),a("div",{staticClass:"d-flex justify-content-between"},[a("span",[a("b",[e._v("Uploaded By")])]),a("span",[e._v(e._s(e._f("capitalize")(e.clickedDetails.uploaded_by)))])]),e.clickedDetails.realign_date?a("div",{staticClass:"d-flex justify-content-between"},[a("span",[a("b",[e._v("Realigned On")])]),a("span",[e._v(e._s(e._f("dateFormat")(e.clickedDetails.realign_date,"YYYY-DD-MM")))])]):e._e(),e.clickedDetails.realigned_by?a("div",{staticClass:"d-flex justify-content-between"},[a("span",[a("b",[e._v("Realigned By")])]),a("span",[e._v(e._s(e._f("capitalize")(e.clickedDetails.realigned_by)))])]):e._e()]),a("div",{staticClass:"w-25 d-flex justify-content-center"},[e.isRealigned?a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-light p-2",attrs:{role:"button",title:"Revert Align"},on:{click:function(t){return e.revertReAlign(e.clickedDetails)}}},[a("i",{staticClass:"fas fa-history"})]):a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-light p-2",attrs:{role:"button",title:"Re-align CAD"},on:{click:function(t){return e.reAlignCad(e.clickedDetails)}}},[a("i",{staticClass:"fa fa-arrows-alt"})]),e.$can("delete","cad")?a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-light p-2",attrs:{role:"button",title:"Delete CAD"},on:{click:function(t){return e.showDeleteModal(e.clickedDetails)}}},[a("i",{staticClass:"fa fa-trash-o"})]):e._e()])])]):e._e()]),a("b-modal",{attrs:{id:"deleteConfirmModal",centered:"",title:"Deletion Confirmation","hide-footer":!0}},[a("deleteConfirmModal",{attrs:{toBeDeleted:e.toBeDeleted,id:e.toBeDeletedId,deleteAPI:e.deleteCadApi}})],1)],1)},fi=[],mi={name:"cadAlignSideNav",components:{deleteConfirmModal:Fe},props:{cadArray:Array},data:function(){return{clickedDetailsVisible:!1,clickedDetails:{},clickedItemKey:"",isRealigned:!1,toBeDeleted:"",toBeDeletedId:"",deleteCadApi:"airmapStore/deleteCadAlignApi"}},computed:{currentDate:function(){var e=this.$store.state.airmapStore.currentDate;return e||""},accessType:function(){var e=this.$store.state.projectStore.accessType;return e||"read"}},methods:{cadItemClicked:function(e){this.isRealigned=e.realign_cad_kml.length>0,this.clickedItemKey=this.currentDate+e.id,this.clickedDetails=e,this.clickedDetailsVisible=!0,e&&this.$root.$emit("cadClicked",e)},closeDetails:function(){this.clickedDetails={},this.clickedDetailsVisible=!1},showDeleteModal:function(e){this.toBeDeleted=e.label,this.toBeDeletedId=e.id,this.$bvModal.show("deleteConfirmModal")},uploadNewCad:function(){this.$bvModal.show("cadUploadModal")},reAlignCad:function(e){e&&this.$root.$emit("reAlignClicked",e)},revertReAlign:function(e){e&&this.$root.$emit("revertReAlignClicked",e)}},mounted:function(){var e=this;this.$root.$on("cadUploaded",(function(t){t&&e.cadItemClicked(t)})),this.$root.$on("cadAligned",(function(t){t.id===e.clickedDetails.id&&(e.isRealigned=!0,t.label=e.clickedDetails.label,t.uploaded_cad_kml=e.clickedDetails.uploaded_cad_kml,e.cadItemClicked(t))})),this.$root.$on("cadAlignReverted",(function(t){t.id===e.clickedDetails.id&&(e.clickedDetails.realigned_by=null,e.clickedDetails.realign_date=null,e.isRealigned=!1)})),this.$root.$on("cadDeleted",(function(t){t===e.clickedDetails.label&&(e.clickedDetails={},e.clickedDetailsVisible=!1)}))},beforeDestroy:function(){this.$root.$emit("cadSideNavClosed")}},hi=mi,vi=(a("e74f"),Object(d["a"])(hi,pi,fi,!1,null,"940a78fe",null)),gi=vi.exports,bi={name:"sidenav",components:{summarySideNav:jr,assetsSideNav:Br,inverterSideNav:Rr,aoiSideNav:si,measureSideNav:ui,cadAlignSideNav:gi,activitySideNav:Xr},data:function(){return{sidebarId:"",sideBarHeader:"",sideBarVisible:!1,clickedSideNav:"",sideBarContent:{},isProjectInfoShown:!1}},computed:Object(ae["a"])(Object(ae["a"])({},Object(ne["b"])({summaryApiData:"projectStore/getSummaryData",inverterApiData:"projectStore/getInverterData",activityData:"projectStore/getActivityData",AOIData:"airmapStore/getAllAOIs",measureData:"airmapStore/getAllMeasures",cadAlignData:"airmapStore/getAllCadAlign",projectInfo:"projectStore/getProjectInfo"})),{},{freemiumLinks:function(){var e=[],t=this.$store.state.projectStore.projectType;return e="Construction_Site"===t?[{header:"Assets",icon:"fas fa-chart-pie"},{header:"Compare",icon:"fa fa-arrows-h"}]:[{header:"Summary",icon:"fas fa-chart-pie"},{header:"Inverter",icon:"fas fa-adjust"},{header:"Compare",icon:"fa fa-arrows-h"}],e},premiumLinks:function(){var e=[];return e.push({header:"3D model",icon:"fa fa-cube"},{header:"Activities",icon:"fas fa-tasks"},{header:"AOI",icon:"fa fa-object-group"},{header:"Measure",icon:"fa fa-ruler-combined"},{header:"CAD",icon:"fa fa-cloud-upload"}),e}}),methods:{switchSideNav:function(e){if(this.sideBarHeader.trim()===e.trim())this.closeSideBar();else{switch(e){case"Summary":case"Assets":case"Inverter":case"Activities":this.sideBarVisible=!0;break;case"Compare":this.sideBarVisible=!1;var t=this.$route.params.projectId;this.$router.push("/projects/compare/".concat(t));break;case"AOI":this.sideBarVisible=!0;break;case"Measure":this.sideBarVisible=!0;break;case"CAD":this.sideBarVisible=!0;break;default:break}this.sideBarHeader=e}},closeSideBar:function(){this.sideBarVisible=!1,this.sideBarHeader=""},routeToHome:function(){this.$router.push("/home")},routeToUserProfile:function(){this.$router.push("/user-profile")},routeToManageUsers:function(){this.$router.push("/manage-users")},logout:function(){this.$store.dispatch("userStore/logout"),this.$router.push("/login")}}},yi=bi,Ci=(a("df0d"),Object(d["a"])(yi,_r,kr,!1,null,"13a2f62e",null)),wi=Ci.exports,_i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isChatVisible?a("div",{staticClass:"chat is-visible",staticStyle:{"z-index":"999"}},[a("div",{staticClass:"chat_header"},[a("div",{staticClass:"chat_option"},[a("span",{staticClass:"mx-2 text-light",attrs:{id:"chat_head"}},[e._v("Messages")]),a("div",{staticClass:"mt-1 mr-2"},[a("i",{staticClass:"fa fa-users fa-2x"}),a("b-badge",{attrs:{id:"activeCount",pill:"",variant:"success"}},[e._v("3")]),a("span",{staticClass:"mx-1",attrs:{id:"hideChatButton"},on:{click:function(t){e.isChatVisible=!e.isChatVisible}}},[a("i",{staticClass:"fa fa-angle-down text-light"})])],1)])]),a("div",{staticClass:"chat_conversion chat_converse",staticStyle:{display:"block"},attrs:{id:"chat_fullscreen"}},e._l(e.messages,(function(t,r){return a("div",{key:r,attrs:{id:"messagesList"}},[t.handle===e.handle?a("div",{staticClass:"chat_msg_item chat_msg_item_user"},[a("span",{staticClass:"chatMessage"},[e._v(e._s(t.message))]),a("span",{staticClass:"chatTimeStamp"},[e._v(e._s(t.timestamp))])]):a("div",{staticClass:"chat_msg_item chat_msg_item_admin"},[a("div",{staticClass:"chat_avatar"},[a("img",{attrs:{src:e.userProfilePic}})]),a("span",{staticClass:"chatHandle"},[a("i",{staticClass:"fa fa-circle text-success mx-1"}),e._v(e._s(t.handle))]),a("span",{staticClass:"chatMessage"},[e._v(e._s(t.message))]),a("span",{staticClass:"chatTimeStamp"},[e._v(e._s(t.timestamp))])])])})),0),a("div",{staticClass:"fab_field"},[e._m(0),a("a",{staticClass:"fab is-visible",attrs:{id:"fab_send"},on:{click:e.send}},[a("i",{staticClass:"fa fa-paper-plane"})]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],staticClass:"chat_field chat_message",attrs:{id:"chatSend",name:"chat_message",placeholder:"Send a message"},domProps:{value:e.newMessage},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.shiftKey?(t.preventDefault(),e.send(t)):null},click:e.clearAutoHideTimer,input:function(t){t.target.composing||(e.newMessage=t.target.value)}}})])]):a("div",{staticClass:"chatMinimized d-flex align-items-center primaryBg text-light rounded"},[a("div",{staticClass:"d-flex justify-content-between align-items-center w-100",on:{click:function(t){e.isChatVisible=!e.isChatVisible}}},[e._m(1),e._m(2)])])])},ki=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"fab is-visible",attrs:{id:"fab_camera"}},[a("i",{staticClass:"fa fa-camera"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ml-2 d-flex justify-content-between align-items-center w-50"},[a("div",[a("i",{staticClass:"fas fa-envelope"})]),a("div",[e._v("Messages")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mr-2"},[a("i",{staticClass:"fas fa-angle-up"})])}],Ai={name:"chatBox",data:function(){return{isChatVisible:!0,chatsock:null,newMessage:"",autoHideTimer:null}},computed:{messages:function(){return this.$store.state.chatStore.chatMessages},userDetails:function(){var e=this.$store.getters["userStore/getLoggedInUserDetails"];return e||{}},handle:function(){var e=this.userDetails.username;return e||"user"},userProfilePic:function(){var e="url(".concat(a("aaf2"),")");return this.userDetails.profile_picture&&(e=this.userDetails.profile_picture),e},randomProfilePic:function(){return"https://randomuser.me/api/portraits/men/".concat(this.userId+10,".jpg")}},methods:{send:function(){var e={handle:this.handle,message:this.newMessage};this.$store.dispatch("chatStore/sendNewMessage",e),this.newMessage=""},clearAutoHideTimer:function(){this.autoHideTimer&&clearTimeout(this.autoHideTimer)}},mounted:function(){var e=this,t={wsRoot:"wss://morning-coast-23117.herokuapp.com",roomName:"green-smoke-2521"};this.$store.dispatch("chatStore/initChat",t),this.$store.dispatch("chatStore/getOldMessagesApi","green-smoke-2521"),this.autoHideTimer=setTimeout((function(){e.isChatVisible=!1}),5e3)},destroyed:function(){this.$store.dispatch("chatStore/disconnectSocket")}},Di=Ai,$i=(a("becf"),Object(d["a"])(Di,_i,ki,!1,null,"22466b26",null)),Si=$i.exports,xi={name:"mapPage",data:function(){return{}},components:{mapHeader:Pa,airmap:wr,sidenav:wi,timeline:Ua,chatRoom:Si},beforeRouteEnter:function(e,t,a){if(e.params.projectId){var r=Ht.state.userStore.loggedInUser.userprofile;r||Ht.dispatch("userStore/fetchUserDetailsApi"),Ht.dispatch("projectStore/fetchProjectByIdApi",{projectId:+e.params.projectId,page:"map"}).then((function(e){"success"===e&&a()})).catch((function(e){a(!1),console.log(JSON.stringify(e))}))}else rs.push("/home")}},ji=xi,Li=(a("4e83"),Object(d["a"])(ji,Aa,Da,!1,null,"1984041e",null)),Pi=Li.exports,Mi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"comparePage"},[a("compareMaps")],1)},Ti=[],Ii=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100vh",width:"100%"}},[a("div",{staticClass:"timelineContainer"},[a("b-dropdown",{staticClass:"mx-2 primaryBg",attrs:{text:"Dates",dropright:"",variant:"dark"}},e._l(e.datesArray,(function(t,r){return a("b-dropdown-item",{key:r,attrs:{href:"#"},on:{click:function(a){return e.getCompareData(t,"left")}}},[e._v(e._s(t))])})),1),a("div",[a("b-button",{staticClass:"primaryBg border-0",attrs:{pill:""}},[e._v(e._s(e.leftDate))])],1),a("div",[a("b-button",{staticClass:"primaryBg border-0",attrs:{pill:""}},[e._v(e._s(e.rightDate))])],1),a("b-dropdown",{staticClass:"mx-2",attrs:{text:"Dates",dropleft:"",variant:"dark"}},e._l(e.datesArray,(function(t,r){return a("b-dropdown-item",{key:r,attrs:{href:"#"},on:{click:function(a){return e.getCompareData(t,"right")}}},[e._v(e._s(t))])})),1)],1),a("div",{staticClass:"actionButtons"},[a("b-button",{attrs:{variant:"dark"},on:{click:e.returnToMap,mouseover:function(t){e.isBackButtonShowing=!0},mouseleave:function(t){e.isBackButtonShowing=!1}}},[a("i",{staticClass:"fas fa-arrow-left"}),a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[e.isBackButtonShowing?a("span",{staticClass:"ml-1"},[e._v("Back To Map")]):e._e()])],1),a("b-button",{attrs:{variant:"dark"},on:{click:e.showCompareDetails}},[a("i",{staticClass:"icon fa fa-bar-chart",attrs:{"aria-hidden":"true"}})])],1),a("l-map",{ref:"compareMap",staticStyle:{height:"100%",width:"100%"},attrs:{zoom:e.zoom,center:e.center,options:{maxZoom:23,zoomControl:!1}}},[a("l-tile-layer",{ref:"baseLayerLeft",attrs:{options:{maxZoom:23},url:e.baseUrlLeft}}),a("l-tile-layer",{ref:"baseLayerRight",attrs:{options:{maxZoom:23},url:e.baseUrlRight}}),a("l-tile-layer",{ref:"rgbLayerLeft",attrs:{options:{maxZoom:23},url:e.rgbUrlLeft}}),a("l-tile-layer",{ref:"rgbLayerRight",attrs:{options:{maxZoom:23},url:e.rgbUrlRight},on:{ready:e.addCompareControl}}),a("l-tile-layer",{ref:"dsmLayerLeft",attrs:{options:{maxZoom:23},url:e.dsmUrlLeft,visible:e.isLeftDsm}}),a("l-tile-layer",{ref:"dsmLayerRight",attrs:{options:{maxZoom:23},url:e.dsmUrlRight,visible:e.isRightDsm}}),e.dsmUrlRight?a("l-control",{attrs:{position:"bottomright"}},[a("b-button",{attrs:{pill:"",variant:"dark"}},[a("b-form",[a("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.isRightDsm,callback:function(t){e.isRightDsm=t},expression:"isRightDsm"}},[a("b",[e._v("DSM")])])],1)],1)],1):e._e(),e.dsmUrlLeft?a("l-control",{attrs:{position:"bottomleft"}},[a("b-button",{attrs:{pill:"",variant:"dark"}},[a("b-form",[a("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.isLeftDsm,callback:function(t){e.isLeftDsm=t},expression:"isLeftDsm"}},[a("b",[e._v("DSM")])])],1)],1)],1):e._e()],1),a("b-modal",{attrs:{size:"xl",id:"compareDetailsModal",title:"Asset Comparison","hide-footer":!0}},["Construction_Site"===e.projectType?a("div",[a("compareDetails")],1):a("div",[a("compareDetailsSolar")],1)])],1)},Bi=[],Oi=(a("6d4f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"compareDetailsContainer"},[a("div",{staticClass:"d-flex justify-content-end mr-3 my-1"},[a("VueToggles",{attrs:{value:e.isChart,height:"25",width:"80",checkedText:"Chart",uncheckedText:"Table",checkedBg:"#007bff",uncheckedBg:"#007bff",fontSize:"20px",fontWeight:"500"},on:{click:function(t){e.isChart=!e.isChart}}})],1),e.isChart?a("div",[a("h5",{staticClass:"text-center"},[e._v(" Showing "+e._s(0!==this.start?this.start:1)+" - "+e._s(this.end)+" of "+e._s(e.numberOfAssets)+" Assets ")]),a("div",{staticClass:" chartContainer mx-auto"},[a("apexchart",{attrs:{width:"100%",type:"bar",options:e.options,series:e.series}})],1),a("div",[a("b-row",[a("b-col",{attrs:{cols:"8"}},[a("b-pagination",{attrs:{pills:"","total-rows":e.numberOfAssets,"per-page":e.perPage,align:"right"},on:{change:e.paginate},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),a("b-col",{attrs:{cols:"2"}},[a("b-form-select",{attrs:{options:e.perPageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1)],1)]):a("div",{staticClass:"details"},[a("b-table",{attrs:{id:"contact-table",items:e.tableData,fields:e.fields,"per-page":e.perPageTable,"current-page":e.currentPageTable}}),a("b-pagination",{attrs:{pills:"","total-rows":e.tableData.length,"per-page":e.perPageTable,align:"right"},on:{change:e.paginate},model:{value:e.currentPageTable,callback:function(t){e.currentPageTable=t},expression:"currentPageTable"}})],1)])}),Ui=[],Ni={name:"compareDetailsSolar",data:function(){return{perPage:5,currentPage:1,perPageOptions:[5,10,15],perPageTable:5,currentPageTable:1,isChart:!0}},computed:Object(ae["a"])(Object(ae["a"])({},Object(ne["c"])({leftDate:function(e){return e.projectStore.compareDataLeft.date},rightDate:function(e){return e.projectStore.compareDataRight.date},summaryLeft:function(e){return e.projectStore.compareDataLeft.summary},summaryRight:function(e){return e.projectStore.compareDataRight.summary}})),{},{summaryLeftTransformed:function(){var e=this.objectToArray(this.summaryLeft);return e||[]},summaryLeftData:function(){var e=this.summaryLeftTransformed.map((function(e){return e.current_value}));return e||[]},summaryRightTransformed:function(){var e=this.objectToArray(this.summaryRight);return e||[]},summaryRightData:function(){var e=this.summaryRightTransformed.map((function(e){return e.current_value}));return e||[]},numberOfAssets:function(){var e=Object.keys(this.summaryRightTransformed).length;return e||0},start:function(){var e=(this.currentPage-1)*this.perPage;return e||0},end:function(){var e=this.currentPage*this.perPage;return e<this.numberOfAssets?e||0:this.numberOfAssets},shownAssets:function(){var e=this.summaryRightTransformed.map((function(e){return e.assetName})),t={};return t.names=e.slice(this.start,this.end),t.leftData=this.summaryLeftData.slice(this.start,this.end),t.rightData=this.summaryRightData.slice(this.start,this.end),t},options:function(){return{chart:{id:"vuechart-compare"},xaxis:{categories:this.shownAssets.names,labels:{style:{fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:600,cssClass:"apexcharts-xaxis-label"}}},yaxis:{labels:{style:{fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:600,cssClass:"apexcharts-yaxis-label"}}},plotOptions:{bar:{horizontal:!1,dataLabels:{position:"bottom"}}},legend:{fontSize:"20px",fontFamily:"Helvetica, Arial",fontWeight:400,itemMargin:{horizontal:10,vertical:5}},dataLabels:{enabled:!0,enabledOnSeries:void 0,textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"14px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:"bold",colors:["#fff"]},background:{enabled:!0,foreColor:"#000",padding:4,borderRadius:2,borderWidth:1,borderColor:"#fff",opacity:.9,dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},responsive:[{breakpoint:995,xaxis:{labels:{style:{fontSize:"10px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-xaxis-label"}}},yaxis:{labels:{style:{fontSize:"10px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-yaxis-label"}}},options:{plotOptions:{bar:{horizontal:!0}},legend:{position:"right",verticalAlign:"top",fontSize:"14px",fontWeight:500,itemMargin:{horizontal:10,vertical:5}},dataLabels:{enabled:!1}}}]}},series:function(){return[{name:"".concat(this.leftDate),data:this.shownAssets.leftData},{name:"".concat(this.rightDate),data:this.shownAssets.rightData}]},tableData:function(){for(var e=[],t=this.numberOfAssets,a=this.summaryRightTransformed.map((function(e){return e.assetName})),r=0;r<t;r++)e.push({Asset:a[r],"Left Data":this.summaryLeftData[r]?this.summaryLeftData[r]:"-","Right Data":this.summaryRightData[r]?this.summaryRightData[r]:"-"});return e||[]},fields:function(){var e=Object.keys(this.tableData[0]?this.tableData[0]:{}),t=e.map((function(e){return{key:e,sortable:!0}}));return t=[{key:"Asset",label:"Asset",sortable:!0},{key:"Left Data",label:this.leftDate,sortable:!0},{key:"Right Data",label:this.rightDate,sortable:!0}],t||[]}}),methods:{paginate:function(e){this.currentPage=e,this.objectToArray(this.summaryLeft)},objectToArray:function(e){var t=[];for(var a in e)for(var r in e[a])for(var i in e[a][r]){var s=e[a][r][i];t.push({assetName:"".concat(r," - ").concat(i," "),current_value:s.current_value})}return t}}},Ei=Ni,Fi=(a("1526"),Object(d["a"])(Ei,Oi,Ui,!1,null,"04b7f2c8",null)),Ri=Fi.exports,qi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"compareDetailsContainer"},[a("div",{staticClass:"d-flex justify-content-end mr-3 my-1"},[a("VueToggles",{attrs:{value:e.isChart,height:"25",width:"80",checkedText:"Chart",uncheckedText:"Table",checkedBg:"#007bff",uncheckedBg:"#007bff",fontSize:"20px",fontWeight:"500"},on:{click:function(t){e.isChart=!e.isChart}}})],1),e.isChart?a("div",[a("h5",{staticClass:"text-center"},[e._v(" Showing "+e._s(0!==this.start?this.start:1)+" - "+e._s(this.end)+" of "+e._s(e.totalAssets)+" Assets ")]),a("div",{staticClass:" chartContainer mx-auto"},[a("apexchart",{attrs:{width:"100%",type:"bar",options:e.options,series:e.series}})],1),a("div",[a("b-row",[a("b-col",{attrs:{cols:"8"}},[a("b-pagination",{attrs:{pills:"","total-rows":e.totalAssets,"per-page":e.perPage,align:"right"},on:{change:e.paginate},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),a("b-col",{attrs:{cols:"2"}},[a("b-form-select",{staticClass:"w-50",attrs:{options:e.perPageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1)],1)],1)]):a("div",{staticClass:"details"},[a("b-table",{attrs:{id:"contact-table",items:e.tableData,fields:e.fields,"per-page":e.perPageTable,"current-page":e.currentPageTable}}),a("b-pagination",{attrs:{pills:"","total-rows":e.tableData.length,"per-page":e.perPageTable,align:"center"},on:{change:e.paginate},model:{value:e.currentPageTable,callback:function(t){e.currentPageTable=t},expression:"currentPageTable"}})],1)])},zi=[],Vi={name:"compareDetails",data:function(){return{perPage:5,currentPage:1,perPageOptions:[5,10,15],perPageTable:5,currentPageTable:1,dummyLeftData:[44,55,57,56,61,49,89,23,15,65,57,65,36,95,12,67,34,78],dummyRightData:[76,85,101,98,87,43,24,67,26,47,24,98,23,56,26,84,36,68],isChart:!0}},computed:Object(ae["a"])(Object(ae["a"])({},Object(ne["c"])({leftDate:function(e){return e.projectStore.compareDataLeft.date},rightDate:function(e){return e.projectStore.compareDataRight.date},summaryLeft:function(e){return e.projectStore.compareDataLeft.summary},summaryRight:function(e){return e.projectStore.compareDataRight.summary}})),{},{totalAssets:function(){var e=Object.keys(this.summaryLeft).length;return e||0},start:function(){var e=(this.currentPage-1)*this.perPage;return e||0},end:function(){var e=this.currentPage*this.perPage;return e<this.totalAssets?e||0:this.totalAssets},shownAssets:function(){var e=Object.keys(this.summaryLeft),t={};return t.names=e.slice(this.start,this.end),t.leftData=this.dummyLeftData.slice(this.start,this.end),t.rightData=this.dummyRightData.slice(this.start,this.end),t},options:function(){return{chart:{id:"vuechart-compare"},xaxis:{categories:this.shownAssets.names,labels:{style:{fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:600,cssClass:"apexcharts-xaxis-label"}}},yaxis:{labels:{style:{fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:600,cssClass:"apexcharts-yaxis-label"}}},plotOptions:{bar:{horizontal:!1,dataLabels:{position:"bottom"}}},legend:{fontSize:"16px",fontFamily:"Helvetica, Arial",fontWeight:400,itemMargin:{horizontal:10,vertical:5}},dataLabels:{enabled:!0,enabledOnSeries:void 0,textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"14px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:"bold",colors:["#fff"]},background:{enabled:!0,foreColor:"#000",padding:4,borderRadius:2,borderWidth:1,borderColor:"#fff",opacity:.9,dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},responsive:[{breakpoint:995,xaxis:{labels:{style:{fontSize:"10px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-xaxis-label"}}},yaxis:{labels:{style:{fontSize:"10px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-yaxis-label"}}},options:{plotOptions:{bar:{horizontal:!0}},legend:{position:"right",verticalAlign:"top",fontSize:"14px",fontWeight:500,itemMargin:{horizontal:10,vertical:5}},dataLabels:{enabled:!1}}}]}},series:function(){return[{name:"".concat(this.leftDate),data:this.shownAssets.leftData},{name:"".concat(this.rightDate),data:this.shownAssets.rightData}]},tableData:function(){var e=this.$store.getters["projectStore/getCompareDataTable"];return e||[]},fields:function(){var e=Object.keys(this.tableData[0]?this.tableData[0]:{}),t=e.map((function(e){return{key:e,sortable:!0}}));return t=[{key:"Asset",label:"Asset",sortable:!0},{key:"Left Data",label:this.leftDate,sortable:!0},{key:"Right Data",label:this.rightDate,sortable:!0}],t||[]}}),methods:{paginate:function(e){this.currentPage=e}}},Hi=Vi,Ki=(a("20c3"),Object(d["a"])(Hi,qi,zi,!1,null,"34eac38b",null)),Yi=Ki.exports,Gi={name:"compareMaps",components:{LMap:qa["a"],LTileLayer:za["a"],LControl:Ha["a"],compareDetails:Yi,compareDetailsSolar:Ri},data:function(){return{baseUrlRight:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",baseUrlLeft:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",bounds:null,map:null,isLeftDsm:!1,isRightDsm:!1,leftDsmZIndex:0,rightDsmZIndex:0,compareControl:null,baseLayerLeft:null,baseLayerRight:null,rgbLayerLeft:null,rgbLayerRight:null,dsmLayerLeft:null,dsmLayerRight:null,isBackButtonShowing:!1}},computed:Object(ae["a"])(Object(ae["a"])({},Object(ne["c"])({projectType:function(e){return e.projectStore.projectType},center:function(e){return e.airmapStore.mapOptions.center},zoom:function(e){return e.airmapStore.mapOptions.zoom},leftDate:function(e){return e.projectStore.compareDataLeft.date},rightDate:function(e){return e.projectStore.compareDataRight.date},rgbLeft:function(e){return e.projectStore.compareDataLeft.project_properties.ortho.RGB},rgbRight:function(e){return e.projectStore.compareDataRight.project_properties.ortho.RGB},dsmLeft:function(e){return e.projectStore.compareDataLeft.project_properties.ortho.DSM},dsmRight:function(e){return e.projectStore.compareDataRight.project_properties.ortho.DSM}})),{},{dsmUrl:function(){return this.dsm?"".concat(this.dsm,"{z}/{x}/{y}.png"):""},rgbUrlLeft:function(){return this.rgbLeft?"".concat(this.rgbLeft,"{z}/{x}/{y}.png"):""},rgbUrlRight:function(){return this.rgbRight?"".concat(this.rgbRight,"{z}/{x}/{y}.png"):""},dsmUrlLeft:function(){return this.dsmLeft?"".concat(this.dsmLeft,"{z}/{x}/{y}.png"):""},dsmUrlRight:function(){return this.dsmRight?"".concat(this.dsmRight,"{z}/{x}/{y}.png"):""},datesArray:function(){return this.$store.state.projectStore.datesArray}}),methods:{addCompareControl:function(){this.map=this.$refs.compareMap.mapObject,this.baseLayerLeft=this.$refs.baseLayerLeft.mapObject,this.baseLayerRight=this.$refs.baseLayerRight.mapObject,this.rgbLayerLeft=this.$refs.rgbLayerLeft.mapObject,this.rgbLayerRight=this.$refs.rgbLayerRight.mapObject,this.dsmLayerLeft=this.$refs.dsmLayerLeft.mapObject,this.dsmLayerRight=this.$refs.dsmLayerRight.mapObject,this.compareControl=Ra.a.control.sideBySide([this.baseLayerLeft,this.rgbLayerLeft,this.dsmLayerLeft],[this.baseLayerRight,this.rgbLayerRight,this.dsmLayerRight],{padding:100}).addTo(this.map)},getCompareData:function(e,t){if("left"===t){var a={date:e,side:"left"};this.$store.dispatch("projectStore/setCompareData",a)}else{var r={date:e,side:"right"};this.$store.dispatch("projectStore/setCompareData",r)}},showCompareDetails:function(){this.$bvModal.show("compareDetailsModal")},returnToMap:function(){this.$router.go(-1)}},destroyed:function(){var e={date:this.datesArray[0],side:"left"};this.$store.dispatch("projectStore/setCompareData",e),e.side="right",this.$store.dispatch("projectStore/setCompareData",e)}},Wi=Gi,Zi=(a("cd90"),Object(d["a"])(Wi,Ii,Bi,!1,null,"31a0ac30",null)),Qi=Zi.exports,Ji={name:"comparePage",components:{compareMaps:Qi},beforeRouteEnter:function(e,t,a){e.params.projectId?Ht.dispatch("projectStore/fetchProjectByIdApi",{projectId:+e.params.projectId,page:"compare"}).then((function(e){"success"===e&&a()})).catch((function(e){console.log(JSON.stringify(e)),rs.push("/home")})):rs.push("/home")},beforeRouteUpdate:function(e,t,a){e.params.projectId?Ht.dispatch("projectStore/fetchProjectByIdApi",+e.params.projectId).then((function(e){"success"===e&&a()})).catch((function(e){console.log(JSON.stringify(e)),rs.push("/home")})):rs.push("/home")}},Xi=Ji,es=(a("d2b9"),Object(d["a"])(Xi,Mi,Ti,!1,null,"02623b7a",null)),ts=es.exports;r["default"].use(f["a"]);var as=new f["a"]({mode:"history",hash:!1,base:"/asset_app",routes:[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:Ge},{path:"/user-profile",name:"user-profile",component:Wt},{path:"/manage-users",name:"manage-users",component:na},{path:"/file-upload/:projectId",name:"file-upload",component:ka},{path:"/projects/map/:projectId",name:"map",component:Pi},{path:"/projects/compare/:projectId",name:"compare",component:ts},{path:"/login",name:"login",component:D,meta:{public:!0,onlyWhenLoggedOut:!0}},{path:"/register",name:"register",component:E,meta:{public:!0,onlyWhenLoggedOut:!0}},{path:"/account-recovery",name:"account-recovery",component:Q,meta:{public:!0,onlyWhenLoggedOut:!0}},{path:"*",component:Ge}]});as.beforeEach((function(e,t,a){var r=e.matched.some((function(e){return e.meta.public})),i=e.matched.some((function(e){return e.meta.onlyWhenLoggedOut})),s=!!dt.getToken();return r||s?s&&i?a("/"):void a():a({path:"/login",query:{redirect:e.fullPath}})}));var rs=as,is=a("5f5b"),ss=a("b1e0"),os=(a("f9e3"),a("2dd8"),a("6cc5"),a("1321")),ns=a.n(os),ls=a("67b0"),cs=a("1dce"),ds=a.n(cs),us=a("2b52"),ps=a("4dcf");r["default"].use(is["a"]),r["default"].use(ss["a"]),r["default"].use(ls["a"]),r["default"].component("apexchart",ns.a),delete Fa["Icon"].Default.prototype._getIconUrl,Fa["Icon"].Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),r["default"].use(ds.a),r["default"].use(us["a"],Ht.getters.ability),r["default"].component("VueToggles",ps["a"]),r["default"].filter("dateFormat",(function(e,t){return e?(e=e.toString(),ha()(e).format(t)):""})),r["default"].filter("capitalize",(function(e){return e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""})),r["default"].filter("fileSizer",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var a=1024,r=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,s)).toFixed(r))+" "+i[s]})),r["default"].config.productionTip=!1,new r["default"]({router:rs,store:Ht,render:function(e){return e(p)}}).$mount("#app")},"6a4b":function(e,t,a){a("99af"),a("cb29"),a("4de4"),a("b0c0"),a("ac1f"),a("5319"),a("1276");var r=a("7037");
/*!
	Copyright (c) 2011-2015, Pavel Shramov, Bruno Bergot - MIT licence
*/L.KML=L.FeatureGroup.extend({initialize:function(e,t){this._kml=e,this._layers={},this._kmlOptions=t,e&&this.addKML(e,t)},addKML:function(e,t){var a=L.KML.parseKML(e,t);if(a&&a.length){for(var r=0;r<a.length;r++)this.fire("addlayer",{layer:a[r]}),this.addLayer(a[r]);this.latLngs=L.KML.getLatLngs(e),this.fire("loaded")}},latLngs:[]}),L.Util.extend(L.KML,{parseKML:function(e,t){var a=this.parseStyles(e,t);this.parseStyleMap(e,a);for(var r,i=e.getElementsByTagName("Folder"),s=[],o=0;o<i.length;o++)this._check_folder(i[o])&&(r=this.parseFolder(i[o],a),r&&s.push(r));i=e.getElementsByTagName("Placemark");for(var n=0;n<i.length;n++)this._check_folder(i[n])&&(r=this.parsePlacemark(i[n],e,a),r&&s.push(r));i=e.getElementsByTagName("GroundOverlay");for(var l=0;l<i.length;l++)r=this.parseGroundOverlay(i[l]),r&&s.push(r);return s},_check_folder:function(e,t){e=e.parentNode;while(e&&"Folder"!==e.tagName)e=e.parentNode;return!e||e===t},parseStyles:function(e,t){for(var a={},r=e.getElementsByTagName("Style"),i=0,s=r.length;i<s;i++){var o=this.parseStyle(r[i],t);if(o){var n="#"+o.id;a[n]=o}}return a},parseStyle:function(e,t){var a,i,s={},o={},n={},l={color:!0,width:!0,Icon:!0,href:!0,hotSpot:!0};function c(e){for(var t={},a=0;a<e.childNodes.length;a++){var r=e.childNodes[a],i=r.tagName;if(l[i])if("hotSpot"===i)for(var s=0;s<r.attributes.length;s++)t[r.attributes[s].name]=r.attributes[s].nodeValue;else{var o=r.childNodes[0].nodeValue;"color"===i?(t.opacity=parseInt(o.substring(0,2),16)/255,t.color="#"+o.substring(6,8)+o.substring(4,6)+o.substring(2,4)):"width"===i?t.weight=parseInt(o):"Icon"===i?(n=c(r),n.href&&(t.href=n.href)):"href"===i&&(t.href=o)}}return t}if(a=e.getElementsByTagName("LineStyle"),a&&a[0]&&(s=c(a[0])),a=e.getElementsByTagName("PolyStyle"),a&&a[0]&&(o=c(a[0])),o.color&&(s.fillColor=o.color),o.opacity&&(s.fillOpacity=o.opacity),a=e.getElementsByTagName("IconStyle"),a&&a[0]&&(n=c(a[0])),n.href){var d={iconUrl:n.href,shadowUrl:null,anchorRef:{x:n.x,y:n.y},anchorType:{x:n.xunits,y:n.yunits}};"object"===r(t)&&"object"===r(t.iconOptions)&&L.Util.extend(d,t.iconOptions),s.icon=new L.KMLIcon(d)}return i=e.getAttribute("id"),i&&s&&(s.id=i),s},parseStyleMap:function(e,t){for(var a=e.getElementsByTagName("StyleMap"),r=0;r<a.length;r++){var i,s,o,n=a[r];i=n.getElementsByTagName("key"),i&&i[0]&&(s=i[0].textContent),i=n.getElementsByTagName("styleUrl"),i&&i[0]&&(o=i[0].textContent),"normal"===s&&(t["#"+n.getAttribute("id")]=t[o])}},parseFolder:function(e,t){var a,r,i=[];a=e.getElementsByTagName("Folder");for(var s=0;s<a.length;s++)this._check_folder(a[s],e)&&(r=this.parseFolder(a[s],t),r&&i.push(r));a=e.getElementsByTagName("Placemark");for(var o=0;o<a.length;o++)this._check_folder(a[o],e)&&(r=this.parsePlacemark(a[o],e,t),r&&i.push(r));a=e.getElementsByTagName("GroundOverlay");for(var n=0;n<a.length;n++)this._check_folder(a[n],e)&&(r=this.parseGroundOverlay(a[n]),r&&i.push(r));if(i.length)return r=1===i.length?i[0]:new L.FeatureGroup(i),a=e.getElementsByTagName("name"),a.length&&a[0].childNodes.length&&(r.options.name=a[0].childNodes[0].nodeValue),r},parsePlacemark:function(e,t,a,r){var i,s,o,n,l,c,d=r||{};for(l=e.getElementsByTagName("styleUrl"),s=0;s<l.length;s++){var u=l[s].childNodes[0].nodeValue;for(var p in a[u])d[p]=a[u][p]}if(c=e.getElementsByTagName("Style")[0],c){var f=this.parseStyle(e);if(f)for(n in f)d[n]=f[n]}var m=["MultiGeometry","MultiTrack","gx:MultiTrack"];for(i in m)for(l=e.getElementsByTagName(m[i]),s=0;s<l.length;s++){var h=this.parsePlacemark(l[s],t,a,d);return this.addPlacePopup(e,h),h}var v=[],g=["LineString","Polygon","Point","Track","gx:Track"];for(o in g){var b=g[o];for(l=e.getElementsByTagName(b),s=0;s<l.length;s++){var y=this["parse"+b.replace(/gx:/,"")](l[s],t,d);y&&v.push(y)}}if(v.length){h=v[0];return v.length>1&&(h=new L.FeatureGroup(v)),this.addPlacePopup(e,h),h}},addPlacePopup:function(e,t){var a,r,i,s,o="";for(a=e.getElementsByTagName("name"),a.length&&a[0].childNodes.length&&(s=a[0].childNodes[0].nodeValue),a=e.getElementsByTagName("description"),r=0;r<a.length;r++)for(i=0;i<a[r].childNodes.length;i++)o+=a[r].childNodes[i].nodeValue;s&&t.bindPopup("<h2>"+s+"</h2>"+o,{className:"kml-popup"})},parseCoords:function(e){var t=e.getElementsByTagName("coordinates");return this._read_coords(t[0])},parseLineString:function(e,t,a){var r=this.parseCoords(e);if(r.length)return new L.Polyline(r,a)},parseTrack:function(e,t,a){var r=t.getElementsByTagName("gx:coord");0===r.length&&(r=t.getElementsByTagName("coord"));for(var i=[],s=0;s<r.length;s++)i=i.concat(this._read_gxcoords(r[s]));if(i.length)return new L.Polyline(i,a)},parsePoint:function(e,t,a){var r=e.getElementsByTagName("coordinates");if(r.length){var i=r[0].childNodes[0].nodeValue.split(",");return new L.KMLMarker(new L.LatLng(i[1],i[0]),a)}},parsePolygon:function(e,t,a){var r,i,s,o=[],n=[];for(r=e.getElementsByTagName("outerBoundaryIs"),i=0;i<r.length;i++)s=this.parseCoords(r[i]),s&&o.push(s);for(r=e.getElementsByTagName("innerBoundaryIs"),i=0;i<r.length;i++)s=this.parseCoords(r[i]),s&&n.push(s);if(o.length)return a.fillColor&&(a.fill=!0),1===o.length?new L.Polygon(o.concat(n),a):new L.MultiPolygon(o,a)},getLatLngs:function(e){for(var t=e.getElementsByTagName("coordinates"),a=[],r=0;r<t.length;r++)a=a.concat(this._read_coords(t[r]));return a},_read_coords:function(e){var t,a="",r=[];for(t=0;t<e.childNodes.length;t++)a+=e.childNodes[t].nodeValue;for(a=a.split(/[\s\n]+/),t=0;t<a.length;t++){var i=a[t].split(",");i.length<2||r.push(new L.LatLng(i[1],i[0]))}return r},_read_gxcoords:function(e){var t="",a=[];return t=e.firstChild.nodeValue.split(" "),a.push(new L.LatLng(t[1],t[0])),a},parseGroundOverlay:function(e){var t=e.getElementsByTagName("LatLonBox")[0],a=new L.LatLngBounds([t.getElementsByTagName("south")[0].childNodes[0].nodeValue,t.getElementsByTagName("west")[0].childNodes[0].nodeValue],[t.getElementsByTagName("north")[0].childNodes[0].nodeValue,t.getElementsByTagName("east")[0].childNodes[0].nodeValue]),r={Icon:!0,href:!0,color:!0};function i(e){for(var t={},a={},s=0;s<e.childNodes.length;s++){var o=e.childNodes[s],n=o.tagName;if(r[n]){var l=o.childNodes[0].nodeValue;"Icon"===n?(a=i(o),a.href&&(t.href=a.href)):"href"===n?t.href=l:"color"===n&&(t.opacity=parseInt(l.substring(0,2),16)/255,t.color="#"+l.substring(6,8)+l.substring(4,6)+l.substring(2,4))}}return t}var s={};if(s=i(e),void 0!==t.getElementsByTagName("rotation")[0]){var o=t.getElementsByTagName("rotation")[0].childNodes[0].nodeValue;s.rotation=parseFloat(o)}return new L.RotatedImageOverlay(s.href,a,{opacity:s.opacity,angle:s.rotation})}}),L.KMLIcon=L.Icon.extend({options:{iconSize:[32,32],iconAnchor:[16,16]},_setIconStyles:function(e,t){L.Icon.prototype._setIconStyles.apply(this,[e,t])},_createImg:function(e,t){return t=t||document.createElement("img"),t.onload=this.applyCustomStyles.bind(this,t),t.src=e,t},applyCustomStyles:function(e){var t=this.options,a=t.iconSize[0],r=t.iconSize[1];this.options.popupAnchor=[0,-.83*r],"fraction"===t.anchorType.x&&(e.style.marginLeft=-t.anchorRef.x*a+"px"),"fraction"===t.anchorType.y&&(e.style.marginTop=-(1-t.anchorRef.y)*r+1+"px"),"pixels"===t.anchorType.x&&(e.style.marginLeft=-t.anchorRef.x+"px"),"pixels"===t.anchorType.y&&(e.style.marginTop=t.anchorRef.y-r+1+"px")}}),L.KMLMarker=L.Marker.extend({options:{icon:new L.KMLIcon.Default}}),L.RotatedImageOverlay=L.ImageOverlay.extend({options:{angle:0},_reset:function(){L.ImageOverlay.prototype._reset.call(this),this._rotate()},_animateZoom:function(e){L.ImageOverlay.prototype._animateZoom.call(this,e),this._rotate()},_rotate:function(){if(L.DomUtil.TRANSFORM)this._image.style[L.DomUtil.TRANSFORM]+=" rotate("+this.options.angle+"deg)";else if(L.Browser.ie){var e=this.options.angle*(Math.PI/180),t=Math.cos(e),a=Math.sin(e);this._image.style.filter+=" progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11="+t+", M12="+-a+", M21="+a+", M22="+t+")"}},getBounds:function(){return this._bounds}})},"6b0a":function(e,t,a){},"6c1e":function(e,t,a){"use strict";var r=a("fb00"),i=a.n(r);i.a},"6d4f":function(e,t,a){(function(e){var t;a("4160"),a("a15b"),a("ac1f"),a("1276"),a("159b"),function(){function e(a,r,i){function s(n,l){if(!r[n]){if(!a[n]){var c="function"==typeof t&&t;if(!l&&c)return t(n,!0);if(o)return o(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var u=r[n]={exports:{}};a[n][0].call(u.exports,(function(e){var t=a[n][1][e];return s(t||e)}),u,u.exports,e,a,r,i)}return r[n].exports}for(var o="function"==typeof t&&t,n=0;n<i.length;n++)s(i[n]);return s}return e}()({1:[function(t,a,r){(function(e){var r,i,s="undefined"!==typeof window?window["L"]:"undefined"!==typeof e?e["L"]:null;function o(e,t,a,r){t.split(" ").forEach((function(t){s.DomEvent.on(e,t,a,r)}))}function n(e,t,a,r){t.split(" ").forEach((function(t){s.DomEvent.off(e,t,a,r)}))}function l(e){return"oninput"in e?"input":"change"}function c(){r=this._map.dragging.enabled(),i=this._map.tap&&this._map.tap.enabled(),this._map.dragging.disable(),this._map.tap&&this._map.tap.disable()}function d(e){this._refocusOnMap(e),r&&this._map.dragging.enable(),i&&this._map.tap.enable()}function u(e){return"undefined"===e?[]:Array.isArray(e)?e:[e]}function p(){}t("./layout.css"),t("./range.css"),s.Control.SideBySide=s.Control.extend({options:{thumbSize:42,padding:0},initialize:function(e,t,a){this.setLeftLayers(e),this.setRightLayers(t),s.setOptions(this,a)},getPosition:function(){var e=this._range.value,t=(.5-e)*(2*this.options.padding+this.options.thumbSize);return this._map.getSize().x*e+t},setPosition:p,includes:s.Evented.prototype||s.Mixin.Events,addTo:function(e){this.remove(),this._map=e;var t=this._container=s.DomUtil.create("div","leaflet-sbs",e._controlContainer);this._divider=s.DomUtil.create("div","leaflet-sbs-divider",t);var a=this._range=s.DomUtil.create("input","leaflet-sbs-range",t);return a.type="range",a.min=0,a.max=1,a.step="any",a.value=.5,a.style.paddingLeft=a.style.paddingRight=this.options.padding+"px",this._addEvents(),this._updateLayers(),this},remove:function(){return this._map?(this._leftLayer&&(this._leftLayer.getContainer().style.clip=""),this._rightLayer&&(this._rightLayer.getContainer().style.clip=""),this._removeEvents(),s.DomUtil.remove(this._container),this._map=null,this):this},setLeftLayers:function(e){return this._leftLayers=u(e),this._updateLayers(),this},setRightLayers:function(e){return this._rightLayers=u(e),this._updateLayers(),this},_updateClip:function(){var e=this._map,t=e.containerPointToLayerPoint([0,0]),a=e.containerPointToLayerPoint(e.getSize()),r=t.x+this.getPosition(),i=this.getPosition();this._divider.style.left=i+"px",this.fire("dividermove",{x:i});var s="rect("+[t.y,r,a.y,t.x].join("px,")+"px)",o="rect("+[t.y,a.x,a.y,r].join("px,")+"px)";this._leftLayer&&(this._leftLayer.getContainer().style.clip=s),this._rightLayer&&(this._rightLayer.getContainer().style.clip=o)},_updateLayers:function(){if(!this._map)return this;var e=this._leftLayer,t=this._rightLayer;this._leftLayer=this._rightLayer=null,this._leftLayers.forEach((function(e){this._map.hasLayer(e)&&(this._leftLayer=e)}),this),this._rightLayers.forEach((function(e){this._map.hasLayer(e)&&(this._rightLayer=e)}),this),e!==this._leftLayer&&(e&&this.fire("leftlayerremove",{layer:e}),this._leftLayer&&this.fire("leftlayeradd",{layer:this._leftLayer})),t!==this._rightLayer&&(t&&this.fire("rightlayerremove",{layer:t}),this._rightLayer&&this.fire("rightlayeradd",{layer:this._rightLayer})),this._updateClip()},_addEvents:function(){var e=this._range,t=this._map;t&&e&&(t.on("move",this._updateClip,this),t.on("layeradd layerremove",this._updateLayers,this),o(e,l(e),this._updateClip,this),o(e,s.Browser.touch?"touchstart":"mousedown",c,this),o(e,s.Browser.touch?"touchend":"mouseup",d,this))},_removeEvents:function(){var e=this._range,t=this._map;e&&(n(e,l(e),this._updateClip,this),n(e,s.Browser.touch?"touchstart":"mousedown",c,this),n(e,s.Browser.touch?"touchend":"mouseup",d,this)),t&&(t.off("layeradd layerremove",this._updateLayers,this),t.off("move",this._updateClip,this))}}),s.control.sideBySide=function(e,t,a){return new s.Control.SideBySide(e,t,a)},a.exports=s.Control.SideBySide}).call(this,"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./layout.css":2,"./range.css":4}],2:[function(e,t,a){var r=e("./node_modules/cssify"),i=".leaflet-sbs-range {\r\n    position: absolute;\r\n    top: 50%;\r\n    width: 100%;\r\n    z-index: 999;\r\n}\r\n.leaflet-sbs-divider {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 50%;\r\n    margin-left: -2px;\r\n    width: 4px;\r\n    background-color: #fff;\r\n    pointer-events: none;\r\n    z-index: 999;\r\n}\r\n";r(i,void 0,"_i6aomd"),t.exports=i},{"./node_modules/cssify":3}],3:[function(e,t,a){"use strict";function r(e,t,a){var r=e.getElementById(t);if(r)a(r);else{var i=e.getElementsByTagName("head")[0];r=e.createElement("style"),null!=t&&(r.id=t),a(r),i.appendChild(r)}return r}t.exports=function(e,t,a){var i=t||document;if(i.createStyleSheet){var s=i.createStyleSheet();return s.cssText=e,s.ownerNode}return r(i,a,(function(t){t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e}))},t.exports.byUrl=function(e){if(document.createStyleSheet)return document.createStyleSheet(e).ownerNode;var t=document.getElementsByTagName("head")[0],a=document.createElement("link");return a.rel="stylesheet",a.href=e,t.appendChild(a),a}},{}],4:[function(e,t,a){var r=e("./node_modules/cssify"),i='.leaflet-sbs-range {\r\n    -webkit-appearance: none;\r\n    display: inline-block!important;\r\n    vertical-align: middle;\r\n    height: 0;\r\n    padding: 0;\r\n    margin: 0;\r\n    border: 0;\r\n    background: rgba(0, 0, 0, 0.25);\r\n    min-width: 100px;\r\n    cursor: pointer;\r\n    pointer-events: none;\r\n    z-index: 999;\r\n}\r\n.leaflet-sbs-range::-ms-fill-upper {\r\n    background: transparent;\r\n}\r\n.leaflet-sbs-range::-ms-fill-lower {\r\n    background: rgba(255, 255, 255, 0.25);\r\n}\r\n/* Browser thingies */\r\n\r\n.leaflet-sbs-range::-moz-range-track {\r\n    opacity: 0;\r\n}\r\n.leaflet-sbs-range::-ms-track {\r\n    opacity: 0;\r\n}\r\n.leaflet-sbs-range::-ms-tooltip {\r\n    display: none;\r\n}\r\n/* For whatever reason, these need to be defined\r\n * on their own so dont group them */\r\n\r\n.leaflet-sbs-range::-webkit-slider-thumb {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n    padding: 0;\r\n    background: #fff;\r\n    height: 40px;\r\n    width: 40px;\r\n    border-radius: 20px;\r\n    cursor: ew-resize;\r\n    pointer-events: auto;\r\n    border: 1px solid #ddd;\r\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABlBMVEV9fX3///+Kct39AAAAAnRSTlP/AOW3MEoAAAA9SURBVFjD7dehDQAwDANBZ/+l2wmKoiqR7pHRcaeaCxAIBAL/g7k9JxAIBAKBQCAQCAQC14H+MhAIBE4CD3fOFvGVBzhZAAAAAElFTkSuQmCC");\r\n    background-position: 50% 50%;\r\n    background-repeat: no-repeat;\r\n    background-size: 40px 40px;\r\n}\r\n.leaflet-sbs-range::-ms-thumb {\r\n    margin: 0;\r\n    padding: 0;\r\n    background: #fff;\r\n    height: 40px;\r\n    width: 40px;\r\n    border-radius: 20px;\r\n    cursor: ew-resize;\r\n    pointer-events: auto;\r\n    border: 1px solid #ddd;\r\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABlBMVEV9fX3///+Kct39AAAAAnRSTlP/AOW3MEoAAAA9SURBVFjD7dehDQAwDANBZ/+l2wmKoiqR7pHRcaeaCxAIBAL/g7k9JxAIBAKBQCAQCAQC14H+MhAIBE4CD3fOFvGVBzhZAAAAAElFTkSuQmCC");\r\n    background-position: 50% 50%;\r\n    background-repeat: no-repeat;\r\n    background-size: 40px 40px;\r\n}\r\n.leaflet-sbs-range::-moz-range-thumb {\r\n    padding: 0;\r\n    right: 0    ;\r\n    background: #fff;\r\n    height: 40px;\r\n    width: 40px;\r\n    border-radius: 20px;\r\n    cursor: ew-resize;\r\n    pointer-events: auto;\r\n    border: 1px solid #ddd;\r\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAABlBMVEV9fX3///+Kct39AAAAAnRSTlP/AOW3MEoAAAA9SURBVFjD7dehDQAwDANBZ/+l2wmKoiqR7pHRcaeaCxAIBAL/g7k9JxAIBAKBQCAQCAQC14H+MhAIBE4CD3fOFvGVBzhZAAAAAElFTkSuQmCC");\r\n    background-position: 50% 50%;\r\n    background-repeat: no-repeat;\r\n    background-size: 40px 40px;\r\n}\r\n.leaflet-sbs-range:disabled::-moz-range-thumb {\r\n    cursor: default;\r\n}\r\n.leaflet-sbs-range:disabled::-ms-thumb {\r\n    cursor: default;\r\n}\r\n.leaflet-sbs-range:disabled::-webkit-slider-thumb {\r\n    cursor: default;\r\n}\r\n.leaflet-sbs-range:disabled {\r\n    cursor: default;\r\n}\r\n.leaflet-sbs-range:focus {\r\n    outline: none!important;\r\n}\r\n.leaflet-sbs-range::-moz-focus-outer {\r\n    border: 0;\r\n}\r\n\r\n';r(i,void 0,"_1tlt668"),t.exports=i},{"./node_modules/cssify":3}]},{},[1])}).call(this,a("c8ba"))},"6fb0":function(e,t,a){"use strict";var r=a("c937"),i=a.n(r);i.a},"720f":function(e,t,a){},"7b25":function(e,t,a){"use strict";var r=a("3394"),i=a.n(r);i.a},"7e51":function(e,t,a){},8562:function(e,t,a){"use strict";var r=a("720f"),i=a.n(r);i.a},"85ec":function(e,t,a){},"8de0":function(e,t,a){},"913f":function(e,t,a){},"944d":function(e,t,a){"use strict";var r=a("0048"),i=a.n(r);i.a},"9a5e":function(e,t,a){},a24c:function(e,t,a){"use strict";var r=a("3e05"),i=a.n(r);i.a},a281:function(e,t,a){},a433:function(e,t,a){},a494:function(e,t,a){},aa36:function(e,t,a){"use strict";var r=a("4564"),i=a.n(r);i.a},aaf2:function(e,t,a){e.exports=a.p+"img/male-default-icon.9ab7dbfd.png"},ba1b:function(e,t,a){},becf:function(e,t,a){"use strict";var r=a("c92c"),i=a.n(r);i.a},c0b1:function(e,t,a){"use strict";var r=a("ba1b"),i=a.n(r);i.a},c42b:function(e,t,a){},c609:function(e,t,a){},c6ad:function(e,t,a){},c894:function(e,t,a){},c92c:function(e,t,a){},c937:function(e,t,a){},cd90:function(e,t,a){"use strict";var r=a("f87a"),i=a.n(r);i.a},ceff:function(e,t,a){e.exports=a.p+"img/solar-default-pic.9adef21c.jpg"},d2b9:function(e,t,a){"use strict";var r=a("44ae"),i=a.n(r);i.a},d57f:function(e,t,a){"use strict";var r=a("c894"),i=a.n(r);i.a},d831:function(e,t,a){},d889:function(e,t,a){"use strict";var r=a("24de"),i=a.n(r);i.a},d951:function(e,t,a){"use strict";var r=a("e3d4"),i=a.n(r);i.a},dd95:function(e,t,a){"use strict";var r=a("e4f6"),i=a.n(r);i.a},df0d:function(e,t,a){"use strict";var r=a("2580"),i=a.n(r);i.a},e071:function(e,t,a){e.exports=a.p+"img/construction-default-pic2.457c8b80.jpg"},e3d4:function(e,t,a){},e4f6:function(e,t,a){},e74f:function(e,t,a){"use strict";var r=a("7e51"),i=a.n(r);i.a},ec11c:function(e,t,a){"use strict";var r=a("6b0a"),i=a.n(r);i.a},f832:function(e,t,a){"use strict";var r=a("9a5e"),i=a.n(r);i.a},f87a:function(e,t,a){},fb00:function(e,t,a){}});
//# sourceMappingURL=app.68c7d775.js.map